!function(e,t){"use strict";function i(e){var t=e.length,i=Q.type(e);return!Q.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}function r(e,i,r,n){if(Q.acceptData(e)){var o,l,a=Q.expando,s="string"==typeof i,d=e.nodeType,u=d?Q.cache:e,c=d?e[a]:e[a]&&a;if(c&&u[c]&&(n||u[c].data)||!s||r!==t)return c||(d?e[a]=c=O.pop()||Q.guid++:c=a),u[c]||(u[c]={},d||(u[c].toJSON=Q.noop)),("object"==typeof i||"function"==typeof i)&&(n?u[c]=Q.extend(u[c],i):u[c].data=Q.extend(u[c].data,i)),o=u[c],n||(o.data||(o.data={}),o=o.data),r!==t&&(o[Q.camelCase(i)]=r),s?null==(l=o[i])&&(l=o[Q.camelCase(i)]):l=o,l}}function n(e,t,i){if(Q.acceptData(e)){var r,n,o,a=e.nodeType,s=a?Q.cache:e,d=a?e[Q.expando]:Q.expando;if(s[d]){if(t&&(r=i?s[d]:s[d].data)){Q.isArray(t)?t=t.concat(Q.map(t,Q.camelCase)):t in r?t=[t]:(t=Q.camelCase(t),t=t in r?[t]:t.split(" "));for(n=0,o=t.length;o>n;n++)delete r[t[n]];if(!(i?l:Q.isEmptyObject)(r))return}(i||(delete s[d].data,l(s[d])))&&(a?Q.cleanData([e],!0):Q.support.deleteExpando||s!=s.window?delete s[d]:s[d]=null)}}}function o(e,i,r){if(r===t&&1===e.nodeType){var n="data-"+i.replace(he,"-$1").toLowerCase();if("string"==typeof(r=e.getAttribute(n))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:ce.test(r)?Q.parseJSON(r):r)}catch(e){}Q.data(e,i,r)}else r=t}return r}function l(e){var t;for(t in e)if(("data"!==t||!Q.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function a(){return!0}function s(){return!1}function d(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function u(e,t,i){if(t=t||0,Q.isFunction(t))return Q.grep(e,function(e,r){return!!t.call(e,r,e)===i});if(t.nodeType)return Q.grep(e,function(e){return e===t===i});if("string"==typeof t){var r=Q.grep(e,function(e){return 1===e.nodeType});if(Re.test(t))return Q.filter(t,r,!i);t=Q.filter(t,r)}return Q.grep(e,function(e){return Q.inArray(e,t)>=0===i})}function c(e){var t=Fe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function h(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function p(e){var t=Ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var i,r=0;null!=(i=e[r]);r++)Q._data(i,"globalEval",!t||Q._data(t[r],"globalEval"))}function f(e,t){if(1===t.nodeType&&Q.hasData(e)){var i,r,n,o=Q._data(e),l=Q._data(t,o),a=o.events;if(a){delete l.handle,l.events={};for(i in a)for(r=0,n=a[i].length;n>r;r++)Q.event.add(t,i,a[i][r])}l.data&&(l.data=Q.extend({},l.data))}}function v(e,i){var r,n,o=0,l=e.getElementsByTagName!==t?e.getElementsByTagName(i||"*"):e.querySelectorAll!==t?e.querySelectorAll(i||"*"):t;if(!l)for(l=[],r=e.childNodes||e;null!=(n=r[o]);o++)!i||Q.nodeName(n,i)?l.push(n):Q.merge(l,v(n,i));return i===t||i&&Q.nodeName(e,i)?Q.merge([e],l):l}function m(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),r=t,n=ut.length;n--;)if((t=ut[n]+i)in e)return t;return r}function b(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)}function y(e,t){for(var i,r=[],n=0,o=e.length;o>n;n++)(i=e[n]).style&&(r[n]=Q._data(i,"olddisplay"),t?(r[n]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&b(i)&&(r[n]=Q._data(i,"olddisplay",C(i.nodeName)))):r[n]||b(i)||Q._data(i,"olddisplay",Q.css(i,"display")));for(n=0;o>n;n++)(i=e[n]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[n]||"":"none"));return e}function x(e,t,i){var r=rt.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function w(e,t,i,r,n){for(var o=i===(r?"border":"content")?4:"width"===t?1:0,l=0;4>o;o+=2)"margin"===i&&(l+=Q.css(e,i+dt[o],!0,n)),r?("content"===i&&(l-=Q.css(e,"padding"+dt[o],!0,n)),"margin"!==i&&(l-=Q.css(e,"border"+dt[o]+"Width",!0,n))):(l+=Q.css(e,"padding"+dt[o],!0,n),"padding"!==i&&(l+=Q.css(e,"border"+dt[o]+"Width",!0,n)));return l}function _(e,t,i){var r=!0,n="width"===t?e.offsetWidth:e.offsetHeight,o=Je(e),l=Q.support.boxSizing&&"border-box"===Q.css(e,"boxSizing",!1,o);if(0>=n||null==n){if((0>(n=Ue(e,t,o))||null==n)&&(n=e.style[t]),nt.test(n))return n;r=l&&(Q.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+w(e,t,i||(l?"border":"content"),r,o)+"px"}function C(e){var t=j,i=lt[e];return i||("none"!==(i=D(e,t))&&i||(Qe=(Qe||Q("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),(t=(Qe[0].contentWindow||Qe[0].contentDocument).document).write("<!doctype html><html><body>"),t.close(),i=D(e,t),Qe.detach()),lt[e]=i),i}function D(e,t){var i=Q(t.createElement(e)).appendTo(t.body),r=Q.css(i[0],"display");return i.remove(),r}function T(e,t,i,r){var n;if(Q.isArray(t))Q.each(t,function(t,n){i||ht.test(e)?r(e,n):T(e+"["+("object"==typeof n?t:"")+"]",n,i,r)});else if(i||"object"!==Q.type(t))r(e,t);else for(n in t)T(e+"["+n+"]",t[n],i,r)}function k(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var r,n=0,o=t.toLowerCase().match(Z)||[];if(Q.isFunction(i))for(;r=o[n++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(i)):(e[r]=e[r]||[]).push(i)}}function $(e,i,r,n){function o(s){var d;return l[s]=!0,Q.each(e[s]||[],function(e,s){var u=s(i,r,n);return"string"!=typeof u||a||l[u]?a?!(d=u):t:(i.dataTypes.unshift(u),o(u),!1)}),d}var l={},a=e===St;return o(i.dataTypes[0])||!l["*"]&&o("*")}function S(e,i){var r,n,o=Q.ajaxSettings.flatOptions||{};for(r in i)i[r]!==t&&((o[r]?e:n||(n={}))[r]=i[r]);return n&&Q.extend(!0,e,n),e}function B(){try{return new e.XMLHttpRequest}catch(e){}}function R(){return setTimeout(function(){Mt=t}),Mt=Q.now()}function N(e,t,i){var r,n,o=0,l=Lt.length,a=Q.Deferred().always(function(){delete s.elem}),s=function(){if(n)return!1;for(var t=Mt||R(),i=Math.max(0,d.startTime+d.duration-t),r=1-(i/d.duration||0),o=0,l=d.tweens.length;l>o;o++)d.tweens[o].run(r);return a.notifyWith(e,[d,r,i]),1>r&&l?i:(a.resolveWith(e,[d]),!1)},d=a.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Mt||R(),duration:i.duration,tweens:[],createTween:function(t,i){var r=Q.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(r),r},stop:function(t){var i=0,r=t?d.tweens.length:0;if(n)return this;for(n=!0;r>i;i++)d.tweens[i].run(1);return t?a.resolveWith(e,[d,t]):a.rejectWith(e,[d,t]),this}}),u=d.props;for(function(e,t){var i,r,n,o,l;for(i in e)if(r=Q.camelCase(i),n=t[r],o=e[i],Q.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==r&&(e[r]=o,delete e[i]),(l=Q.cssHooks[r])&&"expand"in l){o=l.expand(o),delete e[r];for(i in o)i in e||(e[i]=o[i],t[i]=n)}else t[r]=n}(u,d.opts.specialEasing);l>o;o++)if(r=Lt[o].call(d,e,u,d.opts))return r;return function(e,t){Q.each(t,function(t,i){for(var r=(Ot[t]||[]).concat(Ot["*"]),n=0,o=r.length;o>n;n++)if(r[n].call(e,t,i))return})}(d,u),Q.isFunction(d.opts.start)&&d.opts.start.call(e,d),Q.fx.timer(Q.extend(s,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function E(e,t,i,r,n){return new E.prototype.init(e,t,i,r,n)}function F(e,t){var i,r={height:e},n=0;for(t=t?1:0;4>n;n+=2-t)i=dt[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function I(e){return Q.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var A,M,j=e.document,z=e.location,H=e.jQuery,P=e.$,L={},O=[],V="1.9.0",W=O.concat,G=O.push,q=O.slice,X=O.indexOf,Y=L.toString,U=L.hasOwnProperty,J=V.trim,Q=function(e,t){return new Q.fn.init(e,t,A)},K=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Z=/\S+/g,ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,ie=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,re=/^[\],:{}\s]*$/,ne=/(?:^|:|,)(?:\s*\[)+/g,oe=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,le=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ae=/^-ms-/,se=/-([\da-z])/gi,de=function(){j.addEventListener?(j.removeEventListener("DOMContentLoaded",de,!1),Q.ready()):"complete"===j.readyState&&(j.detachEvent("onreadystatechange",de),Q.ready())};Q.fn=Q.prototype={jquery:V,constructor:Q,init:function(e,i,r){var n,o;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:te.exec(e))||!n[1]&&i)return!i||i.jquery?(i||r).find(e):this.constructor(i).find(e);if(n[1]){if(i=i instanceof Q?i[0]:i,Q.merge(this,Q.parseHTML(n[1],i&&i.nodeType?i.ownerDocument||i:j,!0)),ie.test(n[1])&&Q.isPlainObject(i))for(n in i)Q.isFunction(this[n])?this[n](i[n]):this.attr(n,i[n]);return this}if((o=j.getElementById(n[2]))&&o.parentNode){if(o.id!==n[2])return r.find(e);this.length=1,this[0]=o}return this.context=j,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return q.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=Q.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Q.each(this,e,t)},ready:function(e){return Q.ready.promise().done(e),this},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(Q.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:[].sort,splice:[].splice},Q.fn.init.prototype=Q.fn,Q.extend=Q.fn.extend=function(){var e,i,r,n,o,l,a=arguments[0]||{},s=1,d=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},s=2),"object"==typeof a||Q.isFunction(a)||(a={}),d===s&&(a=this,--s);d>s;s++)if(null!=(e=arguments[s]))for(i in e)r=a[i],n=e[i],a!==n&&(u&&n&&(Q.isPlainObject(n)||(o=Q.isArray(n)))?(o?(o=!1,l=r&&Q.isArray(r)?r:[]):l=r&&Q.isPlainObject(r)?r:{},a[i]=Q.extend(u,l,n)):n!==t&&(a[i]=n));return a},Q.extend({noConflict:function(t){return e.$===Q&&(e.$=P),t&&e.jQuery===Q&&(e.jQuery=H),Q},isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){if(!0===e?!--Q.readyWait:!Q.isReady){if(!j.body)return setTimeout(Q.ready);Q.isReady=!0,!0!==e&&--Q.readyWait>0||(M.resolveWith(j,[Q]),Q.fn.trigger&&Q(j).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray||function(e){return"array"===Q.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?L[Y.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==Q.type(e)||e.nodeType||Q.isWindow(e))return!1;try{if(e.constructor&&!U.call(e,"constructor")&&!U.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var i;for(i in e);return i===t||U.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||j;var r=ie.exec(e),n=!i&&[];return r?[t.createElement(r[1])]:(r=Q.buildFragment([e],t,n),n&&Q(n).remove(),Q.merge([],r.childNodes))},parseJSON:function(i){return e.JSON&&e.JSON.parse?e.JSON.parse(i):null===i?i:"string"==typeof i&&(i=Q.trim(i))&&re.test(i.replace(oe,"@").replace(le,"]").replace(ne,""))?Function("return "+i)():(Q.error("Invalid JSON: "+i),t)},parseXML:function(i){var r,n;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(n=new DOMParser,r=n.parseFromString(i,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(i))}catch(e){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||Q.error("Invalid XML: "+i),r},noop:function(){},globalEval:function(t){t&&Q.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ae,"ms-").replace(se,function(e,t){return t.toUpperCase()})},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var n=0,o=e.length,l=i(e);if(r){if(l)for(;o>n&&!1!==t.apply(e[n],r);n++);else for(n in e)if(!1===t.apply(e[n],r))break}else if(l)for(;o>n&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:J&&!J.call("\ufeff ")?function(e){return null==e?"":J.call(e)}:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(i(Object(e))?Q.merge(r,"string"==typeof e?[e]:e):G.call(r,e)),r},inArray:function(e,t,i){var r;if(t){if(X)return X.call(t,e,i);for(r=t.length,i=i?0>i?Math.max(0,r+i):i:0;r>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var r=i.length,n=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[n++]=i[o];else for(;i[o]!==t;)e[n++]=i[o++];return e.length=n,e},grep:function(e,t,i){var r,n=[],o=0,l=e.length;for(i=!!i;l>o;o++)r=!!t(e[o],o),i!==r&&n.push(e[o]);return n},map:function(e,t,r){var n,o=0,l=e.length,a=[];if(i(e))for(;l>o;o++)null!=(n=t(e[o],o,r))&&(a[a.length]=n);else for(o in e)null!=(n=t(e[o],o,r))&&(a[a.length]=n);return W.apply([],a)},guid:1,proxy:function(e,i){var r,n,o;return"string"==typeof i&&(r=e[i],i=e,e=r),Q.isFunction(e)?(n=q.call(arguments,2),o=function(){return e.apply(i||this,n.concat(q.call(arguments)))},o.guid=e.guid=e.guid||Q.guid++,o):t},access:function(e,i,r,n,o,l,a){var s=0,d=e.length,u=null==r;if("object"===Q.type(r)){o=!0;for(s in r)Q.access(e,i,s,r[s],!0,l,a)}else if(n!==t&&(o=!0,Q.isFunction(n)||(a=!0),u&&(a?(i.call(e,n),i=null):(u=i,i=function(e,t,i){return u.call(Q(e),i)})),i))for(;d>s;s++)i(e[s],r,a?n:n.call(e[s],s,i(e[s],r)));return o?e:u?i.call(e):d?i(e[0],r):l},now:function(){return(new Date).getTime()}}),Q.ready.promise=function(t){if(!M)if(M=Q.Deferred(),"complete"===j.readyState)setTimeout(Q.ready);else if(j.addEventListener)j.addEventListener("DOMContentLoaded",de,!1),e.addEventListener("load",Q.ready,!1);else{j.attachEvent("onreadystatechange",de),e.attachEvent("onload",Q.ready);var i=!1;try{i=null==e.frameElement&&j.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!Q.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}Q.ready()}}()}return M.promise(t)},Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){L["[object "+t+"]"]=t.toLowerCase()}),A=Q(j);var ue={};Q.Callbacks=function(e){var i,r,n,o,l,a,s=[],d=!(e="string"==typeof e?ue[e]||function(e){var t=ue[e]={};return Q.each(e.match(Z)||[],function(e,i){t[i]=!0}),t}(e):Q.extend({},e)).once&&[],u=function(t){for(i=e.memory&&t,r=!0,a=o||0,o=0,l=s.length,n=!0;s&&l>a;a++)if(!1===s[a].apply(t[0],t[1])&&e.stopOnFalse){i=!1;break}n=!1,s&&(d?d.length&&u(d.shift()):i?s=[]:c.disable())},c={add:function(){if(s){var t=s.length;(function t(i){Q.each(i,function(i,r){var n=Q.type(r);"function"===n?e.unique&&c.has(r)||s.push(r):r&&r.length&&"string"!==n&&t(r)})})(arguments),n?l=s.length:i&&(o=t,u(i))}return this},remove:function(){return s&&Q.each(arguments,function(e,t){for(var i;(i=Q.inArray(t,s,i))>-1;)s.splice(i,1),n&&(l>=i&&l--,a>=i&&a--)}),this},has:function(e){return Q.inArray(e,s)>-1},empty:function(){return s=[],this},disable:function(){return s=d=i=t,this},disabled:function(){return!s},lock:function(){return d=t,i||c.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!s||r&&!d||(n?d.push(t):u(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],i="pending",r={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred(function(i){Q.each(t,function(t,o){var l=o[0],a=Q.isFunction(e[t])&&e[t];n[o[1]](function(){var e=a&&a.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[l+"With"](this===r?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Q.extend(e,r):r}},n={};return r.pipe=r.then,Q.each(t,function(e,o){var l=o[2],a=o[3];r[o[1]]=l.add,a&&l.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?r:this,arguments),this},n[o[0]+"With"]=l.fireWith}),r.promise(n),e&&e.call(n,n),n},when:function(e){var t,i,r,n=0,o=q.call(arguments),l=o.length,a=1!==l||e&&Q.isFunction(e.promise)?l:0,s=1===a?e:Q.Deferred(),d=function(e,i,r){return function(n){i[e]=this,r[e]=arguments.length>1?q.call(arguments):n,r===t?s.notifyWith(i,r):--a||s.resolveWith(i,r)}};if(l>1)for(t=Array(l),i=Array(l),r=Array(l);l>n;n++)o[n]&&Q.isFunction(o[n].promise)?o[n].promise().done(d(n,r,o)).fail(s.reject).progress(d(n,i,t)):--a;return a||s.resolveWith(r,o),s.promise()}}),Q.support=function(){var i,r,n,o,l,a,s,d,u,c,h=j.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=h.getElementsByTagName("*"),n=h.getElementsByTagName("a")[0],!r||!n||!r.length)return{};l=(o=j.createElement("select")).appendChild(j.createElement("option")),a=h.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",i={getSetAttribute:"t"!==h.className,leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!j.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==j.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===j.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,i.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,i.optDisabled=!l.disabled;try{delete h.test}catch(e){i.deleteExpando=!1}(a=j.createElement("input")).setAttribute("value",""),i.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),i.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),(s=j.createDocumentFragment()).appendChild(a),i.appendChecked=a.checked,i.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){i.noCloneEvent=!1}),h.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})h.setAttribute(d="on"+c,"t"),i[c+"Bubbles"]=d in e||!1===h.attributes[d].expando;return h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===h.style.backgroundClip,Q(function(){var r,n,o,l="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=j.getElementsByTagName("body")[0];a&&(r=j.createElement("div"),r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(r).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=h.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",i.reliableHiddenOffsets=u&&0===o[0].offsetHeight,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",i.boxSizing=4===h.offsetWidth,i.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(i.pixelPosition="1%"!==(e.getComputedStyle(h,null)||{}).top,i.boxSizingReliable="4px"===(e.getComputedStyle(h,null)||{width:"4px"}).width,n=h.appendChild(j.createElement("div")),n.style.cssText=h.style.cssText=l,n.style.marginRight=n.style.width="0",h.style.width="1px",i.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),h.style.zoom!==t&&(h.innerHTML="",h.style.cssText=l+"width:1px;padding:1px;display:inline;zoom:1",i.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",i.shrinkWrapBlocks=3!==h.offsetWidth,a.style.zoom=1),a.removeChild(r),r=h=o=n=null)}),r=o=s=l=n=a=null,i}();var ce=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,he=/([A-Z])/g;Q.extend({cache:{},expando:"jQuery"+(V+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?Q.cache[e[Q.expando]]:e[Q.expando])&&!l(e)},data:function(e,t,i){return r(e,t,i,!1)},removeData:function(e,t){return n(e,t,!1)},_data:function(e,t,i){return r(e,t,i,!0)},_removeData:function(e,t){return n(e,t,!0)},acceptData:function(e){var t=e.nodeName&&Q.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),Q.fn.extend({data:function(e,i){var r,n,l=this[0],a=0,s=null;if(e===t){if(this.length&&(s=Q.data(l),1===l.nodeType&&!Q._data(l,"parsedAttrs"))){for(r=l.attributes;r.length>a;a++)(n=r[a].name).indexOf("data-")||(n=Q.camelCase(n.substring(5)),o(l,n,s[n]));Q._data(l,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){Q.data(this,e)}):Q.access(this,function(i){return i===t?l?o(l,e,Q.data(l,e)):null:(this.each(function(){Q.data(this,e,i)}),t)},null,i,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.removeData(this,e)})}}),Q.extend({queue:function(e,i,r){var n;return e?(i=(i||"fx")+"queue",n=Q._data(e,i),r&&(!n||Q.isArray(r)?n=Q._data(e,i,Q.makeArray(r)):n.push(r)),n||[]):t},dequeue:function(e,t){t=t||"fx";var i=Q.queue(e,t),r=i.length,n=i.shift(),o=Q._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),r--),o.cur=n,n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,function(){Q.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Q._data(e,i)||Q._data(e,i,{empty:Q.Callbacks("once memory").add(function(){Q._removeData(e,t+"queue"),Q._removeData(e,i)})})}}),Q.fn.extend({queue:function(e,i){var r=2;return"string"!=typeof e&&(i=e,e="fx",r--),r>arguments.length?Q.queue(this[0],e):i===t?this:this.each(function(){var t=Q.queue(this,e,i);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},delay:function(e,t){return e=Q.fx?Q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,e);i.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var r,n=1,o=Q.Deferred(),l=this,a=this.length,s=function(){--n||o.resolveWith(l,[l])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";a--;)(r=Q._data(l[a],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),o.promise(i)}});var pe,ge,fe=/[\t\r\n]/g,ve=/\r/g,me=/^(?:input|select|textarea|button|object)$/i,be=/^(?:a|area)$/i,ye=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,xe=/^(?:checked|selected)$/i,we=Q.support.getSetAttribute,_e=Q.support.input;Q.fn.extend({attr:function(e,t){return Q.access(this,Q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})},prop:function(e,t){return Q.access(this,Q.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Q.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(e){}})},addClass:function(e){var t,i,r,n,o,l=0,a=this.length,s="string"==typeof e&&e;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(Z)||[];a>l;l++)if(i=this[l],r=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(fe," "):" ")){for(o=0;n=t[o++];)0>r.indexOf(" "+n+" ")&&(r+=n+" ");i.className=Q.trim(r)}return this},removeClass:function(e){var t,i,r,n,o,l=0,a=this.length,s=0===arguments.length||"string"==typeof e&&e;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(Z)||[];a>l;l++)if(i=this[l],r=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(fe," "):"")){for(o=0;n=t[o++];)for(;r.indexOf(" "+n+" ")>=0;)r=r.replace(" "+n+" "," ");i.className=e?Q.trim(r):""}return this},toggleClass:function(e,t){var i=typeof e,r="boolean"==typeof t;return Q.isFunction(e)?this.each(function(i){Q(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var n,o=0,l=Q(this),a=t,s=e.match(Z)||[];n=s[o++];)a=r?a:!l.hasClass(n),l[a?"addClass":"removeClass"](n);else("undefined"===i||"boolean"===i)&&(this.className&&Q._data(this,"__className__",this.className),this.className=this.className||!1===e?"":Q._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,r=this.length;r>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(fe," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,r,n,o=this[0];return arguments.length?(n=Q.isFunction(e),this.each(function(r){var o,l=Q(this);1===this.nodeType&&(null==(o=n?e.call(this,r,l.val()):e)?o="":"number"==typeof o?o+="":Q.isArray(o)&&(o=Q.map(o,function(e){return null==e?"":e+""})),(i=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,o,"value")!==t||(this.value=o))})):o?(i=Q.valHooks[o.type]||Q.valHooks[o.nodeName.toLowerCase()])&&"get"in i&&(r=i.get(o,"value"))!==t?r:"string"==typeof(r=o.value)?r.replace(ve,""):null==r?"":r:void 0}}),Q.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,r=e.options,n=e.selectedIndex,o="select-one"===e.type||0>n,l=o?null:[],a=o?n+1:r.length,s=0>n?a:o?n:0;a>s;s++)if(!(!(i=r[s]).selected&&s!==n||(Q.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Q.nodeName(i.parentNode,"optgroup"))){if(t=Q(i).val(),o)return t;l.push(t)}return l},set:function(e,t){var i=Q.makeArray(t);return Q(e).find("option").each(function(){this.selected=Q.inArray(Q(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attr:function(e,i,r){var n,o,l,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return e.getAttribute===t?Q.prop(e,i,r):((l=1!==a||!Q.isXMLDoc(e))&&(i=i.toLowerCase(),o=Q.attrHooks[i]||(ye.test(i)?ge:pe)),r===t?o&&l&&"get"in o&&null!==(n=o.get(e,i))?n:(e.getAttribute!==t&&(n=e.getAttribute(i)),null==n?t:n):null!==r?o&&l&&"set"in o&&(n=o.set(e,r,i))!==t?n:(e.setAttribute(i,r+""),r):(Q.removeAttr(e,i),t))},removeAttr:function(e,t){var i,r,n=0,o=t&&t.match(Z);if(o&&1===e.nodeType)for(;i=o[n++];)r=Q.propFix[i]||i,ye.test(i)?!we&&xe.test(i)?e[Q.camelCase("default-"+i)]=e[r]=!1:e[r]=!1:Q.attr(e,i,""),e.removeAttribute(we?i:r)},attrHooks:{type:{set:function(e,t){if(!Q.support.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,r){var n,o,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return(1!==l||!Q.isXMLDoc(e))&&(i=Q.propFix[i]||i,o=Q.propHooks[i]),r!==t?o&&"set"in o&&(n=o.set(e,r,i))!==t?n:e[i]=r:o&&"get"in o&&null!==(n=o.get(e,i))?n:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):me.test(e.nodeName)||be.test(e.nodeName)&&e.href?0:t}}}}),ge={get:function(e,i){var r=Q.prop(e,i),n="boolean"==typeof r&&e.getAttribute(i),o="boolean"==typeof r?_e&&we?null!=n:xe.test(i)?e[Q.camelCase("default-"+i)]:!!n:e.getAttributeNode(i);return o&&!1!==o.value?i.toLowerCase():t},set:function(e,t,i){return!1===t?Q.removeAttr(e,i):_e&&we||!xe.test(i)?e.setAttribute(!we&&Q.propFix[i]||i,i):e[Q.camelCase("default-"+i)]=e[i]=!0,i}},_e&&we||(Q.attrHooks.value={get:function(e,i){var r=e.getAttributeNode(i);return Q.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,i,r){return Q.nodeName(e,"input")?(e.defaultValue=i,t):pe&&pe.set(e,i,r)}}),we||(pe=Q.valHooks.button={get:function(e,i){var r=e.getAttributeNode(i);return r&&("id"===i||"name"===i||"coords"===i?""!==r.value:r.specified)?r.value:t},set:function(e,i,r){var n=e.getAttributeNode(r);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(r)),n.value=i+="","value"===r||i===e.getAttribute(r)?i:t}},Q.attrHooks.contenteditable={get:pe.get,set:function(e,t,i){pe.set(e,""!==t&&t,i)}},Q.each(["width","height"],function(e,i){Q.attrHooks[i]=Q.extend(Q.attrHooks[i],{set:function(e,r){return""===r?(e.setAttribute(i,"auto"),r):t}})})),Q.support.hrefNormalized||(Q.each(["href","src","width","height"],function(e,i){Q.attrHooks[i]=Q.extend(Q.attrHooks[i],{get:function(e){var r=e.getAttribute(i,2);return null==r?t:r}})}),Q.each(["href","src"],function(e,t){Q.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),Q.support.style||(Q.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),Q.support.optSelected||(Q.propHooks.selected=Q.extend(Q.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Q.support.enctype||(Q.propFix.enctype="encoding"),Q.support.checkOn||Q.each(["radio","checkbox"],function(){Q.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]=Q.extend(Q.valHooks[this],{set:function(e,i){return Q.isArray(i)?e.checked=Q.inArray(Q(e).val(),i)>=0:t}})});var Ce=/^(?:input|select|textarea)$/i,De=/^key/,Te=/^(?:mouse|contextmenu)|click/,ke=/^(?:focusinfocus|focusoutblur)$/,$e=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,i,r,n,o){var l,a,s,d,u,c,h,p,g,f,v,m=3!==e.nodeType&&8!==e.nodeType&&Q._data(e);if(m){for(r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=Q.guid++),(d=m.events)||(d=m.events={}),(a=m.handle)||(a=m.handle=function(e){return Q===t||e&&Q.event.triggered===e.type?t:Q.event.dispatch.apply(a.elem,arguments)},a.elem=e),u=(i=(i||"").match(Z)||[""]).length;u--;)s=$e.exec(i[u])||[],g=v=s[1],f=(s[2]||"").split(".").sort(),h=Q.event.special[g]||{},g=(o?h.delegateType:h.bindType)||g,h=Q.event.special[g]||{},c=Q.extend({type:g,origType:v,data:n,handler:r,guid:r.guid,selector:o,needsContext:o&&Q.expr.match.needsContext.test(o),namespace:f.join(".")},l),(p=d[g])||(p=d[g]=[],p.delegateCount=0,h.setup&&!1!==h.setup.call(e,n,f,a)||(e.addEventListener?e.addEventListener(g,a,!1):e.attachEvent&&e.attachEvent("on"+g,a))),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),o?p.splice(p.delegateCount++,0,c):p.push(c),Q.event.global[g]=!0;e=null}},remove:function(e,t,i,r,n){var o,l,a,s,d,u,c,h,p,g,f,v=Q.hasData(e)&&Q._data(e);if(v&&(s=v.events)){for(d=(t=(t||"").match(Z)||[""]).length;d--;)if(a=$e.exec(t[d])||[],p=f=a[1],g=(a[2]||"").split(".").sort(),p){for(c=Q.event.special[p]||{},h=s[p=(r?c.delegateType:c.bindType)||p]||[],a=a[2]&&RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)u=h[o],!n&&f!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,c.remove&&c.remove.call(e,u));l&&!h.length&&(c.teardown&&!1!==c.teardown.call(e,g,v.handle)||Q.removeEvent(e,p,v.handle),delete s[p])}else for(p in s)Q.event.remove(e,p+t[d],i,r,!0);Q.isEmptyObject(s)&&(delete v.handle,Q._removeData(e,"events"))}},trigger:function(i,r,n,o){var l,a,s,d,u,c,h,p=[n||j],g=i.type||i,f=i.namespace?i.namespace.split("."):[];if(a=s=n=n||j,3!==n.nodeType&&8!==n.nodeType&&!ke.test(g+Q.event.triggered)&&(g.indexOf(".")>=0&&(f=g.split("."),g=f.shift(),f.sort()),u=0>g.indexOf(":")&&"on"+g,i=i[Q.expando]?i:new Q.Event(g,"object"==typeof i&&i),i.isTrigger=!0,i.namespace=f.join("."),i.namespace_re=i.namespace?RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=n),r=null==r?[i]:Q.makeArray(r,[i]),h=Q.event.special[g]||{},o||!h.trigger||!1!==h.trigger.apply(n,r))){if(!o&&!h.noBubble&&!Q.isWindow(n)){for(d=h.delegateType||g,ke.test(d+g)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||j)&&p.push(s.defaultView||s.parentWindow||e)}for(l=0;(a=p[l++])&&!i.isPropagationStopped();)i.type=l>1?d:h.bindType||g,(c=(Q._data(a,"events")||{})[i.type]&&Q._data(a,"handle"))&&c.apply(a,r),(c=u&&a[u])&&Q.acceptData(a)&&c.apply&&!1===c.apply(a,r)&&i.preventDefault();if(i.type=g,!(o||i.isDefaultPrevented()||h._default&&!1!==h._default.apply(n.ownerDocument,r)||"click"===g&&Q.nodeName(n,"a")||!Q.acceptData(n)||!u||!n[g]||Q.isWindow(n))){(s=n[u])&&(n[u]=null),Q.event.triggered=g;try{n[g]()}catch(e){}Q.event.triggered=t,s&&(n[u]=s)}return i.result}},dispatch:function(e){e=Q.event.fix(e);var i,r,n,o,l,a=[],s=q.call(arguments),d=(Q._data(this,"events")||{})[e.type]||[],u=Q.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=Q.event.handlers.call(this,e,d),i=0;(o=a[i++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(l=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(l.namespace))&&(e.handleObj=l,e.data=l.data,(n=((Q.event.special[l.origType]||{}).handle||l.handler).apply(o.elem,s))!==t&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,i){var r,n,o,l,a=[],s=i.delegateCount,d=e.target;if(s&&d.nodeType&&(!e.button||"click"!==e.type))for(;d!=this;d=d.parentNode||this)if(!0!==d.disabled||"click"!==e.type){for(n=[],r=0;s>r;r++)l=i[r],o=l.selector+" ",n[o]===t&&(n[o]=l.needsContext?Q(o,this).index(d)>=0:Q.find(o,this,null,[d]).length),n[o]&&n.push(l);n.length&&a.push({elem:d,handlers:n})}return i.length>s&&a.push({elem:this,handlers:i.slice(s)}),a},fix:function(e){if(e[Q.expando])return e;var t,i,r=e,n=Q.event.fixHooks[e.type]||{},o=n.props?this.props.concat(n.props):this.props;for(e=new Q.Event(r),t=o.length;t--;)i=o[t],e[i]=r[i];return e.target||(e.target=r.srcElement||j),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,n.filter?n.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var r,n,o,l=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(r=e.target.ownerDocument||j,n=r.documentElement,o=r.body,e.pageX=i.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=i.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||l===t||(e.which=1&l?1:2&l?3:4&l?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return Q.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==j.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===j.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,r){var n=Q.extend(new Q.Event,i,{type:e,isSimulated:!0,originalEvent:{}});r?Q.event.trigger(n,null,t):Q.event.dispatch.call(t,n),n.isDefaultPrevented()&&i.preventDefault()}},Q.removeEvent=j.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,i,r){var n="on"+i;e.detachEvent&&(e[n]===t&&(e[n]=null),e.detachEvent(n,r))},Q.Event=function(e,i){return this instanceof Q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,i&&Q.extend(this,i),this.timeStamp=e&&e.timeStamp||Q.now(),this[Q.expando]=!0,t):new Q.Event(e,i)},Q.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=e.relatedTarget,n=e.handleObj;return(!r||r!==this&&!Q.contains(this,r))&&(e.type=n.origType,i=n.handler.apply(this,arguments),e.type=t),i}}}),Q.support.submitBubbles||(Q.event.special.submit={setup:function(){return!Q.nodeName(this,"form")&&(Q.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,r=Q.nodeName(i,"input")||Q.nodeName(i,"button")?i.form:t;r&&!Q._data(r,"submitBubbles")&&(Q.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),Q._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Q.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!Q.nodeName(this,"form")&&(Q.event.remove(this,"._submit"),t)}}),Q.support.changeBubbles||(Q.event.special.change={setup:function(){return Ce.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Q.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Q.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Q.event.simulate("change",this,e,!0)})),!1):(Q.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ce.test(t.nodeName)&&!Q._data(t,"changeBubbles")&&(Q.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||Q.event.simulate("change",this.parentNode,e,!0)}),Q._data(t,"changeBubbles",!0))}),t)},handle:function(e){var i=e.target;return this!==i||e.isSimulated||e.isTrigger||"radio"!==i.type&&"checkbox"!==i.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return Q.event.remove(this,"._change"),!Ce.test(this.nodeName)}}),Q.support.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,r=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){0==i++&&j.addEventListener(e,r,!0)},teardown:function(){0==--i&&j.removeEventListener(e,r,!0)}}}),Q.fn.extend({on:function(e,i,r,n,o){var l,a;if("object"==typeof e){"string"!=typeof i&&(r=r||i,i=t);for(a in e)this.on(a,i,r,e[a],o);return this}if(null==r&&null==n?(n=i,r=i=t):null==n&&("string"==typeof i?(n=r,r=t):(n=r,r=i,i=t)),!1===n)n=s;else if(!n)return this;return 1===o&&(l=n,n=function(e){return Q().off(e),l.apply(this,arguments)},n.guid=l.guid||(l.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,n,r,i)})},one:function(e,t,i,r){return this.on(e,t,i,r,1)},off:function(e,i,r){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,Q(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,i,e[o]);return this}return(!1===i||"function"==typeof i)&&(r=i,i=t),!1===r&&(r=s),this.each(function(){Q.event.remove(this,e,r,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,i){var r=this[0];return r?Q.event.trigger(e,i,r,!0):t},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Q.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)},De.test(t)&&(Q.event.fixHooks[t]=Q.event.keyHooks),Te.test(t)&&(Q.event.fixHooks[t]=Q.event.mouseHooks)}),function(e,t){function i(e){return de.test(e+"")}function r(){var e,t=[];return e=function(i,r){return t.push(i+=" ")>w.cacheLength&&delete e[t.shift()],e[i]=r}}function n(e){return e[M]=!0,e}function o(e){var t=S.createElement("div");try{return e(t)}catch(e){return!1}finally{t=null}}function l(e,t,i,r){var n,o,l,a,s,c,h,p,g,f;if((t?t.ownerDocument||t:j)!==S&&$(t),t=t||S,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(!R&&!r){if(n=ue.exec(e))if(l=n[1]){if(9===a){if(!(o=t.getElementById(l))||!o.parentNode)return i;if(o.id===l)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(l))&&I(t,o)&&o.id===l)return i.push(o),i}else{if(n[2])return X.apply(i,Y.call(t.getElementsByTagName(e),0)),i;if((l=n[3])&&z.getByClassName&&t.getElementsByClassName)return X.apply(i,Y.call(t.getElementsByClassName(l),0)),i}if(z.qsa&&!N.test(e)){if(h=!0,p=M,g=t,f=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=d(e),(h=t.getAttribute("id"))?p=h.replace(pe,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",s=c.length;s--;)c[s]=p+u(c[s]);g=se.test(e)&&t.parentNode||t,f=c.join(",")}if(f)try{return X.apply(i,Y.call(g.querySelectorAll(f),0)),i}catch(e){}finally{h||t.removeAttribute("id")}}}return function(e,t,i,r){var n,o,l,a,s,c=d(e);if(!r&&1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(l=o[0]).type&&9===t.nodeType&&!R&&w.relative[o[1].type]){if(!(t=w.find.ID(l.matches[0].replace(fe,ve),t)[0]))return i;e=e.slice(o.shift().value.length)}for(n=ae.needsContext.test(e)?-1:o.length-1;n>=0&&(l=o[n],!w.relative[a=l.type]);n--)if((s=w.find[a])&&(r=s(l.matches[0].replace(fe,ve),se.test(o[0].type)&&t.parentNode||t))){if(o.splice(n,1),!(e=r.length&&u(o)))return X.apply(i,Y.call(r,0)),i;break}}return D(e,c)(r,t,R,i,se.test(e)),i}(e.replace(ie,"$1"),t,i,r)}function a(e,t){for(var i=e&&t&&e.nextSibling;i;i=i.nextSibling)if(i===t)return-1;return e?1:-1}function s(e){return n(function(t){return t=+t,n(function(i,r){for(var n,o=e([],i.length,t),l=o.length;l--;)i[n=o[l]]&&(i[n]=!(r[n]=i[n]))})})}function d(e,t){var i,r,n,o,a,s,d,u=O[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],d=w.preFilter;a;){(!i||(r=re.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),s.push(n=[])),i=!1,(r=ne.exec(a))&&(i=r.shift(),n.push({value:i,type:r[0].replace(ie," ")}),a=a.slice(i.length));for(o in w.filter)!(r=ae[o].exec(a))||d[o]&&!(r=d[o](r))||(i=r.shift(),n.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return t?a.length:a?l.error(e):O(e,s).slice(0)}function u(e){for(var t=0,i=e.length,r="";i>t;t++)r+=e[t].value;return r}function c(e,t,i){var r=t.dir,n=i&&"parentNode"===t.dir,o=P++;return t.first?function(t,i,o){for(;t=t[r];)if(1===t.nodeType||n)return e(t,i,o)}:function(t,i,l){var a,s,d,u=H+" "+o;if(l){for(;t=t[r];)if((1===t.nodeType||n)&&e(t,i,l))return!0}else for(;t=t[r];)if(1===t.nodeType||n)if(d=t[M]||(t[M]={}),(s=d[r])&&s[0]===u){if(!0===(a=s[1])||a===x)return!0===a}else if(s=d[r]=[u],s[1]=e(t,i,l)||x,!0===s[1])return!0}}function h(e){return e.length>1?function(t,i,r){for(var n=e.length;n--;)if(!e[n](t,i,r))return!1;return!0}:e[0]}function p(e,t,i,r,n){for(var o,l=[],a=0,s=e.length,d=null!=t;s>a;a++)(o=e[a])&&(!i||i(o,r,n))&&(l.push(o),d&&t.push(a));return l}function g(e,t,i,r,o,l){return r&&!r[M]&&(r=g(r)),o&&!o[M]&&(o=g(o,l)),n(function(n,l,a,s){var d,u,c,h=[],g=[],f=l.length,v=n||m(t||"*",a.nodeType?[a]:a,[]),b=!e||!n&&t?v:p(v,h,e,a,s),y=i?o||(n?e:f||r)?[]:l:b;if(i&&i(b,y,a,s),r)for(d=p(y,g),r(d,[],a,s),u=d.length;u--;)(c=d[u])&&(y[g[u]]=!(b[g[u]]=c));if(n){if(o||e){if(o){for(d=[],u=y.length;u--;)(c=y[u])&&d.push(b[u]=c);o(null,y=[],d,s)}for(u=y.length;u--;)(c=y[u])&&(d=o?U.call(n,c):h[u])>-1&&(n[d]=!(l[d]=c))}}else y=p(y===l?y.splice(f,y.length):y),o?o(null,l,y,s):X.apply(l,y)})}function f(e){for(var t,i,r,n=e.length,o=w.relative[e[0].type],l=o||w.relative[" "],a=o?1:0,s=c(function(e){return e===t},l,!0),d=c(function(e){return U.call(t,e)>-1},l,!0),p=[function(e,i,r){return!o&&(r||i!==k)||((t=i).nodeType?s(e,i,r):d(e,i,r))}];n>a;a++)if(i=w.relative[e[a].type])p=[c(h(p),i)];else{if((i=w.filter[e[a].type].apply(null,e[a].matches))[M]){for(r=++a;n>r&&!w.relative[e[r].type];r++);return g(a>1&&h(p),a>1&&u(e.slice(0,a-1)).replace(ie,"$1"),i,r>a&&f(e.slice(a,r)),n>r&&f(e=e.slice(r)),n>r&&u(e))}p.push(i)}return h(p)}function v(e,t){var i=0,r=t.length>0,o=e.length>0,a=function(n,a,s,d,u){var c,h,g,f=[],v=0,m="0",b=n&&[],y=null!=u,_=k,C=n||o&&w.find.TAG("*",u&&a.parentNode||a),D=H+=null==_?1:Math.E;for(y&&(k=a!==S&&a,x=i);null!=(c=C[m]);m++){if(o&&c){for(h=0;g=e[h];h++)if(g(c,a,s)){d.push(c);break}y&&(H=D,x=++i)}r&&((c=!g&&c)&&v--,n&&b.push(c))}if(v+=m,r&&m!==v){for(h=0;g=t[h];h++)g(b,f,a,s);if(n){if(v>0)for(;m--;)b[m]||f[m]||(f[m]=q.call(d));f=p(f)}X.apply(d,f),y&&!n&&f.length>0&&v+t.length>1&&l.uniqueSort(d)}return y&&(H=D,k=_),b};return r?n(a):a}function m(e,t,i){for(var r=0,n=t.length;n>r;r++)l(e,t[r],i);return i}function b(){}var y,x,w,_,C,D,T,k,$,S,B,R,N,E,F,I,A,M="sizzle"+-new Date,j=e.document,z={},H=0,P=0,L=r(),O=r(),V=r(),W=typeof t,G=[],q=G.pop,X=G.push,Y=G.slice,U=G.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},J="[\\x20\\t\\r\\n\\f]",K="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Z=K.replace("w","w#"),ee="\\["+J+"*("+K+")"+J+"*(?:([*^$|!~]?=)"+J+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Z+")|)|)"+J+"*\\]",te=":("+K+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ee.replace(3,8)+")*)|.*)\\)|)",ie=RegExp("^"+J+"+|((?:^|[^\\\\])(?:\\\\.)*)"+J+"+$","g"),re=RegExp("^"+J+"*,"+J+"*"),ne=RegExp("^"+J+"*([\\x20\\t\\r\\n\\f>+~])"+J+"*"),oe=RegExp(te),le=RegExp("^"+Z+"$"),ae={ID:RegExp("^#("+K+")"),CLASS:RegExp("^\\.("+K+")"),NAME:RegExp("^\\[name=['\"]?("+K+")['\"]?\\]"),TAG:RegExp("^("+K.replace("w","w*")+")"),ATTR:RegExp("^"+ee),PSEUDO:RegExp("^"+te),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+J+"*(even|odd|(([+-]|)(\\d*)n|)"+J+"*(?:([+-]|)"+J+"*(\\d+)|))"+J+"*\\)|)","i"),needsContext:RegExp("^"+J+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+J+"*((?:-\\d)?\\d*)"+J+"*\\)|)(?=[^-]|$)","i")},se=/[\x20\t\r\n\f]*[+~]/,de=/\{\s*\[native code\]\s*\}/,ue=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ce=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,pe=/'|\\/g,ge=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,fe=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ve=function(e,t){var i="0x"+t-65536;return i!=i?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{Y.call(B.childNodes,0)[0].nodeType}catch(e){Y=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}C=l.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},$=l.setDocument=function(e){var r=e?e.ownerDocument||e:j;return r!==S&&9===r.nodeType&&r.documentElement?(S=r,B=r.documentElement,R=C(r),z.tagNameNoComments=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),z.attributes=o(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),z.getByClassName=o(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),z.getByName=o(function(e){e.id=M+0,e.innerHTML="<a name='"+M+"'></a><div name='"+M+"'></div>",B.insertBefore(e,B.firstChild);var t=r.getElementsByName&&r.getElementsByName(M).length===2+r.getElementsByName(M+0).length;return z.getIdNotName=!r.getElementById(M),B.removeChild(e),t}),w.attrHandle=o(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==W&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},z.getIdNotName?(w.find.ID=function(e,t){if(typeof t.getElementById!==W&&!R){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(e){var t=e.replace(fe,ve);return function(e){return e.getAttribute("id")===t}}):(w.find.ID=function(e,i){if(typeof i.getElementById!==W&&!R){var r=i.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==W&&r.getAttributeNode("id").value===e?[r]:t:[]}},w.filter.ID=function(e){var t=e.replace(fe,ve);return function(e){var i=typeof e.getAttributeNode!==W&&e.getAttributeNode("id");return i&&i.value===t}}),w.find.TAG=z.tagNameNoComments?function(e,i){return typeof i.getElementsByTagName!==W?i.getElementsByTagName(e):t}:function(e,t){var i,r=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[n];n++)1===i.nodeType&&r.push(i);return r}return o},w.find.NAME=z.getByName&&function(e,i){return typeof i.getElementsByName!==W?i.getElementsByName(name):t},w.find.CLASS=z.getByClassName&&function(e,i){return typeof i.getElementsByClassName===W||R?t:i.getElementsByClassName(e)},E=[],N=[":focus"],(z.qsa=i(r.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||N.push("\\["+J+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||N.push(":checked")}),o(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&N.push("[*^$]="+J+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(z.matchesSelector=i(F=B.matchesSelector||B.mozMatchesSelector||B.webkitMatchesSelector||B.oMatchesSelector||B.msMatchesSelector))&&o(function(e){z.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),E.push("!=",te)}),N=RegExp(N.join("|")),E=RegExp(E.join("|")),I=i(B.contains)||B.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=B.compareDocumentPosition?function(e,t){var i;return e===t?(T=!0,0):(i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&i||e.parentNode&&11===e.parentNode.nodeType?e===r||I(j,e)?-1:t===r||I(j,t)?1:0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var i,n=0,o=e.parentNode,l=t.parentNode,s=[e],d=[t];if(e===t)return T=!0,0;if(e.sourceIndex&&t.sourceIndex)return(~t.sourceIndex||1<<31)-(I(j,e)&&~e.sourceIndex||1<<31);if(!o||!l)return e===r?-1:t===r?1:o?-1:l?1:0;if(o===l)return a(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)d.unshift(i);for(;s[n]===d[n];)n++;return n?a(s[n],d[n]):s[n]===j?-1:d[n]===j?1:0},T=!1,[0,0].sort(A),z.detectDuplicates=T,S):S},l.matches=function(e,t){return l(e,null,null,t)},l.matchesSelector=function(e,t){if((e.ownerDocument||e)!==S&&$(e),t=t.replace(ge,"='$1']"),!(!z.matchesSelector||R||E&&E.test(t)||N.test(t)))try{var i=F.call(e,t);if(i||z.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return l(t,S,null,[e]).length>0},l.contains=function(e,t){return(e.ownerDocument||e)!==S&&$(e),I(e,t)},l.attr=function(e,t){var i;return(e.ownerDocument||e)!==S&&$(e),R||(t=t.toLowerCase()),(i=w.attrHandle[t])?i(e):R||z.attributes?e.getAttribute(t):((i=e.getAttributeNode(t))||e.getAttribute(t))&&!0===e[t]?t:i&&i.specified?i.value:null},l.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},l.uniqueSort=function(e){var t,i=[],r=1,n=0;if(T=!z.detectDuplicates,e.sort(A),T){for(;t=e[r];r++)t===e[r-1]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return e},_=l.getText=function(e){var t,i="",r=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=_(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[r];r++)i+=_(t);return i},w=l.selectors={cacheLength:50,createPseudo:n,match:ae,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(fe,ve),e[3]=(e[4]||e[5]||"").replace(fe,ve),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||l.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&l.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return ae.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:i&&oe.test(i)&&(t=d(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(fe,ve).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=L[e+" "];return t||(t=RegExp("(^|"+J+")"+e+"("+J+"|$)"))&&L(e,function(e){return t.test(e.className||typeof e.getAttribute!==W&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(r){var n=l.attr(r,e);return null==n?"!="===t:!t||(n+="","="===t?n===i:"!="===t?n!==i:"^="===t?i&&0===n.indexOf(i):"*="===t?i&&n.indexOf(i)>-1:"$="===t?i&&n.substr(n.length-i.length)===i:"~="===t?(" "+n+" ").indexOf(i)>-1:"|="===t&&(n===i||n.substr(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,r,n){var o="nth"!==e.slice(0,3),l="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===n?function(e){return!!e.parentNode}:function(t,i,s){var d,u,c,h,p,g,f=o!==l?"nextSibling":"previousSibling",v=t.parentNode,m=a&&t.nodeName.toLowerCase(),b=!s&&!a;if(v){if(o){for(;f;){for(c=t;c=c[f];)if(a?c.nodeName.toLowerCase()===m:1===c.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[l?v.firstChild:v.lastChild],l&&b){for(p=(d=(u=v[M]||(v[M]={}))[e]||[])[0]===H&&d[1],h=d[0]===H&&d[2],c=p&&v.childNodes[p];c=++p&&c&&c[f]||(h=p=0)||g.pop();)if(1===c.nodeType&&++h&&c===t){u[e]=[H,p,h];break}}else if(b&&(d=(t[M]||(t[M]={}))[e])&&d[0]===H)h=d[1];else for(;(c=++p&&c&&c[f]||(h=p=0)||g.pop())&&((a?c.nodeName.toLowerCase()!==m:1!==c.nodeType)||!++h||(b&&((c[M]||(c[M]={}))[e]=[H,h]),c!==t)););return(h-=n)===r||0==h%r&&h/r>=0}}},PSEUDO:function(e,t){var i,r=w.pseudos[e]||w.setFilters[e.toLowerCase()]||l.error("unsupported pseudo: "+e);return r[M]?r(t):r.length>1?(i=[e,e,"",t],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,i){for(var n,o=r(e,t),l=o.length;l--;)n=U.call(e,o[l]),e[n]=!(i[n]=o[l])}):function(e){return r(e,0,i)}):r}},pseudos:{not:n(function(e){var t=[],i=[],r=D(e.replace(ie,"$1"));return r[M]?n(function(e,t,i,n){for(var o,l=r(e,null,n,[]),a=e.length;a--;)(o=l[a])&&(e[a]=!(t[a]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),!i.pop()}}),has:n(function(e){return function(t){return l(e,t).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}}),lang:n(function(e){return le.test(e||"")||l.error("unsupported lang: "+e),e=e.replace(fe,ve).toLowerCase(),function(t){var i;do{if(i=R?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===B},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return ce.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,i){return[0>i?i+t:i]}),even:s(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:s(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:s(function(e,t,i){for(var r=0>i?i+t:i;--r>=0;)e.push(r);return e}),gt:s(function(e,t,i){for(var r=0>i?i+t:i;t>++r;)e.push(r);return e})}};for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})w.pseudos[y]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(y);D=l.compile=function(e,t){var i,r=[],n=[],o=V[e+" "];if(!o){for(t||(t=d(e)),i=t.length;i--;)(o=f(t[i]))[M]?r.push(o):n.push(o);o=V(e,v(n,r))}return o},w.pseudos.nth=w.pseudos.eq,w.filters=b.prototype=w.pseudos,w.setFilters=new b,$(),l.attr=Q.attr,Q.find=l,Q.expr=l.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=l.uniqueSort,Q.text=l.getText,Q.isXMLDoc=l.isXML,Q.contains=l.contains}(e);var Se=/Until$/,Be=/^(?:parents|prev(?:Until|All))/,Re=/^.[^:#\[\.,]*$/,Ne=Q.expr.match.needsContext,Ee={children:!0,contents:!0,next:!0,prev:!0};Q.fn.extend({find:function(e){var t,i,r;if("string"!=typeof e)return r=this,this.pushStack(Q(e).filter(function(){for(t=0;r.length>t;t++)if(Q.contains(r[t],this))return!0}));for(i=[],t=0;this.length>t;t++)Q.find(e,this[t],i);return i=this.pushStack(Q.unique(i)),i.selector=(this.selector?this.selector+" ":"")+e,i},has:function(e){var t,i=Q(e,this),r=i.length;return this.filter(function(){for(t=0;r>t;t++)if(Q.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(u(this,e,!1))},filter:function(e){return this.pushStack(u(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?Ne.test(e)?Q(e,this.context).index(this[0])>=0:Q.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,r=0,n=this.length,o=[],l=Ne.test(e)||"string"!=typeof e?Q(e,t||this.context):0;n>r;r++)for(i=this[r];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(l?l.index(i)>-1:Q.find.matchesSelector(i,e)){o.push(i);break}i=i.parentNode}return this.pushStack(o.length>1?Q.unique(o):o)},index:function(e){return e?"string"==typeof e?Q.inArray(this[0],Q(e)):Q.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?Q(e,t):Q.makeArray(e&&e.nodeType?[e]:e),r=Q.merge(this.get(),i);return this.pushStack(Q.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.fn.andSelf=Q.fn.addBack,Q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,i){return Q.dir(e,"parentNode",i)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,i){return Q.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return Q.dir(e,"previousSibling",i)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return Q.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Q.merge([],e.childNodes)}},function(e,t){Q.fn[e]=function(i,r){var n=Q.map(this,t,i);return Se.test(e)||(r=i),r&&"string"==typeof r&&(n=Q.filter(r,n)),n=this.length>1&&!Ee[e]?Q.unique(n):n,this.length>1&&Be.test(e)&&(n=n.reverse()),this.pushStack(n)}}),Q.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?Q.find.matchesSelector(t[0],e)?[t[0]]:[]:Q.find.matches(e,t)},dir:function(e,i,r){for(var n=[],o=e[i];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!Q(o).is(r));)1===o.nodeType&&n.push(o),o=o[i];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ie=/ jQuery\d+="(?:null|\d+)"/g,Ae=RegExp("<(?:"+Fe+")[\\s/>]","i"),Me=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,He=/<tbody/i,Pe=/<|&#?\w+;/,Le=/<(?:script|style|link)/i,Oe=/^(?:checkbox|radio)$/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^$|\/(?:java|ecma)script/i,Ge=/^true\/(.*)/,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:Q.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ye=c(j).appendChild(j.createElement("div"));Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td,Q.fn.extend({text:function(e){return Q.access(this,function(e){return e===t?Q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||j).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Q.isFunction(e))return this.each(function(t){Q(this).wrapAll(e.call(this,t))});if(this[0]){var t=Q(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Q.isFunction(e)?this.each(function(t){Q(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Q(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=Q.isFunction(e);return this.each(function(i){Q(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,r=0;null!=(i=this[r]);r++)(!e||Q.filter(e,[i]).length>0)&&(t||1!==i.nodeType||Q.cleanData(v(i)),i.parentNode&&(t&&Q.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&Q.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&Q.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return Q.access(this,function(e){var i=this[0]||{},r=0,n=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Ie,""):t;if(!("string"!=typeof e||Le.test(e)||!Q.support.htmlSerialize&&Ae.test(e)||!Q.support.leadingWhitespace&&Me.test(e)||Xe[(ze.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(je,"<$1></$2>");try{for(;n>r;r++)1===(i=this[r]||{}).nodeType&&(Q.cleanData(v(i,!1)),i.innerHTML=e);i=0}catch(e){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return Q.isFunction(e)||"string"==typeof e||(e=Q(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,i=this.parentNode;(i&&1===this.nodeType||11===this.nodeType)&&(Q(this).remove(),t?t.parentNode.insertBefore(e,t):i.appendChild(e))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,r){e=W.apply([],e);var n,o,l,a,s,d,u=0,c=this.length,g=this,f=c-1,m=e[0],b=Q.isFunction(m);if(b||!(1>=c||"string"!=typeof m||Q.support.checkClone)&&Ve.test(m))return this.each(function(n){var o=g.eq(n);b&&(e[0]=m.call(this,n,i?o.html():t)),o.domManip(e,i,r)});if(c&&(n=Q.buildFragment(e,this[0].ownerDocument,!1,this),o=n.firstChild,1===n.childNodes.length&&(n=o),o)){for(i=i&&Q.nodeName(o,"tr"),a=(l=Q.map(v(n,"script"),h)).length;c>u;u++)s=n,u!==f&&(s=Q.clone(s,!0,!0),a&&Q.merge(l,v(s,"script"))),r.call(i&&Q.nodeName(this[u],"table")?function(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}(this[u],"tbody"):this[u],s,u);if(a)for(d=l[l.length-1].ownerDocument,Q.map(l,p),u=0;a>u;u++)s=l[u],We.test(s.type||"")&&!Q._data(s,"globalEval")&&Q.contains(d,s)&&(s.src?Q.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):Q.globalEval((s.text||s.textContent||s.innerHTML||"").replace(qe,"")));n=o=null}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Q.fn[e]=function(e){for(var i,r=0,n=[],o=Q(e),l=o.length-1;l>=r;r++)i=r===l?this:this.clone(!0),Q(o[r])[t](i),G.apply(n,i.get());return this.pushStack(n)}}),Q.extend({clone:function(e,t,i){var r,n,o,l,a,s=Q.contains(e.ownerDocument,e);if(Q.support.html5Clone||Q.isXMLDoc(e)||!Ae.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Ye.innerHTML=e.outerHTML,Ye.removeChild(a=Ye.firstChild)),!(Q.support.noCloneEvent&&Q.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(r=v(a),n=v(e),l=0;null!=(o=n[l]);++l)r[l]&&function(e,t){var i,r,n;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!Q.support.noCloneEvent&&t[Q.expando]){r=Q._data(t);for(n in r.events)Q.removeEvent(t,n,r.handle);t.removeAttribute(Q.expando)}"script"===i&&t.text!==e.text?(h(t).text=e.text,p(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),Q.support.html5Clone&&e.innerHTML&&!Q.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Oe.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}(o,r[l]);if(t)if(i)for(n=n||v(e),r=r||v(a),l=0;null!=(o=n[l]);l++)f(o,r[l]);else f(e,a);return(r=v(a,"script")).length>0&&g(r,!s&&v(e,"script")),r=n=o=null,a},buildFragment:function(e,t,i,r){for(var n,o,l,a,s,d,u,h=e.length,p=c(t),f=[],m=0;h>m;m++)if((o=e[m])||0===o)if("object"===Q.type(o))Q.merge(f,o.nodeType?[o]:o);else if(Pe.test(o)){for(a=a||p.appendChild(t.createElement("div")),l=(ze.exec(o)||["",""])[1].toLowerCase(),s=Xe[l]||Xe._default,a.innerHTML=s[1]+o.replace(je,"<$1></$2>")+s[2],u=s[0];u--;)a=a.lastChild;if(!Q.support.leadingWhitespace&&Me.test(o)&&f.push(t.createTextNode(Me.exec(o)[0])),!Q.support.tbody)for(o="table"!==l||He.test(o)?"<table>"!==s[1]||He.test(o)?0:a:a.firstChild,u=o&&o.childNodes.length;u--;)Q.nodeName(d=o.childNodes[u],"tbody")&&!d.childNodes.length&&o.removeChild(d);for(Q.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else f.push(t.createTextNode(o));for(a&&p.removeChild(a),Q.support.appendChecked||Q.grep(v(f,"input"),function(e){Oe.test(e.type)&&(e.defaultChecked=e.checked)}),m=0;o=f[m++];)if((!r||-1===Q.inArray(o,r))&&(n=Q.contains(o.ownerDocument,o),a=v(p.appendChild(o),"script"),n&&g(a),i))for(u=0;o=a[u++];)We.test(o.type||"")&&i.push(o);return a=null,p},cleanData:function(e,i){for(var r,n,o,l,a=0,s=Q.expando,d=Q.cache,u=Q.support.deleteExpando,c=Q.event.special;null!=(o=e[a]);a++)if((i||Q.acceptData(o))&&(n=o[s],r=n&&d[n])){if(r.events)for(l in r.events)c[l]?Q.event.remove(o,l):Q.removeEvent(o,l,r.handle);d[n]&&(delete d[n],u?delete o[s]:o.removeAttribute!==t?o.removeAttribute(s):o[s]=null,O.push(n))}}});var Ue,Je,Qe,Ke=/alpha\([^)]*\)/i,Ze=/opacity\s*=\s*([^)]*)/,et=/^(top|right|bottom|left)$/,tt=/^(none|table(?!-c[ea]).+)/,it=/^margin/,rt=RegExp("^("+K+")(.*)$","i"),nt=RegExp("^("+K+")(?!px)[a-z%]+$","i"),ot=RegExp("^([+-])=("+K+")","i"),lt={BODY:"block"},at={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:0,fontWeight:400},dt=["Top","Right","Bottom","Left"],ut=["Webkit","O","Moz","ms"];Q.fn.extend({css:function(e,i){return Q.access(this,function(e,i,r){var n,o,l={},a=0;if(Q.isArray(i)){for(n=Je(e),o=i.length;o>a;a++)l[i[a]]=Q.css(e,i[a],!1,n);return l}return r!==t?Q.style(e,i,r):Q.css(e,i)},e,i,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:b(this))?Q(this).show():Q(this).hide()})}}),Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ue(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:Q.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,l,a,s=Q.camelCase(i),d=e.style;if(i=Q.cssProps[s]||(Q.cssProps[s]=m(d,s)),a=Q.cssHooks[i]||Q.cssHooks[s],r===t)return a&&"get"in a&&(o=a.get(e,!1,n))!==t?o:d[i];if("string"===(l=typeof r)&&(o=ot.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(Q.css(e,i)),l="number"),!(null==r||"number"===l&&isNaN(r)||("number"!==l||Q.cssNumber[s]||(r+="px"),Q.support.clearCloneStyle||""!==r||0!==i.indexOf("background")||(d[i]="inherit"),a&&"set"in a&&(r=a.set(e,r,n))===t)))try{d[i]=r}catch(e){}}},css:function(e,i,r,n){var o,l,a,s=Q.camelCase(i);return i=Q.cssProps[s]||(Q.cssProps[s]=m(e.style,s)),(a=Q.cssHooks[i]||Q.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,r)),o===t&&(o=Ue(e,i,n)),"normal"===o&&i in st&&(o=st[i]),r?(l=parseFloat(o),!0===r||Q.isNumeric(l)?l||0:o):o},swap:function(e,t,i,r){var n,o,l={};for(o in t)l[o]=e.style[o],e.style[o]=t[o];n=i.apply(e,r||[]);for(o in t)e.style[o]=l[o];return n}}),e.getComputedStyle?(Je=function(t){return e.getComputedStyle(t,null)},Ue=function(e,i,r){var n,o,l,a=r||Je(e),s=a?a.getPropertyValue(i)||a[i]:t,d=e.style;return a&&(""!==s||Q.contains(e.ownerDocument,e)||(s=Q.style(e,i)),nt.test(s)&&it.test(i)&&(n=d.width,o=d.minWidth,l=d.maxWidth,d.minWidth=d.maxWidth=d.width=s,s=a.width,d.width=n,d.minWidth=o,d.maxWidth=l)),s}):j.documentElement.currentStyle&&(Je=function(e){return e.currentStyle},Ue=function(e,i,r){var n,o,l,a=r||Je(e),s=a?a[i]:t,d=e.style;return null==s&&d&&d[i]&&(s=d[i]),nt.test(s)&&!et.test(i)&&(n=d.left,o=e.runtimeStyle,(l=o&&o.left)&&(o.left=e.currentStyle.left),d.left="fontSize"===i?"1em":s,s=d.pixelLeft+"px",d.left=n,l&&(o.left=l)),""===s?"auto":s}),Q.each(["height","width"],function(e,i){Q.cssHooks[i]={get:function(e,r,n){return r?0===e.offsetWidth&&tt.test(Q.css(e,"display"))?Q.swap(e,at,function(){return _(e,i,n)}):_(e,i,n):t},set:function(e,t,r){var n=r&&Je(e);return x(0,t,r?w(e,i,r,Q.support.boxSizing&&"border-box"===Q.css(e,"boxSizing",!1,n),n):0)}}}),Q.support.opacity||(Q.cssHooks.opacity={get:function(e,t){return Ze.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,r=e.currentStyle,n=Q.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===Q.trim(o.replace(Ke,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||r&&!r.filter)||(i.filter=Ke.test(o)?o.replace(Ke,n):o+" "+n)}}),Q(function(){Q.support.reliableMarginRight||(Q.cssHooks.marginRight={get:function(e,i){return i?Q.swap(e,{display:"inline-block"},Ue,[e,"marginRight"]):t}}),!Q.support.pixelPosition&&Q.fn.position&&Q.each(["top","left"],function(e,i){Q.cssHooks[i]={get:function(e,r){return r?(r=Ue(e,i),nt.test(r)?Q(e).position()[i]+"px":r):t}}})}),Q.expr&&Q.expr.filters&&(Q.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!Q.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||Q.css(e,"display"))},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)}),Q.each({margin:"",padding:"",border:"Width"},function(e,t){Q.cssHooks[e+t]={expand:function(i){for(var r=0,n={},o="string"==typeof i?i.split(" "):[i];4>r;r++)n[e+dt[r]+t]=o[r]||o[r-2]||o[0];return n}},it.test(e)||(Q.cssHooks[e+t].set=x)});var ct=/%20/g,ht=/\[\]$/,pt=/\r?\n/g,gt=/^(?:submit|button|image|reset)$/i,ft=/^(?:input|select|textarea|keygen)/i;Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&ft.test(this.nodeName)&&!gt.test(e)&&(this.checked||!Oe.test(e))}).map(function(e,t){var i=Q(this).val();return null==i?null:Q.isArray(i)?Q.map(i,function(e){return{name:t.name,value:e.replace(pt,"\r\n")}}):{name:t.name,value:i.replace(pt,"\r\n")}}).get()}}),Q.param=function(e,i){var r,n=[],o=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){o(this.name,this.value)});else for(r in e)T(r,e[r],i,o);return n.join("&").replace(ct,"+")};var vt,mt,bt=Q.now(),yt=/\?/,xt=/#.*$/,wt=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ct=/^(?:GET|HEAD)$/,Dt=/^\/\//,Tt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kt=Q.fn.load,$t={},St={},Bt="*/".concat("*");try{mt=z.href}catch(e){(mt=j.createElement("a")).href="",mt=mt.href}vt=Tt.exec(mt.toLowerCase())||[],Q.fn.load=function(e,i,r){if("string"!=typeof e&&kt)return kt.apply(this,arguments);var n,o,l,a=this,s=e.indexOf(" ");return s>=0&&(n=e.slice(s,e.length),e=e.slice(0,s)),Q.isFunction(i)?(r=i,i=t):i&&"object"==typeof i&&(o="POST"),a.length>0&&Q.ajax({url:e,type:o,dataType:"html",data:i}).done(function(e){l=arguments,a.html(n?Q("<div>").append(Q.parseHTML(e)).find(n):e)}).complete(r&&function(e,t){a.each(r,l||[e.responseText,t,e])}),this},Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q.each(["get","post"],function(e,i){Q[i]=function(e,r,n,o){return Q.isFunction(r)&&(o=o||n,n=r,r=t),Q.ajax({url:e,type:i,dataType:o,data:r,success:n})}}),Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?S(S(e,Q.ajaxSettings),t):S(Q.ajaxSettings,e)},ajaxPrefilter:k($t),ajaxTransport:k(St),ajax:function(e,i){function r(e,i,r,a){var d,c,b,y,w,C=i;2!==x&&(x=2,s&&clearTimeout(s),n=t,l=a||"",_.readyState=e>0?4:0,r&&(y=function(e,i,r){var n,o,l,a,s=e.contents,d=e.dataTypes,u=e.responseFields;for(o in u)o in r&&(i[u[o]]=r[o]);for(;"*"===d[0];)d.shift(),n===t&&(n=e.mimeType||i.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){d.unshift(o);break}if(d[0]in r)l=d[0];else{for(o in r){if(!d[0]||e.converters[o+" "+d[0]]){l=o;break}a||(a=o)}l=l||a}return l?(l!==d[0]&&d.unshift(l),r[l]):t}(h,_,r)),e>=200&&300>e||304===e?(h.ifModified&&((w=_.getResponseHeader("Last-Modified"))&&(Q.lastModified[o]=w),(w=_.getResponseHeader("etag"))&&(Q.etag[o]=w)),304===e?(d=!0,C="notmodified"):(d=function(e,t){var i,r,n,o,l={},a=0,s=e.dataTypes.slice(),d=s[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(;n=s[++a];)if("*"!==n){if("*"!==d&&d!==n){if(!(i=l[d+" "+n]||l["* "+n]))for(r in l)if((o=r.split(" "))[1]===n&&(i=l[d+" "+o[0]]||l["* "+o[0]])){!0===i?i=l[r]:!0!==l[r]&&(n=o[0],s.splice(a--,0,n));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+d+" to "+n}}}d=n}return{state:"success",data:t}}(h,y),C=d.state,c=d.data,b=d.error,d=!b)):(b=C,(e||!C)&&(C="error",0>e&&(e=0))),_.status=e,_.statusText=(i||C)+"",d?f.resolveWith(p,[c,C,_]):f.rejectWith(p,[_,C,b]),_.statusCode(m),m=t,u&&g.trigger(d?"ajaxSuccess":"ajaxError",[_,h,d?c:b]),v.fireWith(p,[_,C]),u&&(g.trigger("ajaxComplete",[_,h]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var n,o,l,a,s,d,u,c,h=Q.ajaxSetup({},i),p=h.context||h,g=h.context&&(p.nodeType||p.jquery)?Q(p):Q.event,f=Q.Deferred(),v=Q.Callbacks("once memory"),m=h.statusCode||{},b={},y={},x=0,w="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!a)for(a={};t=_t.exec(l);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?l:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return x||(e=y[i]=y[i]||e,b[e]=t),this},overrideMimeType:function(e){return x||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||w;return n&&n.abort(t),r(0,t),this}};if(f.promise(_).complete=v.add,_.success=_.done,_.error=_.fail,h.url=((e||h.url||mt)+"").replace(xt,"").replace(Dt,vt[1]+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=Q.trim(h.dataType||"*").toLowerCase().match(Z)||[""],null==h.crossDomain&&(d=Tt.exec(h.url.toLowerCase()),h.crossDomain=!(!d||d[1]===vt[1]&&d[2]===vt[2]&&(d[3]||("http:"===d[1]?80:443))==(vt[3]||("http:"===vt[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Q.param(h.data,h.traditional)),$($t,h,i,_),2===x)return _;(u=h.global)&&0==Q.active++&&Q.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ct.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(yt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=wt.test(o)?o.replace(wt,"$1_="+bt++):o+(yt.test(o)?"&":"?")+"_="+bt++)),h.ifModified&&(Q.lastModified[o]&&_.setRequestHeader("If-Modified-Since",Q.lastModified[o]),Q.etag[o]&&_.setRequestHeader("If-None-Match",Q.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||i.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Bt+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)_.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(!1===h.beforeSend.call(p,_,h)||2===x))return _.abort();w="abort";for(c in{success:1,error:1,complete:1})_[c](h[c]);if(n=$(St,h,i,_)){_.readyState=1,u&&g.trigger("ajaxSend",[_,h]),h.async&&h.timeout>0&&(s=setTimeout(function(){_.abort("timeout")},h.timeout));try{x=1,n.send(b,r)}catch(e){if(!(2>x))throw e;r(-1,e)}}else r(-1,"No Transport");return _},getScript:function(e,i){return Q.get(e,t,i,"script")},getJSON:function(e,t,i){return Q.get(e,t,i,"json")}}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Q.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=j.head||Q("head")[0]||j.documentElement;return{send:function(t,n){(i=j.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var Rt=[],Nt=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rt.pop()||Q.expando+"_"+bt++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(i,r,n){var o,l,a,s=!1!==i.jsonp&&(Nt.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nt.test(i.data)&&"data");return s||"jsonp"===i.dataTypes[0]?(o=i.jsonpCallback=Q.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,s?i[s]=i[s].replace(Nt,"$1"+o):!1!==i.jsonp&&(i.url+=(yt.test(i.url)?"&":"?")+i.jsonp+"="+o),i.converters["script json"]=function(){return a||Q.error(o+" was not called"),a[0]},i.dataTypes[0]="json",l=e[o],e[o]=function(){a=arguments},n.always(function(){e[o]=l,i[o]&&(i.jsonpCallback=r.jsonpCallback,Rt.push(o)),a&&Q.isFunction(l)&&l(a[0]),a=l=t}),"script"):t});var Et,Ft,It=0,At=e.ActiveXObject&&function(){var e;for(e in Et)Et[e](t,!0)};Q.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&B()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:B,Ft=Q.ajaxSettings.xhr(),Q.support.cors=!!Ft&&"withCredentials"in Ft,(Ft=Q.support.ajax=!!Ft)&&Q.ajaxTransport(function(i){if(!i.crossDomain||Q.support.cors){var r;return{send:function(n,o){var l,a,s=i.xhr();if(i.username?s.open(i.type,i.url,i.async,i.username,i.password):s.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)s[a]=i.xhrFields[a];i.mimeType&&s.overrideMimeType&&s.overrideMimeType(i.mimeType),i.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");try{for(a in n)s.setRequestHeader(a,n[a])}catch(e){}s.send(i.hasContent&&i.data||null),r=function(e,n){var a,d,u,c,h;try{if(r&&(n||4===s.readyState))if(r=t,l&&(s.onreadystatechange=Q.noop,At&&delete Et[l]),n)4!==s.readyState&&s.abort();else{c={},a=s.status,h=s.responseXML,u=s.getAllResponseHeaders(),h&&h.documentElement&&(c.xml=h),"string"==typeof s.responseText&&(c.text=s.responseText);try{d=s.statusText}catch(e){d=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=c.text?200:404}}catch(e){n||o(-1,e)}c&&o(a,d,c,u)},i.async?4===s.readyState?setTimeout(r):(l=++It,At&&(Et||(Et={},Q(e).unload(At)),Et[l]=r),s.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Mt,jt,zt=/^(?:toggle|show|hide)$/,Ht=RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i"),Pt=/queueHooks$/,Lt=[function(e,t,i){var r,n,o,l,a,s,d,u,c,h=this,p=e.style,g={},f=[],v=e.nodeType&&b(e);i.queue||(null==(u=Q._queueHooks(e,"fx")).unqueued&&(u.unqueued=0,c=u.empty.fire,u.empty.fire=function(){u.unqueued||c()}),u.unqueued++,h.always(function(){h.always(function(){u.unqueued--,Q.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===Q.css(e,"display")&&"none"===Q.css(e,"float")&&(Q.support.inlineBlockNeedsLayout&&"inline"!==C(e.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",Q.support.shrinkWrapBlocks||h.done(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(r in t)if(o=t[r],zt.exec(o)){if(delete t[r],s=s||"toggle"===o,o===(v?"hide":"show"))continue;f.push(r)}if(l=f.length){"hidden"in(a=Q._data(e,"fxshow")||Q._data(e,"fxshow",{}))&&(v=a.hidden),s&&(a.hidden=!v),v?Q(e).show():h.done(function(){Q(e).hide()}),h.done(function(){var t;Q._removeData(e,"fxshow");for(t in g)Q.style(e,t,g[t])});for(r=0;l>r;r++)n=f[r],d=h.createTween(n,v?a[n]:0),g[n]=a[n]||Q.style(e,n),n in a||(a[n]=d.start,v&&(d.end=d.start,d.start="width"===n||"height"===n?1:0))}}],Ot={"*":[function(e,t){var i,r,n=this.createTween(e,t),o=Ht.exec(t),l=n.cur(),a=+l||0,s=1,d=20;if(o){if(i=+o[2],"px"!==(r=o[3]||(Q.cssNumber[e]?"":"px"))&&a){a=Q.css(n.elem,e,!0)||i||1;do{s=s||".5",a/=s,Q.style(n.elem,e,a+r)}while(s!==(s=n.cur()/l)&&1!==s&&--d)}n.unit=r,n.start=a,n.end=o[1]?a+(o[1]+1)*i:i}return n}]};Q.Animation=Q.extend(N,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,r=0,n=e.length;n>r;r++)i=e[r],Ot[i]=Ot[i]||[],Ot[i].unshift(t)},prefilter:function(e,t){t?Lt.unshift(e):Lt.push(e)}}),Q.Tween=E,(E.prototype={constructor:E,init:function(e,t,i,r,n,o){this.elem=e,this.prop=i,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Q.cssNumber[i]?"":"px")},cur:function(){var e=E.propHooks[this.prop];return e&&e.get?e.get(this):E.propHooks._default.get(this)},run:function(e){var t,i=E.propHooks[this.prop];return this.pos=t=this.options.duration?Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}}).init.prototype=E.prototype,(E.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,"auto"))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}}).scrollTop=E.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.each(["toggle","show","hide"],function(e,t){var i=Q.fn[t];Q.fn[t]=function(e,r,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(F(t,!0),e,r,n)}}),Q.fn.extend({fadeTo:function(e,t,i,r){return this.filter(b).css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,r){var n=Q.isEmptyObject(e),o=Q.speed(t,i,r),l=function(){var t=N(this,Q.extend({},e),o);l.finish=function(){t.stop(!0)},(n||Q._data(this,"finish"))&&t.stop(!0)};return l.finish=l,n||!1===o.queue?this.each(l):this.queue(o.queue,l)},stop:function(e,i,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=i,i=e,e=t),i&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Q.timers,l=Q._data(this);if(i)l[i]&&l[i].stop&&n(l[i]);else for(i in l)l[i]&&l[i].stop&&Pt.test(i)&&n(l[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));(t||!r)&&Q.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Q._data(this),r=i[e+"queue"],n=i[e+"queueHooks"],o=Q.timers,l=r?r.length:0;for(i.finish=!0,Q.queue(this,e,[]),n&&n.cur&&n.cur.finish&&n.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;l>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete i.finish})}}),Q.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Q.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}}),Q.speed=function(e,t,i){var r=e&&"object"==typeof e?Q.extend({},e):{complete:i||!i&&t||Q.isFunction(e)&&e,duration:e,easing:i&&t||t&&!Q.isFunction(t)&&t};return r.duration=Q.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Q.fx.speeds?Q.fx.speeds[r.duration]:Q.fx.speeds._default,(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Q.isFunction(r.old)&&r.old.call(this),r.queue&&Q.dequeue(this,r.queue)},r},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.timers=[],Q.fx=E.prototype.init,Q.fx.tick=function(){var e,i=Q.timers,r=0;for(Mt=Q.now();i.length>r;r++)(e=i[r])()||i[r]!==e||i.splice(r--,1);i.length||Q.fx.stop(),Mt=t},Q.fx.timer=function(e){e()&&Q.timers.push(e)&&Q.fx.start()},Q.fx.interval=13,Q.fx.start=function(){jt||(jt=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(jt),jt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fx.step={},Q.expr&&Q.expr.filters&&(Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length}),Q.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var i,r,n={top:0,left:0},o=this[0],l=o&&o.ownerDocument;return l?(i=l.documentElement,Q.contains(i,o)?(o.getBoundingClientRect!==t&&(n=o.getBoundingClientRect()),r=I(l),{top:n.top+(r.pageYOffset||i.scrollTop)-(i.clientTop||0),left:n.left+(r.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):n):void 0},Q.offset={setOffset:function(e,t,i){var r=Q.css(e,"position");"static"===r&&(e.style.position="relative");var n,o,l=Q(e),a=l.offset(),s=Q.css(e,"top"),d=Q.css(e,"left"),u={},c={};("absolute"===r||"fixed"===r)&&Q.inArray("auto",[s,d])>-1?(c=l.position(),n=c.top,o=c.left):(n=parseFloat(s)||0,o=parseFloat(d)||0),Q.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(u.top=t.top-a.top+n),null!=t.left&&(u.left=t.left-a.left+o),"using"in t?t.using.call(e,u):l.css(u)}},Q.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},r=this[0];return"fixed"===Q.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Q.nodeName(e[0],"html")||(i=e.offset()),i.top+=Q.css(e[0],"borderTopWidth",!0),i.left+=Q.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Q.css(r,"marginTop",!0),left:t.left-i.left-Q.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||j.documentElement;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||j.documentElement})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var r=/Y/.test(i);Q.fn[e]=function(n){return Q.access(this,function(e,n,o){var l=I(e);return o===t?l?i in l?l[i]:l.document.documentElement[n]:e[n]:(l?l.scrollTo(r?Q(l).scrollLeft():o,r?o:Q(l).scrollTop()):e[n]=o,t)},e,n,arguments.length,null)}}),Q.each({Height:"height",Width:"width"},function(e,i){Q.each({padding:"inner"+e,content:i,"":"outer"+e},function(r,n){Q.fn[n]=function(n,o){var l=arguments.length&&(r||"boolean"!=typeof n),a=r||(!0===n||!0===o?"margin":"border");return Q.access(this,function(i,r,n){var o;return Q.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(o=i.documentElement,Math.max(i.body["scroll"+e],o["scroll"+e],i.body["offset"+e],o["offset"+e],o["client"+e])):n===t?Q.css(i,r,a):Q.style(i,r,n,a)},i,l?n:t,l,null)}})}),e.jQuery=e.$=Q,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Q})}(window),function($){if(Function.prototype.ligerExtend=function(e,t){if("function"!=typeof e)return this;this.base=e.prototype,this.base.constructor=e;var i=function(){};i.prototype=e.prototype,this.prototype=new i,this.prototype.constructor=this,t&&$.extend(this.prototype,t)},Function.prototype.ligerDefer=function(e,t,i){var r=this;return setTimeout(function(){r.apply(e,i||[])},t)},window.liger=$.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"liger",attrPrev:"data",getId:function(e){var t=(e=e||this.managerIdPrev)+(1e3+this.managerCount);return this.managerCount++,t},add:function(e){if(2==arguments.length){var t=arguments[1];return t.id=t.id||t.options.id||arguments[0].id,void this.addManager(t)}e.id||(e.id=this.getId(e.__idPrev())),this.managers[e.id]=e},remove:function(e){if("string"==typeof e||"number"==typeof e)delete liger.managers[e];else if("object"==typeof e)if(e instanceof liger.core.Component)delete liger.managers[e.id];else{if(!$(e).attr(this.idAttrName))return!1;delete liger.managers[$(e).attr(this.idAttrName)]}},get:function(e,t){if(t=t||"ligeruiid","string"==typeof e||"number"==typeof e)return liger.managers[e];if("object"==typeof e){var i=e.length?e[0]:e,r=i[t]||$(i).attr(t);return r?liger.managers[r]:null}return null},find:function(e){var t=[];for(var i in this.managers){var r=this.managers[i];e instanceof Function?r instanceof e&&t.push(r):e instanceof Array?-1!=$.inArray(r.__getType(),e)&&t.push(r):r.__getType()==e&&t.push(r)}return t},run:function(e,t,i){if(e){if(i=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),e=e.replace(/^ligerGet/,""),e=e.replace(/^liger/,""),null==this||this==window||i.isStatic)return liger.plugins[e]||(liger.plugins[e]={fn:$[liger.pluginPrev+e],isStatic:!0}),new $.ligerui[i.controlNamespace][e]($.extend({},$[i.defaultsNamespace][e]||{},$[i.defaultsNamespace][e+"String"]||{},t.length>0?t[0]:{}));if(liger.plugins[e]||(liger.plugins[e]={fn:$.fn[liger.pluginPrev+e],isStatic:!1}),/Manager$/.test(e))return liger.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var r=liger.get(this[i.idAttrName]||$(this).attr(i.idAttrName));r&&t.length>0&&r.set(t[0])}else if(!(t.length>=1&&"string"==typeof t[0])){var n=t.length>0?t[0]:null,o=$.extend({},$[i.defaultsNamespace][e],$[i.defaultsNamespace][e+"String"],n);i.propertyToElemnt&&(o[i.propertyToElemnt]=this),i.hasElement?new $.ligerui[i.controlNamespace][e](this,o):new $.ligerui[i.controlNamespace][e](o)}}),0==this.length)return null;if(0==t.length)return liger.get(this,i.idAttrName);if("object"==typeof t[0])return liger.get(this,i.idAttrName);if("string"==typeof t[0]){var r=liger.get(this,i.idAttrName);if(null==r)return;if("option"!=t[0]){var n=t[0];if(!r[n])return;var o=Array.apply(null,t);return o.shift(),r[n].apply(r,o)}if(2==t.length)return r.get(t[1]);if(t.length>=3)return r.set(t[1],t[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},liger.defaults=$.ligerDefaults,liger.methods=$.ligerMethos,$.fn.liger=function(e){return e?liger.run.call(this,e,arguments):liger.get(this)},liger.core.Component=function(e){this.events=this.events||{},this.options=e||{},this.children={}},$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(e,t,i){if(e)if("object"!=typeof e){var r=e;if(0!=r.indexOf("on")){if(this.options||(this.options={}),0!=this.trigger("propertychange",[e,t])){this.options[r]=t;var n="_set"+r.substr(0,1).toUpperCase()+r.substr(1);this[n]&&this[n].call(this,t,i),this.trigger("propertychanged",[e,t])}}else"function"==typeof t&&this.bind(r.substr(2),t)}else{var o;if(this.options!=e?($.extend(this.options,e),o=e):o=$.extend({},e),void 0==t||1==t)for(var l in o)0==l.indexOf("on")&&this.set(l,o[l]);if(void 0==t||0==t)for(var l in o)0!=l.indexOf("on")&&this.set(l,o[l],i)}},get:function(e){var t="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return this[t]?this[t].call(this,e):this.options[e]},hasBind:function(e){var t=e.toLowerCase(),i=this.events[t];return!(!i||!i.length)},trigger:function(e,t){if(e){var i=e.toLowerCase(),r=this.events[i];if(r){(t=t||[])instanceof Array==0&&(t=[t]);for(var n=0;n<r.length;n++){var o=r[n];if(0==o.handler.apply(o.context,t))return!1}}}},bind:function(e,t,i){if("object"!=typeof e){if("function"!=typeof t)return!1;var r=e.toLowerCase(),n=this.events[r]||[];i=i||this,n.push({handler:t,context:i}),this.events[r]=n}else for(var o in e)this.bind(o,e[o])},unbind:function(e,t){if(e){var i=e.toLowerCase(),r=this.events[i];if(r&&r.length)if(t){for(var n=0,o=r.length;n<o;n++)if(r[n].handler==t){r.splice(n,1);break}}else delete this.events[i]}else this.events={}},destroy:function(){liger.remove(this)}}),liger.core.UIComponent=function(e,t){liger.core.UIComponent.base.constructor.call(this,t);var i=this._extendMethods();i&&$.extend(this,i),this.element=e,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(e,t){var i={};if(!e||-1!=e.indexOf("."))return i;var r=liger.defaults[e];if(!r)return i;for(var n in r)if(t.attr(liger.attrPrev+"-"+n)){var o=t.attr(liger.attrPrev+"-"+n);"boolean"==typeof r[n]?i[n]="true"==o||"1"==o:i[n]=o}return i}if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||liger.getId(this.__idPrev()):this.id=this.options.id||liger.getId(this.__idPrev()),liger.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("ligerui"))try{var attroptions=$(this.element).attr("ligerui");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},_setCls:function(e){this.element&&e&&$(this.element).addClass(e)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,liger.remove(this)}}),liger.controls.Input=function(e,t){liger.controls.Input.base.constructor.call(this,e,t)},liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(e){return this.set("value",e)},getValue:function(){return this.get("value")},_setReadonly:function(e){var t=this.wrapper||this.text;if(t&&t.hasClass("l-text")){var i=this.inputText;e?(i&&i.attr("readonly","readonly"),t.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),t.removeClass("l-text-readonly"))}},setReadonly:function(e){return this.set("readonly",e)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(e,t){this.set({width:e,height:t+2})}}),liger.win={top:!1,mask:function(e){function t(){if(liger.win.windowMask){var e=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(e)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",t),$(window).bind("scroll",t)),this.windowMask.show(),t(),this.masking=!0},unmask:function(e){for(var t=$("body > .l-dialog:visible,body > .l-window:visible"),i=0,r=t.length;i<r;i++){var n=t.eq(i).attr("ligeruiid");if(!e||e.id!=n){var o=liger.get(n);if(o){if(o.get("modal"))return}}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var e=this;e.taskbar.animate({bottom:-32},function(){e.taskbar.remove(),e.taskbar=null})},activeTask:function(e){for(var t in this.tasks){var i=this.tasks[t];t==e.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(e){if(this.taskbar)return this.tasks[e.id]?this.tasks[e.id]:null},addTask:function(e){var t=this;if(t.taskbar||t.createTaskbar(),t.tasks[e.id])return t.tasks[e.id];var i=e.get("title"),r=t.tasks[e.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return t.taskbar.tasks.append(r),t.activeTask(e),r.bind("click",function(){t.activeTask(e),e.actived?e.min():e.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),r},hasTask:function(){for(var e in this.tasks)if(this.tasks[e])return!0;return!1},removeTask:function(e){this.taskbar&&(this.tasks[e.id]&&(this.tasks[e.id].unbind(),this.tasks[e.id].remove(),delete this.tasks[e.id]),this.hasTask()||this.removeTaskbar())},setFront:function(e){var t=liger.find(liger.core.Win);for(var i in t){var r=t[i];r==e?($(r.element).css("z-index","9200"),this.activeTask(r)):$(r.element).css("z-index","9100")}}},liger.core.Win=function(e,t){liger.core.Win.base.constructor.call(this,e,t)},liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),liger.draggable={dragging:!1},liger.resizable={reszing:!1},liger.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(e){var t=function(e){return e<10?"0"+e:e},i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=function(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};if(null===e)return"null";var n=typeof e;if("undefined"!==n){if("string"===n)return r(e);if("number"===n||"boolean"===n)return""+e;if("object"===n){if("function"==typeof e.toJSON)return liger.toJSON(e.toJSON());if(e.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null;var o=[];if(e.constructor===Array){for(var l=0,a=e.length;l<a;l++)o.push(liger.toJSON(e[l])||"null");return"["+o.join(",")+"]"}var s,d;for(var u in e){if("number"==(n=typeof u))s='"'+u+'"';else{if("string"!==n)continue;s=r(u)}"function"!==(n=typeof e[u])&&"undefined"!==n&&(d=liger.toJSON(e[u]),o.push(s+":"+d))}return"{"+o.join(",")+"}"}}},liger.getEditor=function(e){var t=e.type,i=e.control,r=e.master;if(!t)return null;var n=0;i&&(i=i.substr(0,1).toUpperCase()+i.substr(1));var o={create:function(o,l,a){var s=l.field||l.column,d=a||{},u=!!l.column,c=$.extend({},e.options),h="text";-1!=$.inArray(t,["password","file","checkbox","radio"])&&(h=t),e.password&&(h="password");var p=$("<input type='"+h+"'/>");if(e.body&&(p=e.body.clone()),p.appendTo(o),l.field){var g=s.name,f=$.isFunction(d.prefixID)?d.prefixID(r):d.prefixID||"";if(c.id=s.id||f+s.name,-1!=$.inArray(t,["select","combobox","autocomplete","popup"])&&(g=s.textField||s.comboboxName,s.comboboxName&&!s.id&&(c.id=(d.prefixID||"")+s.comboboxName)),-1!=$.inArray(t,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(c.valueFieldID=f+s.name),!e.body){var v=f+g,m=(new Date).getTime()+"_"+ ++n+"_"+s.name;p.attr($.extend({id:m,name:v},s.attr)),s.cssClass&&p.addClass(s.cssClass),s.validate&&!r.options.unSetValidateAttr&&p.attr("validate",liger.toJSON(s.validate))}$.extend(c,s.options)}if(s.dictionary&&(s.editor=s.editor||{},!s.editor.data)){var b=[],y=s.dictionary.split("|");$(y).each(function(e,t){var i=t.split(","),r=i[0],n=i.length>=2?i[1]:i[0];b.push({id:r,value:r,text:n})}),s.editor.data=b}if(s.editor){s.editor.options&&($.extend(c,s.editor.options),delete s.editor.options),s.editor.valueColumnName&&(c.valueField=s.editor.valueColumnName,delete s.editor.valueColumnName),s.editor.displayColumnName&&(c.textField=s.editor.displayColumnName,delete s.editor.displayColumnName);var x=s.editor.p||s.editor.ext;x&&(x="function"==typeof x?x(l):x,$.extend(c,x),delete s.editor.p,delete s.editor.ext),$.extend(c,s.editor)}u?(c.host_grid=this,c.host_grid_row=l.record,c.host_grid_column=l.column):(c.host_form=this,(s.readonly||c.host_form.get("readonly"))&&(c.readonly=!0));var w=p["liger"+i](c);return u&&setTimeout(function(){p.focus()},100),w},getValue:function(e,t){var i=t.field||t.column;if(e.getValue){var r=e.getValue(),n=t.column?t.column.editor.type:t.field.type;if(i&&i.editor&&i.editor.isArrayValue&&r&&(r=r.split(";")),i&&i.editor&&i.editor.isRef&&e.getText&&(r=[r,e.getText()]),i&&i.editor&&i.editor.isRefMul&&e.getText){var o=r.split(";"),l=e.getText().split(";");r=[];for(var a=0;a<o.length;a++)r.push([o[a],l[a]])}return"int"==n||"digits"==n?r=r?parseInt(r,10):0:"float"!=n&&"number"!=n||(r=r?parseFloat(r):0),r}},setValue:function(e,t,i){var r=i.field||i.column;if(e.setValue){if(r&&r.editor&&r.editor.isArrayValue&&t&&(t=t.join(";")),r&&r.editor&&r.editor.isRef&&$.isArray(t)&&(t=t[0]),r&&r.editor&&r.editor.isRefMul&&$.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(t[o].length>1?t[o][1]:t[o][0]);t=n.join(";")}e.setValue(t)}},getText:function(e,t){t.field||t.column;if(e.getText){var i=e.getText();if(i)return i}},setText:function(e,t,i){if(t&&e.setText)e.setText(t);else{var r=i.field||i.column;if(t=e.setValue()||i.value||"",r&&r.editor&&r.editor.isRef&&$.isArray(t)&&t.length>1&&(t=t[1]),r&&r.editor&&r.editor.isRefMul&&$.isArray(t)&&t.length>1){for(var n=[],o=0;o<t.length;o++)n.push(t[1]);t=n.join(";")}e.setText&&e.setText(t)}},getSelected:function(e,t){if(e.getSelected)return e.getSelected()},resize:function(e,t,i,r){r.field&&(t-=2),e.resize&&e.resize(t,i)},setEnabled:function(e,t){t?e.setEnabled&&e.setEnabled():e.setDisabled&&e.setDisabled()},destroy:function(e,t){e.destroy&&e.destroy()}};return $.extend({},o,liger.editorCreatorDefaults||{},e)},liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(editor,value,editParm){"string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),editor.setValue(value)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},radiolist:{control:"RadioList",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},listbox:{control:"ListBox",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}},liger.editors.string=liger.editors.text,liger.editors.select=liger.editors.combobox,liger.editors.int=liger.editors.digits,liger.editors.float=liger.editors.number,liger.editors.chk=liger.editors.checkbox,liger.editors.popupedit=liger.editors.popup,$.fn.live=$.fn.on?$.fn.on:$.fn.live,!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery),function($){function removeArrItem(e,t){for(var i=e.length-1;i>=0;i--)t(e[i])&&e.splice(i,1)}var l=$.ligerui;$.fn.ligerGrid=function(e){return $.ligerui.run.call(this,"ligerGrid",arguments)},$.fn.ligerGetGridManager=function(){return $.ligerui.run.call(this,"ligerGetGridManager",arguments)},$.ligerDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!1,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!0,mouseoverRowCssClass:"l-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:28,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:3,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null},$.ligerDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"显示从{from}到{to}，总 {total} 条 。每页显示：{pagesize}",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",applyMessage:"应用",draggingMessage:"{count}行"},$.ligerDefaults.Grid_columns={id:null,name:null,totalSummary:null,display:null,headerRender:null,isAllowHide:!0,isSort:!1,type:null,columns:null,width:120,minWidth:80,format:null,align:"left",hide:!1,editor:null,render:null,textField:null},$.ligerDefaults.Grid_editor={type:null,ext:null,onChange:null,onChanged:null},$.ligerMethos.Grid=$.ligerMethos.Grid||{},$.ligerDefaults.Grid.sorters=$.ligerDefaults.Grid.sorters||{},$.ligerDefaults.Grid.formatters=$.ligerDefaults.Grid.formatters||{},$.ligerDefaults.Grid.editors=$.ligerDefaults.Grid.editors||{},$.ligerDefaults.Grid.sorters.date=function(e,t){return e<t?-1:e>t?1:0},$.ligerDefaults.Grid.sorters.int=function(e,t){return parseInt(e)<parseInt(t)?-1:parseInt(e)>parseInt(t)?1:0},$.ligerDefaults.Grid.sorters.float=function(e,t){return parseFloat(e)<parseFloat(t)?-1:parseFloat(e)>parseFloat(t)?1:0},$.ligerDefaults.Grid.sorters.string=function(e,t){return!!e&&e.localeCompare(t)},$.ligerDefaults.Grid.formatters.date=function(value,column){function getFormatDate(e,t){this.options;if(isNaN(e))return null;var i=t,r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return i}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.ligerDefaults.Grid.formatters.ref=function(e){return $.isArray(e)?e.length>1?e[1]:e[0]:e},$.ligerui.controls.Grid=function(e,t){$.ligerui.controls.Grid.base.constructor.call(this,e,t)},$.ligerui.controls.Grid.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return $.ligerMethos.Grid},_init:function(){$.ligerui.controls.Grid.base._init.call(this);var e=this,t=this.options;t.dataType=t.url?"server":"local","local"==t.dataType&&(t.data=t.data||[],t.dataAction="local"),0==t.isScroll&&(t.height="auto"),t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1),t.detailToEdit&&(t.enabledEdit=!0,t.clickToEdit=!1,t.detail={height:"auto",onShowDetail:function(i,r,n){function o(){$(r).parent().parent().remove(),e.collapseDetail(i)}$(r).addClass("l-grid-detailpanel-edit"),e.beginEdit(i,function(e,i){var n=$("<div class='l-editbox'></div>");return n.width(120).height(t.rowHeight+1),n.appendTo(r),n}),$("<div class='l-clear'></div>").appendTo(r),$("<div class='l-button'>"+t.saveMessage+"</div>").appendTo(r).click(function(){e.endEdit(i),o()}),$("<div class='l-button'>"+t.applyMessage+"</div>").appendTo(r).click(function(){e.submitEdit(i)}),$("<div class='l-button'>"+t.cancelMessage+"</div>").appendTo(r).click(function(){e.cancelEdit(i),o()})}}),t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(e){return t.tree.childrenName in e},t.tree.isExtend=t.tree.isExtend||function(e){return!("isextend"in e&&0==e.isextend)});for(var i in liger.editors){var r=liger.editors[i];!r||i in t.editors||(t.editors[i]=liger.getEditor($.extend({type:i,master:e},r)))}},_render:function(){var e=this,t=this.options;e.grid=$(e.element),e.grid.addClass("l-panel");var i=[];if(i.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>"),i.push("                    <div class='l-grid-loading'></div>"),i.push("        <div class='l-panel-topbar' style='display:none'><div class='l-panel-topbarinner'></div></div><div class='l-clear'></div>"),i.push("        <div class='l-panel-bwarp'>"),i.push("            <div class='l-panel-body'>"),i.push("                <div class='l-grid'>"),i.push("                    <div class='l-grid-dragging-line'></div>"),i.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                  <div class='l-grid1'>"),i.push("                      <div class='l-grid-header l-grid-header1'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body1'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                  <div class='l-grid2'>"),i.push("                      <div class='l-grid-header l-grid-header2'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body2 l-scroll'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                 </div>"),i.push("              </div>"),i.push("         </div>"),i.push("         <div class='l-panel-bar'>"),i.push("            <div class='l-panel-bbar-inner'>"),i.push("                <div class='l-bar-group  l-bar-message'><span class='l-bar-text'></span></div>"),i.push("            <div class='l-bar-group l-bar-selectpagesize'></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnload'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-clear'></div>"),i.push("            </div>"),i.push("         </div>"),e.grid.html(i.join("")),e.header=$(".l-panel-header:first",e.grid),e.body=$(".l-panel-body:first",e.grid),e.toolbar=$(".l-panel-bar:first",e.grid),e.popup=$(".l-grid-popup:first",e.grid),e.gridloading=$(".l-grid-loading:first",e.grid),e.draggingline=$(".l-grid-dragging-line",e.grid),e.topbar=$(".l-panel-topbarinner:first",e.grid),e.gridview=$(".l-grid:first",e.grid),e.gridview.attr("id",e.id+"grid"),e.gridview1=$(".l-grid1:first",e.gridview),e.gridview2=$(".l-grid2:first",e.gridview),e.gridheader=$(".l-grid-header:first",e.gridview2),e.gridbody=$(".l-grid-body:first",e.gridview2),t.autoFilter){var r={text:"高级查询",gridid:e.id,click:function(){e.showFilter()},icon:"search2"};t.toolbar&&t.toolbar.items?t.toolbar.items.push(r):t.toolbar={items:[r]}}e.f={},e.f.gridheader=$(".l-grid-header:first",e.gridview1),e.f.gridbody=$(".l-grid-body:first",e.gridview1),e.currentData=null,e.changedCells={},e.editors={},e.editor={editing:!1},e.cacheData={},"auto"==t.height&&e.bind("SysGridHeightChanged",function(){e.enabledFrozen()&&e.gridview.height(Math.max(e.gridview1.height(),e.gridview2.height()))});var n=$.extend({},t);this._bulid(),this._setColumns(t.columns),delete n.columns,delete n.data,delete n.url,e.set(n),t.delayLoad||(t.url?e.set({url:t.url}):t.data&&e.set({data:t.data}))},_setFrozen:function(e){e?this.grid.addClass("l-frozen"):this.grid.removeClass("l-frozen")},_setCssClass:function(e){this.grid.addClass(e)},_setLoadingMessage:function(e){this.gridloading.html(e)},_setToolbar:function(e){var t=this,i=this.options;if(e&&$.fn.ligerToolBar){if(t.topbar.parent().show(),t.toolbarManager=t.topbar.ligerToolBar(e),e.title){var r=$("<div class='l-panel-topbartitle'><span>"+e.title+"</span></div>");e.icon&&(r.append("<img class='l-panel-topbaricon' src='"+e.icon+"'></img>"),r.addClass("l-panel-topbartitle-hasicon")),t.topbar.parent().append(r)}i.toolbarShowInLeft&&t.topbar.addClass("l-panel-topbarinner-left")}else t.topbar.parent().remove()},isHorizontalScrollShowed:function(){var e=this.gridbody.find(".l-grid-body-inner:first");return!!e.length&&this.gridbody.width()-20<e.width()},_setHeight:function(e){var t=this,i=this.options;if(t.unbind("SysGridHeightChanged"),"auto"!=e){if((e=t._calculateGridBodyHeight(e))>0){if(t.gridbody.height(e),i.frozen){var r=t.gridbody.width(),n=$(":first-child",t.gridbody).width();n&&n+18>r?e>18&&t.f.gridbody.height(e-18):t.f.gridbody.height(e)}var o=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1;t.gridview.height(e+o)}t._updateHorizontalScrollStatus.ligerDefer(t,10)}else t.bind("SysGridHeightChanged",function(){t.enabledFrozen()&&t.gridview.height(Math.max(t.gridview1.height(),t.gridview2.height()))})},_calculateGridBodyHeight:function(e){var t=this,i=this.options;"string"==typeof e&&e.indexOf("%")>0&&(e=i.inWindow?$(window).height()*parseInt(e)*.01:t.grid.parent().height()*parseInt(e)*.01),i.title&&(e-=24),(i.usePager&&i.pagerRender||!i.scrollToPage)&&(e-=t.toolbar.outerHeight()),i.totalRender&&(e-=25),i.toolbar&&(e-=t.topbar.outerHeight());return e-=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1||0},_updateHorizontalScrollStatus:function(){var e=this;this.options;e.isHorizontalScrollShowed()?e.gridview.addClass("l-grid-hashorizontal"):e.gridview.removeClass("l-grid-hashorizontal")},_updateFrozenWidth:function(){var e=this;this.options;if(e.enabledFrozen()){e.gridview1.width(e.f.gridtablewidth);var t=e.gridview.width()-e.f.gridtablewidth;e.gridview2.css({left:e.f.gridtablewidth}),t>0&&e.gridview2.css({width:t})}},_setWidth:function(e){this.options;this.enabledFrozen()&&this._onResize()},_setUrl:function(e){this.options.url=e,e?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(e){var t=this.get("parms");t||(t={}),t instanceof Array?removeArrItem(t,function(t){return t.name==e}):delete t[e],this.set("parms",t)},setParm:function(e,t){var i=this.get("parms");i||(i={}),i instanceof Array?(removeArrItem(i,function(t){return t.name==e}),i.push({name:e,value:t})):i[e]=t,this.set("parms",i)},_setData:function(e){this.loadData(this.options.data),this.trigger("afterSetData")},loadData:function(e,t){var i=this,r=this.options;i.loading=!0,i.trigger("loadData");var n=null,o=!0;"function"==typeof e?(n=e,i.lastData?i.data=i.lastData:(i.data=i.currentData,i.data||(i.data={}),i.data[r.root]||(i.data[r.root]=[]),i.lastData=i.data),o=!1):"boolean"==typeof e?o=e:"object"==typeof e&&e?(o=!1,r.dataType="local",r.data=e):"number"==typeof e&&(r.newPage=e),r.newPage||(r.newPage=1),"server"==r.dataAction&&(r.sortOrder||(r.sortOrder="asc"));var l=[];if(r.parms){var a=$.isFunction(r.parms)?r.parms():r.parms;if(a.length){$(a).each(function(){l.push({name:this.name,value:this.value})});for(var s=a.length-1;s>=0;s--)a[s].temp&&a.splice(s,1)}else if("object"==typeof a)for(var d in a)l.push({name:d,value:a[d]})}"server"==r.dataAction&&(r.usePager&&(l.push({name:r.pageParmName,value:r.newPage}),l.push({name:r.pagesizeParmName,value:r.pageSize})),r.sortName&&(l.push({name:r.sortnameParmName,value:r.sortName}),l.push({name:r.sortorderParmName,value:r.sortOrder}))),$(".l-bar-btnload span",i.toolbar).addClass("l-disabled"),"local"==r.dataType?(i.filteredData=$.extend(!0,{},r.data||i.currentData),n&&(i.filteredData[r.root]=i._searchData(i.filteredData[r.root],n)),r.usePager?i.currentData=i._getCurrentPageData(i.filteredData):i.currentData=i.filteredData,i._convertTreeData(),i._showData()):"local"!=r.dataAction||o?i.loadServerData(l,n,t):i.data&&i.data[r.root]&&(i.filteredData=i.data,n&&(i.filteredData[r.root]=i._searchData(i.filteredData[r.root],n)),i.currentData=i._getCurrentPageData(i.filteredData),i._convertTreeData(),i._showData()),i.loading=!1},_convertTreeData:function(){var e=this,t=this.options;t.tree&&t.tree.idField&&t.tree.parentIDField&&(e.currentData[t.root]=e.arrayToTree(e.currentData[t.root],t.tree.idField,t.tree.parentIDField),e.currentData[t.record]=e.currentData[t.root].length)},loadServerData:function(e,t,i){var r=this,n=this.options,o=n.url;$.isFunction(o)&&(o=o.call(r));var l=$.isFunction(n.urlParms)?n.urlParms.call(r):n.urlParms;if(l)for(name in l)o+=-1==o.indexOf("?")?"?":"&",o+=name+"="+l[name];var a={type:n.method,url:o,data:e,async:n.async,dataType:"json",beforeSend:function(){r.hasBind("loading")?r.trigger("loading"):r.toggleLoading(!0)},success:function(e){if(r.trigger("success",[e,r]),!e||!e[n.root]||!e[n.root].length)return r.currentData=r.data={},r.currentData[n.root]=r.data[n.root]=[],e&&e[n.record]?r.currentData[n.record]=r.data[n.record]=e[n.record]:r.currentData[n.record]=r.data[n.record]=0,r._convertTreeData(),void r._showData(i);r.data=e,null!=r.data[n.record]&&(r.cacheData.records=r.data[n.record]),"server"==n.dataAction?(r.currentData=r.data,null==r.currentData[n.record]&&r.cacheData.records&&(r.currentData[n.record]=r.cacheData.records)):(r.filteredData=r.data,t&&(r.filteredData[n.root]=r._searchData(r.filteredData[n.root],t)),n.usePager?r.currentData=r._getCurrentPageData(r.filteredData):r.currentData=r.filteredData),r._convertTreeData(),r._showData.ligerDefer(r,10,[i])},complete:function(){r.trigger("complete",[r]),r.hasBind("loaded")?r.trigger("loaded",[r]):r.toggleLoading.ligerDefer(r,10,[!1])},error:function(e,t,i){r.currentData=r.data={},r.currentData[n.root]=r.data[n.root]=[],r.currentData[n.record]=r.data[n.record]=0,r.toggleLoading.ligerDefer(r,10,[!1]),$(".l-bar-btnload span",r.toolbar).removeClass("l-disabled"),r.trigger("error",[e,t,i])}};n.contentType&&(a.contentType=n.contentType),"application/json"==n.contentType&&"string"!=typeof parms&&(a.data=function(e){if(!e)return"null";var t=e,i={};if($.isArray(t))for(var r=0;r<t.length;r++)i[t[r].name]=t[r].value;else i=t;return liger.toJSON(i)}(e)),$.ajax(a)},toggleLoading:function(e){this.gridloading[e?"show":"hide"]()},_createEditor:function(e,t,i,r,n){var o=e.create.call(this,t,i);return e.setValue&&e.setValue.call(this,o,i.value,i),i.column.editor&&i.column.editor.initSelect&&(o.element&&$(o.element).is(":text")&&$(o.element).select(),o instanceof jQuery&&(o.is(":text")?o.select():o.find(":text").select())),e.setText&&i.column.textField&&e.setText.call(this,o,i.text,i),e.resize&&e.resize.call(this,o,r,n,i),o},beginEdit:function(e,t){var i=this,r=this.options;if(r.enabledEdit){var n=i.getRow(e);if(!n._editing&&0!=i.trigger("beginEdit",{record:n,rowindex:n.__index})){i.editors[n.__id]={},n._editing=!0,i.reRender({rowdata:n}),t=t||function(e,t){var r=i.getCellObj(e,t),n=$(r).html("");return i.setCellEditing(e,t,!0),n};for(var o=0,l=i.columns.length;o<l;o++){var a=i.columns[o];if(a.name&&a.editor&&a.editor.type&&r.editors[a.editor.type]){var s=r.editors[a.editor.type],d={record:n,value:i._getValueByName(n,a.name),column:a,rowindex:n.__index,grid:i},u=t(n,a),c=u.width(),h=u.height(),p=i._createEditor(s,u,d,c,h);i.editors[n.__id][a.__id]={editor:s,input:p,editParm:d,container:u}}}i.trigger("afterBeginEdit",{record:n,rowindex:n.__index})}}},cancelEdit:function(e){var t=this;if(void 0==e)for(var i in t.editors)t.cancelEdit(i);else{var r=t.getRow(e);if(!t.editors[r.__id])return;if(0==t.trigger("beforeCancelEdit",{record:r,rowindex:r.__index}))return;for(var n in t.editors[r.__id]){var o=t.editors[r.__id][n];o.editor.destroy&&o.editor.destroy(o.input,o.editParm)}delete t.editors[r.__id],delete r._editing,t.reRender({rowdata:r})}},addEditRow:function(e,t){this.submitEdit(),e=this.add(e),this.beginEdit(e,t)},submitEdit:function(e){var t=this;this.options;if(void 0==e)for(var i in t.editors)t.submitEdit(i);else{var r=t.getRow(e),n={};if(!r||!t.editors[r.__id])return;for(var o in t.editors[r.__id]){var l=t.editors[r.__id][o],a=l.editParm.column;a.name&&(n[a.name]=l.editor.getValue(l.input,l.editParm)),a.textField&&l.editor.getText&&(n[a.textField]=l.editor.getText(l.input,l.editParm))}if(0==t.trigger("beforeSubmitEdit",{record:r,rowindex:r.__index,newdata:n}))return!1;t.updateRow(r,n),t.trigger("afterSubmitEdit",{record:r,rowindex:r.__index,newdata:n})}},_enabledEditByCell:function(e){this.options;var t=this.getColumn(e);return!!t&&(t.editor&&t.editor.type)},endEditToNext:function(){function e(){return n.parent("tr").next(".l-grid-row").find("td:first")}var t=this,i=(this.options,t.editor),r=null,n=null;if(i){var o=i.editParm,l=o.column,a=($.inArray(l,t.columns),t.getCellObj(o.record,o.column));if(n=$(a),(r=n.next()).length||(r=e()),r.length)for(;!t._enabledEditByCell(r.get(0));)n=r,(r=r.next()).length||(r=e())}t.endEdit(),r&&r.length&&t._applyEditor(r.get(0))},endEdit:function(e){var t=this;this.options;if(t.editor.editing){n=t.editor;t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),n.editor.destroy&&n.editor.destroy(n.input,n.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1}}else if(void 0!=e){var i=t.getRow(e);if(!t.editors[i.__id])return;if(0==t.submitEdit(e))return!1;for(var r in t.editors[i.__id]){var n;(n=t.editors[i.__id][r]).editor.destroy&&n.editor.destroy(n.input,n.editParm)}delete t.editors[i.__id],delete i._editing,t.trigger("afterEdit",{record:i,rowindex:i.__index})}else for(var o in t.editors)t.endEdit(o);t._fixHeight.ligerDefer(t,10)},setWidth:function(e){return this._setWidth(e)},setHeight:function(e){return this._setHeight(e)},enabledCheckbox:function(){return!!this.options.checkbox},enabledFrozen:function(){var e=this,t=this.options;if(!t.frozen)return!1;var i=e.columns||[];if(e.enabledDetail()&&t.frozenDetail||e.enabledCheckbox()&&t.frozenCheckbox||t.frozenRownumbers&&t.rownumbers)return!0;for(var r=0,n=i.length;r<n;r++)if(i[r].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return!!this.enabledDetail()&&!!this.options.detailToEdit},enabledDetail:function(){return!(!this.options.detail||!this.options.detail.onShowDetail)},enabledGroup:function(){return!!this.options.groupColumnName},deleteSelectedRow:function(){if(this.selected){for(var e in this.selected){var t=this.selected[e];t.__id in this.records&&this._deleteData.ligerDefer(this,10,[t])}this.reRender.ligerDefer(this,20)}},removeRange:function(e){var t=this;this.options;$.each(e,function(){t._removeData(this)}),t.reRender()},remove:function(e){var t=this;this.options,t.getRow(e);t._removeData(e),t.reRender()},deleteRange:function(e){var t=this;this.options;$.each(e,function(){t._deleteData(this)}),t.reRender()},deleteRow:function(e){var t=this,i=(this.options,t.getRow(e));i&&(t._deleteData(i),t.reRender(),t.isDataChanged=!0)},_deleteData:function(e){var t=this,i=this.options,r=t.getRow(e);if(r[i.statusName]="delete",i.tree){var n=t.getChildren(r,!0);if(n)for(var o=0,l=n.length;o<l;o++)n[o][i.statusName]="delete"}t.deletedRows=t.deletedRows||[],t.deletedRows.push(r),t._removeSelected(r)},updateCell:function(e,t,i){var r,n,o,l=this,a=this.options;if("string"!=typeof e){if("number"==typeof e)r=l.columns[e],o=l.getRow(i),n=l.getCellObj(o,r);else if("object"==typeof e&&e.__id)r=e,o=l.getRow(i),n=l.getCellObj(o,r);else{var s=(n=e).id.split("|"),d=s[s.length-1];r=l._columns[d];var u=$(n).parent();o=o||l.getRow(u[0])}null!=t&&r.name&&(l._setValueByName(o,r.name,t),"add"!=o[a.statusName]&&(o[a.statusName]="update"),l.isDataChanged=!0),l.reRender({rowdata:o,column:r})}else for(var c=0,h=l.columns.length;c<h;c++)l.columns[c].name==e&&l.updateCell(c,t,i)},addRows:function(e,t,i,r){var n=this;this.options;$(e).each(function(){n.addRow(this,t,i,r)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(e){return e in this.records},_addNewRecord:function(e,t,i){var r=this,n=this.options;if(r.recordNumber++,e.__id=r._createRowid(),e.__previd=t,t&&-1!=t){var o=r.records[t];if(o.__nextid&&-1!=o.__nextid){var l=r.records[o.__nextid];l&&(l.__previd=e.__id)}o.__nextid=e.__id,e.__index=o.__index+1}else e.__index=0;if(n.tree){if(i&&-1!=i){var a=r.records[i];e.__pid=i,e.__level=a.__level+1}else e.__pid=-1,e.__level=1;e.__hasChildren=!!e[n.tree.childrenName]}return e[n.statusName]=e[n.statusName]||"nochanged",r.rows[e.__index]=e,r.records[e.__id]=e,e},_getRows:function(e){function t(e){if(e&&e.length)for(var n=0,o=e.length;n<o;n++){var l=e[n];r.push(l),l[i.tree.childrenName]&&t(l[i.tree.childrenName])}}var i=this.options,r=[];return t(e),r},_updateGridData:function(){function e(n,o){if(n&&n.length)for(var l=0,a=n.length;l<a;l++){var s=n[l];t.formatRecord(s),"delete"!=s[i.statusName]&&(t._addNewRecord(s,r,o),r=s.__id,s.__hasChildren&&e(s[i.tree.childrenName],s.__id))}}var t=this,i=this.options;t.recordNumber=0,t.rows=[],t.records={};var r=-1;return e(t.currentData[i.root],-1),t.rows},_moveData:function(e,t,i){var r,n,o=this,l=(this.options,o.getRow(e)),a=o.getRow(t),s=o._getParentChildren(l);r=$.inArray(l,s),s.splice(r,1),s=o._getParentChildren(a),n=$.inArray(a,s),s.splice(n+(i?1:0),0,l)},move:function(e,t,i){this._moveData(e,t,i),this.reRender()},moveRange:function(e,t,i){for(var r in e)this._moveData(e[r],t,i);this.reRender()},up:function(e){var t=this,i=(this.options,t.getRow(e)),r=t._getParentChildren(i),n=$.inArray(i,r);if(-1!=n&&0!=n){var o=t.getSelected();t.move(i,r[n-1],!1),t.select(o)}},down:function(e){var t=this,i=(this.options,t.getRow(e)),r=t._getParentChildren(i),n=$.inArray(i,r);if(-1!=n&&n!=r.length-1){var o=t.getSelected();t.move(i,r[n+1],!0),t.select(o)}},addRow:function(e,t,i,r){var n=this,o=this.options;if(e=e||{},n._addData(e,r,t,i),n.reRender(),e[o.statusName]="add",o.tree){var l=n.getChildren(e,!0);if(l)for(var a=0,s=l.length;a<s;a++)l[a][o.statusName]="add"}return n.isDataChanged=!0,o.total=o.total?o.total+1:1,o.pageCount=Math.ceil(o.total/o.pageSize),n._buildPager(),n.trigger("SysGridHeightChanged"),n.trigger("afterAddRow",[e]),e},updateRow:function(e,t){var i=this,r=this.options,n=i.getRow(e);return i.isDataChanged=!0,$.extend(n,t||{}),"add"!=n[r.statusName]&&(n[r.statusName]="update"),i.reRender.ligerDefer(i,10,[{rowdata:n}]),n},setCellEditing:function(e,t,i){var r=this,n=(this.options,r.getCellObj(e,t)),o=i?"addClass":"removeClass";if($(n)[o]("l-grid-row-cell-editing"),0!=e.__id){var l=$(r.getRowObj(e.__id)).prev();if(!l.length||l.length<=0||null==l[0].id||""==l[0].id)return;var a=r.getRow(l[0]);if(!(s=r.getCellObj(a,t)))return;$(s)[o]("l-grid-row-cell-editing-topcell")}if(-1!=t.__previd&&null!=t.__previd){var s=$(r.getCellObj(e,t)).prev();$(s)[o]("l-grid-row-cell-editing-leftcell")}},reRender:function(e){function t(e){if(e.totalSummary)for(var t=0;t<i.totalNumber;t++){var n=document.getElementById(i.id+"|total"+t+"|"+e.__id);$("div:first",n).html(i._getTotalCellContent(e,i.groups&&i.groups[t]?i.groups[t]:i.currentData[r.root]))}}var i=this,r=this.options,n=(e=e||{}).rowdata,o=e.column,l=e.totalOnly;if(!(o&&(o.isdetail||o.ischeckbox)||n&&"delete"==n[r.statusName]))if(l)$(i.columns).each(function(){t(this)});else if(n&&o){var a=i.getCellObj(n,o);$(a).html(i._getCellHtml(n,o)),o.issystem||i.setCellEditing(n,o,!1)}else if(n)$(i.columns).each(function(){i.reRender({rowdata:n,column:this})});else if(o){for(var s in i.records)i.reRender({rowdata:i.records[s],column:o});t(o)}else i._showData()},getData:function(e,t){var i=this,r=this.options,n=[];void 0==t&&(t=!0);for(var o in i.records){var l=$.extend(!0,{},i.records[o]);l[r.statusName]!=e&&void 0!=e||n.push(i.formatRecord(l,t))}return n},formatRecord:function(e,t){return delete e.__id,delete e.__previd,delete e.__nextid,delete e.__index,this.options.tree&&(delete e.__pid,delete e.__level,delete e.__hasChildren),t&&delete e[this.options.statusName],e},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var e=this,t=(this.options,[]);return this.deletedRows&&$(this.deletedRows).each(function(){var i=$.extend(!0,{},this);t.push(e.formatRecord(i,!1))}),$.merge(t,e.getData("update",!1)),$.merge(t,e.getData("add",!1)),t},getColumn:function(e){var t=this;this.options;if("string"==typeof e)return t._isColumnId(e)?t._columns[e]:t.columns[parseInt(e)];if("number"==typeof e)return t.columns[e];if("object"==typeof e&&1==e.nodeType){var i=e.id.split("|"),r=i[i.length-1];return t._columns[r]}return e},getColumnByName:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i];return null},getColumnType:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i].type?t.columns[i].type:"string";return null},isTotalSummary:function(){this.options;for(var e=0;e<this.columns.length;e++)if(this.columns[e].totalSummary)return!0;return!1},getColumns:function(e){this.options;var t=[];for(var i in this._columns){var r=this._columns[i];void 0!=e?r.__level==e&&t.push(r):r.__leaf&&t.push(r)}return t},changeSort:function(e,t){var i=this,r=this.options;if(i.loading)return!0;if("local"==r.dataAction){var n=i.getColumnType(e);if(i.sortedData||(i.sortedData=i.filteredData),!i.sortedData||!i.sortedData[r.root])return;r.sortName==e?i.sortedData[r.root].reverse():i.sortedData[r.root].sort(function(t,r){return i._compareData(t,r,e,n)}),r.usePager?i.currentData=i._getCurrentPageData(i.sortedData):i.currentData=i.sortedData,i._showData()}r.sortName=e,r.sortOrder=t,"server"==r.dataAction&&i.loadData(r.where)},changePage:function(e){var t=this,i=this.options;if(t.loading)return!0;if("local"!=i.dataAction&&t.isDataChanged&&!confirm(i.isContinueByDataChanged))return!1;switch(i.pageCount=parseInt($(".pcontrol span",t.toolbar).html()),e){case"first":if(1==i.page)return;i.newPage=1;break;case"prev":if(1==i.page)return;i.page>1&&(i.newPage=parseInt(i.page)-1);break;case"next":if(i.page>=i.pageCount)return;i.newPage=parseInt(i.page)+1;break;case"last":if(i.page>=i.pageCount)return;i.newPage=i.pageCount;break;case"input":var r=parseInt($(".pcontrol input",t.toolbar).val());isNaN(r)&&(r=1),r<1?r=1:r>i.pageCount&&(r=i.pageCount),$(".pcontrol input",t.toolbar).val(r),i.newPage=r}if(i.newPage==i.page)return!1;if(1==i.newPage?($(".l-bar-btnfirst span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnfirst span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).removeClass("l-disabled")),i.newPage==i.pageCount?($(".l-bar-btnlast span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnlast span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).removeClass("l-disabled")),t.trigger("changePage",[i.newPage]),"server"==i.dataAction)i.parms||(i.parms=[]),$.isArray(i.parms)?i.parms.push({name:"changepage",value:"1",temp:!0}):i.parms.changepage="1",t.loadData(i.where);else{if(t.currentData=t._getCurrentPageData(t.filteredData),i.tree){var n=i.tree.childrenName;$(t.filteredData[i.root]).each(function(e,t){t[n]&&(t[n]=[])}),t._convertTreeData()}t._showData()}},getSelectedRow:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return t}return null},getSelectedRows:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(i)}return e},getSelectedRowObj:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return this.getRowObj(t)}return null},getSelectedRowObjs:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(this.getRowObj(i))}return e},getCellObj:function(e,t){var i=this.getRow(e);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(e,t){var i=this;this.options;return null==e?null:"string"==typeof e?i._isRowId(e)?document.getElementById(i.id+(t?"|1|":"|2|")+e):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(e)].__id):"number"==typeof e?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[e].__id):"object"==typeof e&&e.__id?i.getRowObj(e.__id,t):e},getRow:function(e){var t=this;this.options;return null==e?null:"string"==typeof e?t._isRowId(e)?t.records[e]:t.rows[parseInt(e)]:"number"==typeof e?t.rows[parseInt(e)]:"object"!=typeof e||1!=e.nodeType||e.__id?e:t._getRowByDomId(e.id)},_setColumnVisible:function(e,t){this.options;if(t){if(e._hide=!0,document.getElementById(e.__domid).style.display="none",-1!=e.__pid){for(var i=!0,r=this._columns[e.__pid],n=0;r&&n<r.columns.length;n++)if(!r.columns[n]._hide){i=!1;break}i&&(r._hide=!0,document.getElementById(r.__domid).style.display="none",this._setColumnVisible(r,t))}}else if(e._hide=!1,document.getElementById(e.__domid).style.display="",-1!=e.__pid){(r=this._columns[e.__pid])._hide&&(document.getElementById(r.__domid).style.display="",this._setColumnVisible(r,t))}},toggleCol:function(e,t,i){var r,n=this;this.options;if("number"==typeof e)r=n.columns[e];else if("object"==typeof e&&e.__id)r=e;else if("string"==typeof e){if(!n._isColumnId(e))return void $(n.columns).each(function(){this.name==e&&n.toggleCol(this,t,i)});r=n._columns[e]}if(r){var o=r.__leafindex,l=document.getElementById(r.__domid);if(l){l=$(l);var a=[];for(var s in n.rows){var d=n.getCellObj(n.rows[s],r);d&&a.push(d)}for(s=0;s<n.totalNumber;s++){var u=document.getElementById(n.id+"|total"+s+"|"+r.__id);u&&a.push(u)}var c=r._width;t&&r._hide?(r.frozen?n.f.gridtablewidth+=parseInt(c)+1:n.gridtablewidth+=parseInt(c)+1,n._setColumnVisible(r,!1),$(a).show()):t||r._hide||(r.frozen?n.f.gridtablewidth-=parseInt(c)+1:n.gridtablewidth-=parseInt(c)+1,n._setColumnVisible(r,!0),$(a).hide()),r.frozen?($("div:first",n.f.gridheader).width(n.f.gridtablewidth),$("div:first",n.f.gridbody).width(n.f.gridtablewidth)):($("div:first",n.gridheader).width(n.gridtablewidth+40),n.gridtablewidth?$("div:first",n.gridbody).width(n.gridtablewidth):$("div:first",n.gridbody).css("width","auto")),n._updateFrozenWidth(),i||$(":checkbox[columnindex="+o+"]",n.popup).each(function(){if(this.checked=t,$.fn.ligerCheckBox){var e=$(this).ligerGetCheckBoxManager();e&&e.updateStyle()}})}}},setColumnWidth:function(e,t){var i=this,r=this.options;if(t){t=parseInt(t,10);var n;if("number"==typeof e)n=i.columns[e];else if("object"==typeof e&&e.__id)n=e;else if("string"==typeof e){if(!i._isColumnId(e))return void $(i.columns).each(function(){this.name==e&&i.setColumnWidth(this,t)});n=i._columns[e]}if(n){var o=r.minColumnWidth;n.minWidth&&(o=n.minWidth);var l=(t=t<o?o:t)-n._width;if(0!=i.trigger("beforeChangeColumnWidth",[n,t])){n._width=t,n.frozen?(i.f.gridtablewidth+=l,$("div:first",i.f.gridheader).width(i.f.gridtablewidth),$("div:first",i.f.gridbody).width(i.f.gridtablewidth)):(i.gridtablewidth+=l,$("div:first",i.gridheader).width(i.gridtablewidth+40),$("div:first",i.gridbody).width(i.gridtablewidth)),$(document.getElementById(n.__domid)).css("width",t);var a=[];for(var s in i.records){var d=i.getCellObj(i.records[s],n);if(d&&a.push(d),!i.enabledDetailEdit()&&i.editors[s]&&i.editors[s][n.__id]){var u=i.editors[s][n.__id];u.editor.resize&&u.editor.resize(u.input,t,u.container.height(),u.editParm)}}for(var c=0;c<i.totalNumber;c++){var h=document.getElementById(i.id+"|total"+c+"|"+n.__id);h&&a.push(h)}$(a).css("width",t).find("> div.l-grid-row-cell-inner:first").css("width",t-8),i._updateFrozenWidth(),i._updateHorizontalScrollStatus.ligerDefer(i,10),i.trigger("afterChangeColumnWidth",[n,t])}}}},changeHeaderText:function(e,t){var i,r=this,n=this.options;if("number"==typeof e)i=r.columns[e];else if("object"==typeof e&&e.__id)i=e;else if("string"==typeof e){if(!r._isColumnId(e))return void $(r.columns).each(function(){this.name==e&&r.changeHeaderText(this,t)});i=r._columns[e]}if(i){var o=i.__leafindex,l=document.getElementById(i.__domid);$(".l-grid-hd-cell-text",l).html(t),n.allowHideColumn&&$(":checkbox[columnindex="+o+"]",r.popup).parent().next().html(t)}},changeCol:function(e,t,i){var r=this,n=this.options;if(e&&t){var o=r.getColumn(e),l=r.getColumn(t);o.frozen=l.frozen;var a,s,d=-1==o.__pid?n.columns:r._columns[o.__pid].columns,u=-1==l.__pid?n.columns:r._columns[l.__pid].columns;a=$.inArray(o,d),s=$.inArray(l,u);var c=d==u;o.__level,l.__level;u.splice(s+(i?1:0),0,o),c?i?d.splice(a,1):d.splice(a+1,1):d.splice(a,1),r._setColumns(n.columns),r.reRender()}},collapseDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var r=0,n=t.columns.length;r<n;r++)if(t.columns[r].isdetail){var o=t.getRowObj(i),l=t.getCellObj(i,t.columns[r]);return $(o).next("tr.l-grid-detailpanel").hide(),$(".l-grid-row-cell-detailbtn:first",l).removeClass("l-open"),void t.trigger("SysGridHeightChanged")}},extendDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var r=0,n=t.columns.length;r<n;r++)if(t.columns[r].isdetail){var o=t.getRowObj(i),l=t.getCellObj(i,t.columns[r]);return $(o).next("tr.l-grid-detailpanel").show(),$(".l-grid-row-cell-detailbtn:first",l).addClass("l-open"),void t.trigger("SysGridHeightChanged")}},getParent:function(e){var t=this;if(!this.options.tree)return null;var i=t.getRow(e);return i&&i.__pid in t.records?t.records[i.__pid]:null},getChildren:function(e,t){function i(e){if(e[r.tree.childrenName])for(var n=0,l=e[r.tree.childrenName].length;n<l;n++){var a=e[r.tree.childrenName][n];"delete"!=a[r.statusName]&&(o.push(a),t&&i(a))}}var r=this.options;if(!r.tree)return null;var n=this.getRow(e);if(!n)return null;var o=[];return i(n),o},isLeaf:function(e){this.options;var t=this.getRow(e);if(t)return!t.__hasChildren},hasChildren:function(e){var t=this.options,i=this.getRow(e);if(i)return!(!i[t.tree.childrenName]||!i[t.tree.childrenName].length)},existRecord:function(e){for(var t in this.records)if(this.records[t]==e)return!0;return!1},_removeSelected:function(e){var t=this;if(this.options.tree){var i=t.getChildren(e,!0);if(i)for(var r=0,n=i.length;r<n;r++){var o=$.inArray(i[r],t.selected);-1!=o&&t.selected.splice(o,1)}}var l=$.inArray(e,t.selected);-1!=l&&t.selected.splice(l,1)},_getParentChildren:function(e){var t=this,i=this.options,r=t.getRow(e);return i.tree&&t.existRecord(r)&&r.__pid in t.records?t.records[r.__pid][i.tree.childrenName]:t.currentData[i.root]},_removeData:function(e){this.options;var t=this._getParentChildren(e),i=$.inArray(e,t);-1!=i&&t.splice(i,1),this._removeSelected(e)},_addData:function(e,t,i,r){var n=this,o=this.options;n.currentData||(n.currentData={}),n.currentData[o.root]||(n.currentData[o.root]=[]);var l=n.currentData[o.root];if(i){o.tree&&(t?l=t[o.tree.childrenName]:i.__pid in n.records&&(l=n.records[i.__pid][o.tree.childrenName]));var a=$.inArray(i,l);l.splice(-1==a?-1:a+(r?0:1),0,e)}else o.tree&&t&&(l=t[o.tree.childrenName]),l.push(e)},_appendData:function(e,t,i,r){e[this.options.statusName]="update",this._removeData(e),this._addData(e,t,i,r)},appendRange:function(e,t,i,r){var n=this,o=(this.options,!1);$.each(e,function(e,l){l.__id&&n.existRecord(l)?(n.isLeaf(t)&&n.upgrade(t),n._appendData(l,t,i,r),o=!0):n.appendRow(l,t,i,r)}),o&&n.reRender()},appendRow:function(e,t,i,r){var n=this;this.options;if($.isArray(e))n.appendRange(e,t,i,r);else{if(e.__id&&n.existRecord(e))return n._appendData(e,t,i,r),void n.reRender();t&&n.isLeaf(t)&&n.upgrade(t),n.addRow(e,i,!!r,t)}},upgrade:function(e){var t=this,i=this.options,r=t.getRow(e);if(r&&i.tree){r[i.tree.childrenName]=r[i.tree.childrenName]||[],r.__hasChildren=!0;var n=[t.getRowObj(r)];t.enabledFrozen()&&n.push(t.getRowObj(r,!0)),$("> td > div > .l-grid-tree-space:last",n).addClass("l-grid-tree-link l-grid-tree-link-open")}},demotion:function(e){var t=this,i=this.options,r=t.getRow(e);if(r&&i.tree){var n=[t.getRowObj(r)];if(t.enabledFrozen()&&n.push(t.getRowObj(r,!0)),$("> td > div > .l-grid-tree-space:last",n).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close"),t.hasChildren(r))for(var o=t.getChildren(r),l=0,a=o.length;l<a;l++)t.deleteRow(o[l]);r.__hasChildren=!1}},collapseAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var r=e.getRowObj(i);$(".l-grid-tree-link",r).hasClass("l-grid-tree-link-close")||e.toggle(i)})},expandAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var r=e.getRowObj(i);$(".l-grid-tree-link",r).hasClass("l-grid-tree-link-open")||e.toggle(i)})},collapse:function(e){this.options;var t=this.getRowObj(e);$(".l-grid-tree-link",t).hasClass("l-grid-tree-link-close")||this.toggle(e)},expand:function(e){this.options;var t=this.getRowObj(e);$(".l-grid-tree-link",t).hasClass("l-grid-tree-link-open")||this.toggle(e)},toggle:function(e){function t(e){for(var i=0,r=e.length;i<r;i++){var n=e[i],l=o.getChildren(n,!1),a=!(!l||!l.length),s=$([o.getRowObj(n.__id)]);o.enabledFrozen()&&(s=s.add(o.getRowObj(n.__id,!0))),a?$(".l-grid-tree-link",s).hasClass("l-grid-tree-link-close")?s.show():(s.show(),t(l)):($(".l-grid-tree-link",s).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),s.show())}}function i(){var e=[];if(!u)return e=o.getChildren(l,!0),$(e).each(function(){$(o.getRowObj(this)).hide(),o.enabledFrozen()&&$(o.getRowObj(this,!0)).hide()}),void o.trigger("treeCollapsed",[l]);t(e=o.getChildren(l,!1)),o.trigger("treeExpanded",[l])}function r(){d.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),-1!=(s=$.inArray(l,o.collapsedRows))&&o.collapsedRows.splice(s,1)}function n(){d.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open"),-1==(s=$.inArray(l,o.collapsedRows))&&o.collapsedRows.push(l)}if(e){var o=this,l=(this.options,o.getRow(e)),a=[o.getRowObj(l)];o.enabledFrozen()&&a.push(o.getRowObj(l,!0));l.__level;var s,d=$(".l-grid-tree-link:first",a),u=!0;o.collapsedRows=o.collapsedRows||[];if(d.hasClass("l-grid-tree-link-close")){c={update:function(){r(),i()}};if(o.hasBind("treeExpand")&&0==o.trigger("treeExpand",[l,c]))return!1;r()}else{var c={update:function(){n(),i()}};if(o.hasBind("treeCollapse")&&0==o.trigger("treeCollapse",[l,c]))return!1;u=!1,n()}i()}},_bulid:function(){var e=this;e._clearGrid(),e._initBuildHeader(),e._initHeight(),e._initFootbar(),e._buildPager(),e._setEvent()},_setColumns:function(e){var t=this;t._initColumns(),t._initBuildGridHeader(),t._initBuildPopup()},_initBuildHeader:function(){var e=this,t=this.options;t.title?($(".l-panel-header-text",e.header).html(t.title),t.headerImg&&e.header.append("<img src='"+t.headerImg+"' />").addClass("l-panel-header-hasicon")):e.header.hide(),t.toolbar?$.fn.ligerToolBar&&(e.toolbarManager=e.topbar.ligerToolBar(t.toolbar),0==e.topbar.height()?e.topbar.parent().height(25):e.topbar.parent().height(e.topbar.height())):e.topbar.parent().remove()},_createColumnId:function(e){return null!=e.id&&""!=e.id?e.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(e){return e in this._columns},_initColumns:function(){function e(i,r,n,o){if(i.editorType&&(i.editor=i.editor||{},i.editor.type=i.editorType),function(e,t){for(var i in t)t[i]in e&&delete e[t[i]]}(i,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),r>t._columnMaxLevel&&(t._columnMaxLevel=r),t._columnCount++,i.__id=t._createColumnId(i),i.__domid=t.id+"|hcell|"+i.__id,t._columns[i.__id]=i,i.columns&&i.columns.length||(i.__leafindex=t._columnLeafCount++),i.__level=r,i.__pid=n,i.__previd=o,!i.columns||!i.columns.length)return i.__leaf=!0,1;for(var l=0,a=-1,s=0,d=i.columns.length;s<d;s++){var u=i.columns[s];l+=e(u,r+1,i.__id,a),a=u.__id}return i.__leafcount=l,l}var t=this,i=this.options;if(t._columns={},t._columnCount=0,t._columnLeafCount=0,t._columnMaxLevel=1,i.columns){var r=-1;if(i.rownumbers){var n=!t.enabledGroup()&&(i.frozen&&i.frozenRownumbers);e(u={isrownumber:!0,issystem:!0,width:i.rownumbersColWidth,frozen:n},1,-1,r),r=u.__id}if(t.enabledDetail()){var o=!t.enabledGroup()&&(i.frozen&&i.frozenDetail);e(u={isdetail:!0,issystem:!0,width:i.detailColWidth,frozen:o},1,-1,r),r=u.__id}if(t.enabledCheckbox()){var l=!t.enabledGroup()&&(i.frozen&&i.frozenCheckbox);e(u={ischeckbox:!0,issystem:!0,width:i.detailColWidth,frozen:l},1,-1,r),r=u.__id}for(var a=0,s=i.columns.length;a<s;a++){(u=i.columns[a])&&(e(u,1,-1,r),r=u.__id)}for(var d in t._columns){var u=t._columns[d];u.__leafcount>1&&(u.__colSpan=u.__leafcount),u.__leaf&&u.__level!=t._columnMaxLevel&&(u.__rowSpan=t._columnMaxLevel-u.__level+1)}t.columns=t.getColumns(),$(t.columns).each(function(e,i){i.columnname=i.name,i.columnindex=e,i.type=i.type||"string",i.islast=e==t.columns.length-1,i.isSort=0!=i.isSort,i.frozen=!!i.frozen,i._width=t._getColumnWidth(i),i._hide=!!i.hide})}},_getColumnWidth:function(e){var t=this,i=this.options;if(e._width)return e._width;var r=e.width||i.columnWidth;if(!r||"auto"==r){var n=0,o=0;$(t.columns).each(function(e,r){var l=r.width||i.columnWidth;!l||"auto"==l?n++:o+=parseInt(t._getColumnWidth(r))+1}),r=parseInt((t.grid.width()-o)/n)-1}if("string"==typeof r&&r.indexOf("%")>0){var l=0;t.enabledDetail()&&(l+=i.detailColWidth),t.enabledCheckbox()&&(l+=i.checkboxColWidth),t.options.rownumbers&&(l+=t.options.rownumbersColWidth),e._width=r=parseInt(.01*parseInt(r)*(t.grid.width()-l-t.columns.length/2-1))}return e.minWidth&&r<e.minWidth&&(r=e.minWidth),e.maxWidth&&r>e.maxWidth&&(r=e.maxWidth),r},_createHeaderCell:function(e){var t=this,i=this.options,r=$("<td class='l-grid-hd-cell'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'></span></div></td>");if(r.attr("id",e.__domid),e.__leaf||r.addClass("l-grid-hd-cell-mul"),e.columnindex==t.columns.length-1&&r.addClass("l-grid-hd-cell-last"),e.isrownumber&&(r.addClass("l-grid-hd-cell-rownumbers"),r.html("<div class='l-grid-hd-cell-inner'></div>")),e.ischeckbox&&(r.addClass("l-grid-hd-cell-checkbox"),r.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></div>")),e.isdetail&&(r.addClass("l-grid-hd-cell-detail"),r.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-detail'></div></div>")),e.heightAlign&&$(".l-grid-hd-cell-inner:first",r).css("textAlign",e.heightAlign),e.__colSpan&&r.attr("colSpan",e.__colSpan),e.__rowSpan){r.attr("rowSpan",e.__rowSpan),r.height(i.headerRowHeight*e.__rowSpan);var n=(i.headerRowHeight*e.__rowSpan-i.headerRowHeight)/2-5;$(".l-grid-hd-cell-inner:first",r).css("paddingTop",n)}else r.height(i.headerRowHeight);e.__leaf&&(r.width(e._width),r.attr("columnindex",e.__leafindex));var o=r.height();!e.__rowSpan&&o>10&&$(">div:first",r).height(o),e._hide&&r.hide(),e.name&&r.attr({columnname:e.name});var l="";return l=e.display&&""!=e.display?e.display:e.headerRender?e.headerRender(e):"&nbsp;",$(".l-grid-hd-cell-text:first",r).html(l),!e.issystem&&e.__leaf&&!1!==e.resizable&&$.fn.ligerResizable&&i.allowAdjustColWidth&&(t.colResizable[e.__id]=r.ligerResizable({handles:"e",onStartResize:function(e,i){this.proxy.hide(),t.draggingline.css({height:t.body.height(),top:0,left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}).show()},onResize:function(e,i){t.colresizing=!0,t.draggingline.css({left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}),$("body").add(r).css("cursor","e-resize")},onStopResize:function(i){return t.colresizing=!1,$("body").add(r).css("cursor","default"),t.draggingline.hide(),t.setColumnWidth(e,parseInt(e._width)+i.diffX),!1}})),t.trigger("headerCellBulid",[r,e]),r},_initBuildGridHeader:function(){var e=this,t=this.options;if(e.gridtablewidth=0,e.f.gridtablewidth=0,e.colResizable){for(var i in e.colResizable)e.colResizable[i].destroy();e.colResizable=null}e.colResizable={},$("tbody:first",e.gridheader).html(""),$("tbody:first",e.f.gridheader).html("");for(var r=1;r<=e._columnMaxLevel;r++){var n=e.getColumns(r),o=r==e._columnMaxLevel,l=$("<tr class='l-grid-hd-row'></tr>"),a=$("<tr class='l-grid-hd-row'></tr>");o||l.add(a).addClass("l-grid-hd-mul"),$("tbody:first",e.gridheader).append(l),$("tbody:first",e.f.gridheader).append(a),$(n).each(function(t,i){if((i.frozen?a:l).append(e._createHeaderCell(i)),i.__leaf){var r=i._width;i.frozen?e.f.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1:e.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1}})}if(e._columnMaxLevel>0){var s=t.headerRowHeight*e._columnMaxLevel;e.gridheader.add(e.f.gridheader).height(s),t.rownumbers&&t.frozenRownumbers&&e.f.gridheader.find("td:first").height(s)}e._updateFrozenWidth(),$("div:first",e.gridheader).width(e.gridtablewidth+40)},_initBuildPopup:function(){var e=this,t=this.options;if($(":checkbox",e.popup).unbind(),$("tbody tr",e.popup).remove(),$(e.columns).each(function(t,i){if(!i.issystem&&0!=i.isAllowHide){var r='checked="checked"';i._hide&&(r="");var n=i.display;$("tbody",e.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+r+' class="l-checkbox" columnindex="'+t+'"/></td><td class="l-column-right">'+n+"</td></tr>")}}),$.fn.ligerCheckBox&&$("input:checkbox",e.popup).ligerCheckBox({onBeforeClick:function(i){return!i.checked||!($("input:checked",e.popup).length<=t.minColToggle)}}),t.allowHideColumn){$("tr",e.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var i=function(){if($("input:checked",e.popup).length+1<=t.minColToggle)return!1;e.toggleCol(parseInt($(this).attr("columnindex")),this.checked,!0)};$.fn.ligerCheckBox?$(":checkbox",e.popup).bind("change",i):$(":checkbox",e.popup).bind("click",i)}},_initHeight:function(){var e=this,t=this.options;"auto"==t.height&&(e.gridbody.height("auto"),e.f.gridbody.height("auto")),t.width&&e.grid.width(t.width),e._onResize.call(e)},_initFootbar:function(){var e=this,t=this.options;if(t.usePager){if(t.pagerRender)return void e.toolbar.html(t.pagerRender.call(e));if(t.scrollToPage)return void e.toolbar.hide();var i="",r=-1;$(t.pageSizeOptions).each(function(e,n){t.pageSize==n&&(r=e),i+="<option value='"+n+"'  >"+n+"</option>"}),$(".l-bar-selectpagesize",e.toolbar).append("<select name='rp'>"+i+"</select>"),-1!=r&&($(".l-bar-selectpagesize select",e.toolbar)[0].selectedIndex=r),t.switchPageSizeApplyComboBox&&$.fn.ligerComboBox&&$(".l-bar-selectpagesize select",e.toolbar).ligerComboBox({onBeforeSelect:function(){return!(t.url&&e.isDataChanged&&!confirm(t.isContinueByDataChanged))},width:45})}else e.toolbar.hide()},_searchData:function(e,t){this.options;for(var i=new Array,r=0;r<e.length;r++)t(e[r],r)&&(i[i.length]=e[r]);return i},_clearGrid:function(){var e=this;this.options;e._fixRows();for(var t in e.rows){var i=$(e.getRowObj(e.rows[t]));e.enabledFrozen()&&(i=i.add(e.getRowObj(e.rows[t],!0))),i.unbind()}e.gridbody.html(""),e.f.gridbody.html(""),e.recordNumber=0,e.records={},e.rows=[],e._fixRows(),e.selected=[],e.totalNumber=0,e.editorcounter=0},_fixRows:function(){var e=this;this.options;if(e.rows)for(var t in e.rows)$.isFunction(e.rows[t])&&delete e.rows[t]},_fillGridBody:function(e,t,i){var r=this,n=this.options,o="scrollappend"==i?[]:['<div class="l-grid-body-inner"><table class="l-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(r.enabledGroup()){var l=[],a=[];r.groups=a;for(var s in e){var d=e[s],u=d[n.groupColumnName],c=$.inArray(u,l);-1==c&&(l.push(u),c=l.length-1,a.push([])),a[c].push(d)}$(a).each(function(e,i){1==a.length&&o.push('<tr class="l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first"'),e==a.length-1?o.push('<tr class="l-grid-grouprow l-grid-grouprow-last"'):0==e?o.push('<tr class="l-grid-grouprow l-grid-grouprow-first"'):o.push('<tr class="l-grid-grouprow"'),o.push(' groupindex"='+e+'" >'),o.push('<td colSpan="'+r.columns.length+'" class="l-grid-grouprow-cell">'),o.push('<span class="l-grid-group-togglebtn">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),n.groupRender?o.push(n.groupRender(l[e],i,n.groupColumnDisplay)):o.push(n.groupColumnDisplay+":"+l[e]),o.push("</td>"),o.push("</tr>"),o.push(r._getHtmlFromData(i,t)),r.isTotalSummary()&&o.push(r._getTotalSummaryHtml(i,"l-grid-totalsummary-group",t))})}else o.push(r._getHtmlFromData(e,t));if("scrollappend"==!i&&o.push("</tbody></table></div>"),"scrollappend"==i?(t?r.f.gridbody:r.gridbody).find("tbody:first").append(o.join("")):(t?r.f.gridbody:r.gridbody).html(o.join("")),t&&(r.f.gridbody.find(">l-jplace").remove(),r.f.gridbody.append('<div class="l-jplace"></div>')),n.usePager&&n.scrollToPage&&!n.scrollToAppend){var h=t?r.f.gridbody.find("> .l-grid-body-inner"):r.gridbody.find("> .l-grid-body-inner"),p=h.find("> .l-scrollreplacetop");(p=p.length?p:$('<div class="l-scrollreplacetop"></div>').prependTo(h)).css("width","80%").height(r.lastScrollTop),(p=(p=h.find("> .l-scrollreplacebottom")).length?p:$('<div class="l-scrollreplacebottom"></div>').appendTo(h)).css("width","80%").height((n.pageCount-n.newPage)*r._getOnePageHeight())}r.enabledGroup()||r._bulidTotalSummary(t),$("> div:first",r.gridbody).width(r.gridtablewidth),r._onResize()},_showData:function(e){var t=this,i=this.options;t.changedCells={};var r=t.currentData[i.root];if(i.usePager&&("server"==i.dataAction&&t.data&&t.data[i.record]?i.total=t.data[i.record]:t.filteredData&&t.filteredData[i.root]?i.total=t.filteredData[i.root].length:t.data&&t.data[i.root]?i.total=t.data[i.root].length:r&&(i.total=r.length),i.page=i.newPage,i.total||(i.total=0),i.page||(i.page=1),i.pageCount=Math.ceil(i.total/i.pageSize),i.pageCount||(i.pageCount=1),i.scrollToPage||t._buildPager()),$(".l-bar-btnloading:first",t.toolbar).removeClass("l-bar-btnloading"),0!=t.trigger("beforeShowData",[t.currentData])){if("scrollappend"!=e&&t._clearGrid(),t.isDataChanged=!1,!r||!r.length)return t.gridview.addClass("l-grid-empty"),$(t.element).addClass("l-empty"),$("<div></div>").addClass("l-grid-body-inner").appendTo(t.gridbody).css({width:t.gridheader.find(">div:first").width(),height:t.gridbody.height()}),i.pagerRender?void t.toolbar.html(i.pagerRender.call(t)):void t._onResize.ligerDefer(t,50);if(t.gridview.removeClass("l-grid-empty"),$(t.element).removeClass("l-empty"),$(".l-bar-btnload:first span",t.toolbar).removeClass("l-disabled"),t._updateGridData(),t.enabledFrozen()&&t._fillGridBody(t.rows,!0,e),t._fillGridBody(t.rows,!1,e),t.trigger("SysGridHeightChanged"),"scroll"==e&&t.trigger("sysScrollLoaded"),i.totalRender&&($(".l-panel-bar-total",t.element).remove(),$(".l-panel-bar",t.element).before('<div class="l-panel-bar-total">'+i.totalRender(t.data,t.filteredData)+"</div>")),i.mouseoverRowCssClass)for(var n in t.rows){var o=$(t.getRowObj(t.rows[n]));t.enabledFrozen()&&(o=o.add(t.getRowObj(t.rows[n],!0))),o.bind("mouseover.gridrow",function(){t._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){t._onRowOver(this,!1)})}t._fixHeight(),i.pagerRender?t.toolbar.html(i.pagerRender.call(t)):(t.gridbody.trigger("scroll.grid"),t.trigger("afterShowData",[t.currentData]))}},_fixHeight:function(){var e=this,t=this.options;if(!t.fixedCellHeight&&t.frozen){var i,r;for(var n in e.columns){var o=e.columns[n];if(i&&r)break;!o.frozen||i?o.frozen||r||(r=o):i=o}if(i&&r)for(var l in e.records){var a=e.getCellObj(l,i),s=e.getCellObj(l,r),d=Math.max($(a).height(),$(s).height());$(a).add(s).height(d)}}},_getRowDomId:function(e,t){return this.id+"|"+(t?"1":"2")+"|"+e.__id},_getCellDomId:function(e,t){return this._getRowDomId(e,t.frozen)+"|"+t.__id},_getHtmlFromData:function(e,t){if(!e)return"";for(var i=this,r=this.options,n=[],o=0,l=e.length;o<l;o++){var a=e[o],s=a.__id;if(a){if(n.push("<tr"),n.push(' id="'+i._getRowDomId(a,t)+'"'),n.push(' class="l-grid-row'),!t&&i.enabledCheckbox()&&r.isChecked&&r.isChecked(a)?(i.select(a),n.push(" l-selected")):i.isSelected(a)?n.push(" l-selected"):r.isSelected&&r.isSelected(a)&&(i.select(a),n.push(" l-selected")),a.__index%2==1&&r.alternatingRow&&n.push(" l-grid-row-alt"),r.rowClsRender){var d=r.rowClsRender(a,s);d&&n.push(" "+d)}if(n.push('" '),r.rowAttrRender&&n.push(r.rowAttrRender(a,s)),r.tree&&i.collapsedRows&&i.collapsedRows.length){(u=function(){for(var e=i.getParent(a);e;){if(-1!=$.inArray(e,i.collapsedRows))return!0;e=i.getParent(e)}return!1})()&&n.push(' style="display:none;" ')}else if(r.tree&&r.tree.isExtend){var u=function(){for(var e=i.getParent(a);e;){if(0==r.tree.isExtend(e))return!0;e=i.getParent(e)}return!1};u()&&n.push(' style="display:none;" ')}n.push(">"),$(i.columns).each(function(e,o){if(t==o.frozen){if(n.push("<td"),n.push(' id="'+i._getCellDomId(a,this)+'"'),this.isrownumber)return n.push(' class="l-grid-row-cell l-grid-row-cell-rownumbers" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),void n.push(">"+(parseInt(a.__index)+1)+"</div></td>");if(this.ischeckbox)return n.push(' class="l-grid-row-cell l-grid-row-cell-checkbox" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),n.push(">"),n.push('<span class="l-grid-row-cell-btn-checkbox"></span>'),void n.push("</div></td>");if(this.isdetail)return n.push(' class="l-grid-row-cell l-grid-row-cell-detail" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),n.push(">"),r.isShowDetailToggle&&!r.isShowDetailToggle(a)||n.push('<span class="l-grid-row-cell-detailbtn"></span>'),void n.push("</div></td>");var l=this._width;n.push(' class="l-grid-row-cell '),i.changedCells[s+"_"+this.__id]&&n.push("l-grid-row-cell-edited "),this.islast&&n.push("l-grid-row-cell-last "),n.push('"'),n.push(' style = "'),n.push("width:"+l+"px; "),o._hide&&n.push("display:none;"),n.push(' ">'),n.push(i._getCellHtml(a,o)),n.push("</td>")}}),n.push("</tr>")}}return n.join("")},_getCellHtml:function(e,t){var i=this.options;if(t.isrownumber)return'<div class="l-grid-row-cell-inner">'+(parseInt(e.__index)+1)+"</div>";var r=[];r.push('<div class="l-grid-row-cell-inner"'),r.push(' style = "width:'+parseInt(t._width-8)+"px;"),i.fixedCellHeight&&r.push("height:"+i.rowHeight+"px;"),r.push("min-height:"+i.rowHeight+"px; "),t.align&&r.push("text-align:"+t.align+";");var n=this._getCellContent(e,t);return r.push('">'+n+"</div>"),r.join("")},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(e){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(e){return null}},_getCellContent:function(e,t){var i=this,r=this.options;if(!e||!t)return"";if(t.isrownumber)return parseInt(e.__index)+1;e.__id;var n=e.__index,o=i._getValueByName(e,t.name),l=i._getValueByName(e,t.textField),a="";return t.render?a=t.render.call(i,e,n,o,t):r.formatters[t.type]?a=r.formatters[t.type].call(i,o,t):null!=l?a=l.toString():null!=o&&(a=o.toString()),r.tree&&(null!=r.tree.columnName&&r.tree.columnName==t.name||null!=r.tree.columnId&&r.tree.columnId==t.id)&&(a=i._getTreeCellHtml(a,e)),a||""},_getTreeCellHtml:function(e,t){var i=t.__level,r=this.options,n=null==this.collapsedRows?r.tree.isExtend&&r.tree.isExtend(t):-1==$.inArray(t,this.collapsedRows||[]),o=r.tree.isParent&&r.tree.isParent(t),l="";i=parseInt(i)||1;for(var a=1;a<i;a++)l+="<div class='l-grid-tree-space'></div>";return l+=n&&o?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'></div>":o?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'></div>":"<div class='l-grid-tree-space'></div>",l+="<span class='l-grid-tree-content'>"+e+"</span>"},_applyEditor:function(e){var t=this,i=this.options,r=e,n=r.id.split("|"),o=n[n.length-1],l=t._columns[o],a=$(r).parent(),s=t.getRow(a[0]),d=s.__id,u=s.__index;if(l&&l.editor){var c=l.name;l.columnindex;if(l.editor.type&&i.editors[l.editor.type]){var h=t._getValueByName(s,c),p={record:s,value:h,column:l,rowindex:u};if(l.textField&&(p.text=t._getValueByName(s,l.textField)),0==t.trigger("beforeEdit",[p]))return!1;t.lastEditRow=s,liger.lastEditGrid=t;var g=i.editors[l.editor.type],f=$(r),v=($(r).offset(),$(r).width()),m=$(r).height(),b=$("<div class='l-grid-editor'></div>").appendTo(t.grid),y=0,x=0,w=f.position(),_=t.gridbody.position(),C=t.gridview2.position(),D=(i.toolbar?t.topbar.parent().outerHeight():0)+(i.title?t.header.outerHeight():0),y=w.left+_.left+C.left,x=w.top+_.top+C.top+D;f.html(""),t.setCellEditing(s,l,!0);var T=!!(window.ActiveXObject||"ActiveXObject"in window),k=0==$.browser.version.indexOf("8");T?(m-=k?1:2,x-=1,y-=1):$.browser.mozilla?(m-=1,x-=1,y-=1):$.browser.safari?x-=1:m-=1,y+=i.editorLeftDiff||0,x+=i.editorTopDiff||0,m+=i.editorHeightDiff||0,b.css({left:y,top:x}).show(),l.textField&&(p.text=t._getValueByName(s,l.textField));var S=t._createEditor(g,b,p,v,m-1);t.editor={editing:!0,editor:g,input:S,editParm:p,container:b},t.unbind("sysEndEdit"),t.bind("sysEndEdit",function(){var e=g.getValue(S,p);l.textField&&g.getText&&(p.text=g.getText(S,p)),g.getSelected&&(p.selected=g.getSelected(S,p)),e!=h&&($(r).addClass("l-grid-row-cell-edited"),t.changedCells[d+"_"+l.__id]=!0,p.value=e),l.editor.onChange&&l.editor.onChange.call(S,p),t._checkEditAndUpdateCell(p)&&l.editor.onChanged&&l.editor.onChanged.call(S,p)})}}},_checkEditAndUpdateCell:function(e){var t=this;this.options;if(0==t.trigger("beforeSubmitEdit",[e]))return!1;var i=e.column;return e.text&&i.textField&&t._setValueByName(e.record,i.textField,e.text),t.updateCell(i,e.value,e.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:e.record}),!0},_getCurrentPageData:function(e){var t=this.options,r={};if(r[t.root]=[],!e||!e[t.root]||!e[t.root].length)return r[t.record]=0,r;for(r[t.record]=e[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<e[t.root].length&&i<t.newPage*t.pageSize;i++)r[t.root].push(e[t.root][i]);return r},_compareData:function(e,t,i,r){var n=this.options,o=e[i],l=t[i];return null==o&&null!=l?1:null==o&&null==l?0:null!=o&&null==l?-1:n.sorters[r]?n.sorters[r].call(this,o,l):o<l?-1:o>l?1:0},_getTotalInfo:function(e,t){var i=this.options;try{if(!e.totalSummary)return null;var r=0,n=0,o=0,l=0,a=0;if(t&&t.length){a=parseFloat(t[0][e.name]),l=parseFloat(t[0][e.name]);for(var s=0;s<t.length;s++)if("delete"!=t[s][i.statusName]){n+=1;var d=t[s][e.name];"string"==typeof d&&(d=d.replace(/\$|\,/g,"")),(d=parseFloat(d))&&(r+=d,d>a&&(a=d),d<l&&(l=d))}o=1*r/t.length}return{sum:r,count:n,avg:o,min:l,max:a}}catch(e){return{}}},_getTotalCellContent:function(e,t){this.options;var i=[];if(e.totalSummary){var r=function(e){for(var t=0;t<l.length;t++)if(l[t].toLowerCase()==e.toLowerCase())return!0;return!1},n=this._getTotalInfo(e,t);if(e.totalSummary.render){var o=e.totalSummary.render(n,e,this.data);i.push(o)}else if(e.totalSummary.type&&n){var l=e.totalSummary.type.split(",");r("sum")&&i.push("<div>Sum="+n.sum.toFixed(2)+"</div>"),r("tsum")&&i.push("<div>"+sum.toFixed(0)+"</div>"),r("count")&&i.push("<div>Count="+n.count+"</div>"),r("max")&&i.push("<div>Max="+n.max.toFixed(2)+"</div>"),r("min")&&i.push("<div>Min="+n.min.toFixed(2)+"</div>"),r("avg")&&i.push("<div>Avg="+n.avg.toFixed(2)+"</div>")}}return i.join("")},_getTotalSummaryHtml:function(e,t,i){var r=this,n=(this.options,[]);return t?n.push('<tr class="l-grid-totalsummary '+t+'">'):n.push('<tr class="l-grid-totalsummary">'),$(r.columns).each(function(t,o){this.frozen==i&&(this.isrownumber?n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers" style="width:'+this.width+'px"><div>&nbsp;</div></td>'):this.ischeckbox?n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox" style="width:'+this.width+'px"><div>&nbsp;</div></td>'):this.isdetail?n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-detail" style="width:'+this.width+'px"><div>&nbsp;</div></td>'):(n.push('<td class="l-grid-totalsummary-cell'),this.islast&&n.push(" l-grid-totalsummary-cell-last"),n.push('" '),n.push('id="'+r.id+"|total"+r.totalNumber+"|"+o.__id+'" '),n.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&n.push('columnname="'+columnname+'" '),n.push('columnindex="'+t+'" '),n.push('><div class="l-grid-totalsummary-cell-inner"'),o.align&&n.push(' style="text-Align:'+o.align+';"'),n.push(">"),n.push(r._getTotalCellContent(o,e)),n.push("</div></td>")))}),n.push("</tr>"),i||r.totalNumber++,n.join("")},_bulidTotalSummary:function(e){var t=this,i=this.options;if(!t.isTotalSummary())return!1;if(!t.currentData||0==t.currentData[i.root].length)return!1;var r=$(t._getTotalSummaryHtml(t.currentData[i.root],null,e));$("tbody:first",e?t.f.gridbody:t.gridbody).append(r),e?t.totalRow1=r:t.totalRow2=r},updateTotalSummary:function(){this.options;this.reRender({totalOnly:!0})},_buildPager:function(){var e=this,t=this.options;if(!t.pagerRender){$(".pcontrol input",e.toolbar).val(t.page),t.pageCount||(t.pageCount=1),$(".pcontrol span",e.toolbar).html(t.pageCount);var i=parseInt((t.page-1)*t.pageSize)+1,r=parseInt(i)+parseInt(t.pageSize)-1;t.total||(t.total=0),t.total<r&&(r=t.total),t.total||(i=r=0),i<0&&(i=0),r<0&&(r=0);var n=t.pageStatMessage;n=(n=(n=(n=n.replace(/{from}/,i)).replace(/{to}/,r)).replace(/{total}/,t.total)).replace(/{pagesize}/,t.pageSize),$(".l-bar-text",e.toolbar).html(n),t.total||$(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",e.toolbar).addClass("l-disabled"),t.hideLoadButton&&($(".l-bar-btnload:first",e.toolbar).parent().hide(),$(".l-bar-btnload:first",e.toolbar).parent().next().hide()),1==t.page?($(".l-bar-btnfirst span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).addClass("l-disabled")):t.page>t.pageCount&&t.pageCount>0&&($(".l-bar-btnfirst span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).removeClass("l-disabled")),t.page==t.pageCount?($(".l-bar-btnlast span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).addClass("l-disabled")):t.page<t.pageCount&&t.pageCount>0&&($(".l-bar-btnlast span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).removeClass("l-disabled"))}},_getRowIdByDomId:function(e){return e.split("|")[2]},_getRowByDomId:function(e){return this.records[this._getRowIdByDomId(e)]},_isEditing:function(e){if(e.hasClass("l-box-dateeditor")||e.hasClass("l-box-select"))return!0;if(e.hasClass("l-dialog")){var t=[];if(e.find(".l-dialog").each(function(){var e=$(this).attr("ligeruiid");e&&t.push(e)}),this._editorIncludeCotrols(t))return!0}return!1},_getSrcElementByEvent:function(e){var t=this,i=e.target||e.srcElement,r=$(i).parents().add(i),n=function(e){for(var t=0,i=r.length;t<i;t++)if("string"==typeof e){if($(r[t]).hasClass(e))return r[t]}else if("object"==typeof e&&r[t]==e)return r[t];return null};if(n("l-grid-editor"))return{editing:!0,editor:n("l-grid-editor")};if(-1==r.index(this.element))return t._isEditing(r)?{editing:!0}:{out:!0};var o=!1;if(r.hasClass("l-grid-detailpanel")&&t.detailrows)for(var l=0,a=t.detailrows.length;l<a;l++)if(-1!=r.index(t.detailrows[l])){o=!0;break}var s={grid:n("l-panel"),indetail:o,frozen:!!n(t.gridview1[0]),header:n("l-panel-header"),gridheader:n("l-grid-header"),gridbody:n("l-grid-body"),total:n("l-panel-bar-total"),popup:n("l-grid-popup"),toolbar:n("l-panel-bar")};if(s.gridheader&&(s.hrow=n("l-grid-hd-row"),s.hcell=n("l-grid-hd-cell"),s.hcelltext=n("l-grid-hd-cell-text"),s.checkboxall=n("l-grid-hd-cell-checkbox"),s.hcell)){var d=s.hcell.id.split("|")[2];s.column=t._columns[d]}return s.gridbody&&(s.row=n("l-grid-row"),s.cell=n("l-grid-row-cell"),s.checkbox=n("l-grid-row-cell-btn-checkbox"),s.groupbtn=n("l-grid-group-togglebtn"),s.grouprow=n("l-grid-grouprow"),s.detailbtn=n("l-grid-row-cell-detailbtn"),s.detailrow=n("l-grid-detailpanel"),s.totalrow=n("l-grid-totalsummary"),s.totalcell=n("l-grid-totalsummary-cell"),s.rownumberscell=$(s.cell).hasClass("l-grid-row-cell-rownumbers")?s.cell:null,s.detailcell=$(s.cell).hasClass("l-grid-row-cell-detail")?s.cell:null,s.checkboxcell=$(s.cell).hasClass("l-grid-row-cell-checkbox")?s.cell:null,s.treelink=n("l-grid-tree-link"),s.editor=n("l-grid-editor"),s.row&&(s.data=this._getRowByDomId(s.row.id)),s.cell&&(s.editing=$(s.cell).hasClass("l-grid-row-cell-editing")),s.editor&&(s.editing=!0),s.editing&&(s.out=!1)),s.toolbar&&(s.first=n("l-bar-btnfirst"),s.last=n("l-bar-btnlast"),s.next=n("l-bar-btnnext"),s.prev=n("l-bar-btnprev"),s.load=n("l-bar-btnload"),s.button=n("l-bar-button")),s},_editorIncludeCotrols:function(e){var t=this;this.options;if(!e||!e.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,e))return!0}else if(t.editors)for(var i in t.editors)if(t.editors[i])for(var r in t.editors[i]){var n=t.editors[i][r];if(n&&n.input&&t._controlIncludeCotrols(n.input,e))return!0}return!1},_controlIncludeCotrols:function(e,t){this.options;if(!e||!e.includeControls||!e.includeControls.length)return!1;for(var i=0;i<e.includeControls.length;i++){var r=e.includeControls[i];if(-1!=$.inArray(r.id,t))return!0}return!1},_getOnePageHeight:function(){var e=this.options;return(parseFloat(e.rowHeight||24)+1)*parseInt(e.pageSize)},_setEvent:function(){var e=this,t=this.options;e.grid.bind("mousedown.grid",function(t){e._onMouseDown.call(e,t)}),e.grid.bind("dblclick.grid",function(t){e._onDblClick.call(e,t)}),e.grid.bind("contextmenu.grid",function(t){return e._onContextmenu.call(e,t)}),$(document).bind("mouseup.grid",function(t){e._onMouseUp.call(e,t)}),$(document).bind("click.grid",function(t){e._onClick.call(e,t)}),$(window).bind("resize.grid",function(t){e._onResize.call(e)}),$(document).bind("keydown.grid",function(t){t.ctrlKey&&(e.ctrlKey=!0)}),$(document).bind("keyup.grid",function(t){delete e.ctrlKey}),e.gridbody.bind("scroll.grid",function(){var i=e.gridbody.scrollLeft(),r=e.gridbody.scrollTop();if(null!=i&&(e.gridheader[0].scrollLeft=i),null!=r&&(e.f.gridbody[0].scrollTop=r),t.scrollToPage&&t.usePager&&!e.loading){var n=e.gridbody.find(".l-grid-body-inner:first").height(),o=r+e.gridbody.height();if(t.scrollToAppend)t.newPage!=t.pageCount&&o>=n&&e.reload(t.newPage+1,"scrollappend");else{var l=o>=n?t.pageCount:Math.ceil(o/e._getOnePageHeight());e.scrollLoading||(e.scrollLoading=!0,e.lastScrollTop=r,e.unbind("sysScrollLoaded"),e.bind("sysScrollLoaded",function(){e.gridbody.scrollTop(r),setTimeout(function(){e.scrollLoading=!1},500)}),e.scrollLoading=!0,e.reload(l,"scroll"))}}e.trigger("SysGridHeightChanged")}),$("select",e.toolbar).change(function(){if(e.isDataChanged&&"local"!=t.dataAction&&!confirm(t.isContinueByDataChanged))return!1;t.newPage=1,t.pageSize=this.value,e.loadData("local"!=t.dataAction&&t.where)}),$("span.pcontrol :text",e.toolbar).blur(function(t){e.changePage("input")}),$("div.l-bar-button",e.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}),$.fn.ligerDrag&&t.colDraggable&&(e.colDroptip=$("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),e.gridheader.add(e.f.gridheader).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(t,i){var r=e._getSrcElementByEvent(i);if(r.hcell&&r.column){var n=$(".l-grid-hd-cell-text:first",r.hcell).html(),o=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");return o.append(n),o}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;this.set("cursor","default");var r=e._getSrcElementByEvent(i);if(!r.hcell||!r.column||r.column.issystem||r.hcelltext)return!1;if(-1!=$(r.hcell).css("cursor").indexOf("resize"))return!1;this.draggingColumn=r.column,e.coldragging=!0;var n=e.grid.offset();this.validRange={top:n.top,bottom:n.top+e.gridheader.height(),left:n.left-10,right:n.left+e.grid.width()+10}},onDrag:function(i,r){this.set("cursor","default");var n=this.draggingColumn;if(!n)return!1;if(e.colresizing)return!1;null==e.colDropIn&&(e.colDropIn=-1);var o=r.pageX,l=r.pageY,a=!1,s=(e.grid.offset(),this.validRange);if(o<s.left||o>s.right||l>s.bottom||l<s.top)return e.colDropIn=-1,e.colDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");for(var d in e._columns){var u=e._columns[d];if(n!=u){if(!u.issystem){var c=!!(u.__level==n.__level)&&!!a;if(n.frozen!=u.frozen&&(c=!u.frozen),-1==e.colDropIn||e.colDropIn==d){var h=document.getElementById(u.__domid),p=$(h).offset(),g={top:p.top,bottom:p.top+$(h).height(),left:p.left-10,right:p.left+10};if(c){var f=$(h).width();g.left+=f,g.right+=f}if(o>g.left&&o<g.right&&l>g.top&&l<g.bottom){var v=t.headerRowHeight;u.__rowSpan&&(v*=u.__rowSpan),e.colDroptip.css({left:g.left+5,top:g.top-9,height:v+18}).show(),e.colDropIn=d,e.colDropDir=c?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}-1!=e.colDropIn&&(e.colDropIn=-1,e.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}}else a=!0}},onStopDrag:function(t,i){var r=this.draggingColumn;e.coldragging=!1,-1!=e.colDropIn&&(e.changeCol.ligerDefer(e,0,[r,e.colDropIn,"right"==e.colDropDir]),e.colDropIn=-1),e.colDroptip.hide(),this.set("cursor","default")}})),$.fn.ligerDrag&&t.rowDraggable&&(e.rowDroptip=$("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),e.gridbody.add(e.f.gridbody).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(i,r){if(e._getSrcElementByEvent(r).row){var n=t.draggingMessage.replace(/{count}/,i.draggingRows?i.draggingRows.length:1);t.rowDraggingRender&&(n=t.rowDraggingRender(i.draggingRows,i,e));return $("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+n+"</div>").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;if(!e.columns.length)return!1;this.set("cursor","default");var r=e._getSrcElementByEvent(i);if(!r.cell||!r.data||r.checkbox)return!1;var n=r.cell.id.split("|"),o=e._columns[n[n.length-1]];if(!(r.rownumberscell||r.detailcell||r.checkboxcell||o==e.columns[0]))return!1;if(e.enabledCheckbox()){if(this.draggingRows=e.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[r.data];this.draggingRow=r.data,this.set("cursor","move"),e.rowdragging=!0,this.validRange={top:e.gridbody.offset().top,bottom:e.gridbody.offset().top+e.gridbody.height(),left:e.grid.offset().left-10,right:e.grid.offset().left+e.grid.width()+10}},onDrag:function(i,r){var n=this.draggingRow;if(!n)return!1;var o=this.draggingRows?this.draggingRows:[n];if(e.colresizing)return!1;null==e.rowDropIn&&(e.rowDropIn=-1);var l=r.pageX,a=r.pageY,s=!1,d=this.validRange;if(l<d.left||l>d.right||a>d.bottom||a<d.top)return e.rowDropIn=-1,e.rowDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var u in e.rows){var c=e.rows[u],h=c.__id;if(n==c&&(s=!0),-1==$.inArray(c,o)){var p=!!s;if(-1==e.rowDropIn||e.rowDropIn==h){var g=e.getRowObj(h),f=$(g).offset(),v={top:f.top-4,bottom:f.top+$(g).height()+4,left:e.grid.offset().left,right:e.grid.offset().left+e.grid.width()};if(l>v.left&&l<v.right&&a>v.top&&a<v.bottom){var m=f.top;p&&(m+=$(g).height()),e.rowDroptip.css({left:v.left,top:m,width:v.right-v.left}).show(),e.rowDropIn=h,e.rowDropDir=p?"bottom":"top",t.tree&&a>v.top+5&&a<v.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),e.rowDroptip.hide(),e.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),e.rowDroptip.show(),e.rowDropInParent=!1);break}-1!=e.rowDropIn&&(e.rowDropIn=-1,e.rowDropInParent=!1,e.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,r){var n=this.draggingRows;e.rowdragging=!1;for(var o=0;o<n.length;o++){var l=n[o].children;l&&(n=$.grep(n,function(e,t){return-1==$.inArray(e,l)}))}if(-1!=e.rowDropIn){if(t.tree){var a,s;e.rowDropInParent?s=e.getRow(e.rowDropIn):(a=e.getRow(e.rowDropIn),s=e.getParent(a)),e.appendRange(n,s,a,"bottom"!=e.rowDropDir),e.trigger("rowDragDrop",{rows:n,parent:s,near:a,after:"bottom"==e.rowDropDir})}else e.moveRange(n,e.rowDropIn,"bottom"==e.rowDropDir),e.trigger("rowDragDrop",{rows:n,parent:s,near:e.getRow(e.rowDropIn),after:"bottom"==e.rowDropDir});e.rowDropIn=-1}e.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(e,t){if(!l.draggable.dragging){var i=this,r=this.options,n=i.getRow(e),o=t?"addClass":"removeClass";t&&i.editor.editing&&$("tr."+r.mouseoverRowCssClass,i.gridview).removeClass(r.mouseoverRowCssClass),i.enabledFrozen()&&$(i.getRowObj(n,!0))[o](r.mouseoverRowCssClass),$(i.getRowObj(n,!1))[o](r.mouseoverRowCssClass)}},_onMouseUp:function(e){var t=this;this.options;if(l.draggable.dragging){var i=t._getSrcElementByEvent(e);i.hcell&&i.column?t.trigger("dragdrop",[{type:"header",column:i.column,cell:i.hcell},e]):i.row&&t.trigger("dragdrop",[{type:"row",record:i.data,row:i.row},e])}},_onMouseDown:function(e){this.options},_onContextmenu:function(e){var t=this,i=this.options,r=t._getSrcElementByEvent(e);if(r.row){if(i.whenRClickToSelect&&t.select(r.data),t.hasBind("contextmenu"))return t.trigger("contextmenu",[{data:r.data,rowindex:r.data.__index,row:r.row},e])}else if(r.hcell){if(!i.allowHideColumn)return!0;var n=$(r.hcell).attr("columnindex");if(void 0==n)return!0;var o=e.pageX-t.body.offset().left+parseInt(t.body[0].scrollLeft);return n==t.columns.length-1&&(o-=50),t.popup.css({left:o,top:t.gridheader.height()+1}),t.popup.toggle(),!1}},_onDblClick:function(e){this.options;var t=this._getSrcElementByEvent(e);t.row&&this.trigger("dblClickRow",[t.data,t.data.__id,t.row])},_onClick:function(e){var t=e.target||e.srcElement,i=this,r=this.options,n=i._getSrcElementByEvent(e);if(n.out)return i.editor.editing&&!$.ligerui.win.masking&&i.endEdit(),void(r.allowHideColumn&&i.popup.hide());if(!n.indetail&&!n.editing)if(i.editor.editing&&i.endEdit(),r.allowHideColumn&&(n.popup||i.popup.hide()),n.checkboxall){w=(u=$(n.hrow)).hasClass("l-checked");if(0==i.trigger("beforeCheckAllRow",[!w,i.element]))return!1;w?u.removeClass("l-checked"):u.addClass("l-checked"),i.selected=[];for(var o in i.records)w?i.unselect(i.records[o]):i.select(i.records[o]);i.trigger("checkAllRow",[!w,i.element])}else if(n.hcelltext){var l=$(n.hcelltext).parent().parent();if(!r.enabledSort||!n.column)return;if(0==n.column.isSort)return;if(r.url&&"local"!=r.dataAction&&i.isDataChanged&&!confirm(r.isContinueByDataChanged))return;var a=$(".l-grid-hd-cell-sort:first",l),s=n.column.name;if(!s)return;a.length>0?a.hasClass("l-grid-hd-cell-sort-asc")?(a.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc"),l.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc"),i.trigger("ChangeSort",[s,"desc"]),i.changeSort(s,"desc")):a.hasClass("l-grid-hd-cell-sort-desc")&&(a.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc"),l.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),i.trigger("ChangeSort",[s,"asc"]),i.changeSort(s,"asc")):(l.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),$(n.hcelltext).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>"),i.trigger("ChangeSort",[s,"asc"]),i.changeSort(s,"asc")),$(".l-grid-hd-cell-sort",i.gridheader).add($(".l-grid-hd-cell-sort",i.f.gridheader)).not($(".l-grid-hd-cell-sort:first",l)).remove()}else if(n.detailbtn&&r.detail){var d=n.data,u=$([i.getRowObj(d,!1)]);i.enabledFrozen()&&(u=u.add(i.getRowObj(d,!0)));o=d.__id;if($(n.detailbtn).hasClass("l-open"))r.detail.onCollapse&&r.detail.onCollapse(d,$(".l-grid-detailpanel-inner:first",c)[0]),u.next("tr.l-grid-detailpanel").hide(),$(n.detailbtn).removeClass("l-open");else{var c=u.next("tr.l-grid-detailpanel");if(c.length>0)return c.show(),r.detail.onExtend&&r.detail.onExtend(d,$(".l-grid-detailpanel-inner:first",c)[0]),$(n.detailbtn).addClass("l-open"),void i.trigger("SysGridHeightChanged");$(n.detailbtn).addClass("l-open");for(var h=0,p=0;p<i.columns.length;p++)i.columns[p].frozen&&h++;var g=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),f=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>");g.find("div:first").width(i.gridheader.find("div:first").width()-50),g.attr("id",i.id+"|detail|"+o),i.detailrows=i.detailrows||[],i.detailrows.push(g[0]),i.detailrows.push(f[0]);var v=$("div:first",g);v.parent().attr("colSpan",i.columns.length-h),u.eq(0).after(g),h>0&&(f.find("td:first").attr("colSpan",h),u.eq(1).after(f)),r.detail.onShowDetail?(r.detail.onShowDetail(d,v[0],function(){i.trigger("SysGridHeightChanged")}),$("div:first",f).add(v).show().height(r.detail.height||r.detailHeight)):r.detail.render&&(v.append(r.detail.render()),v.show()),i.trigger("SysGridHeightChanged")}}else if(n.groupbtn){var m=$(n.grouprow),b=!0;$(n.groupbtn).hasClass("l-grid-group-togglebtn-close")?($(n.groupbtn).removeClass("l-grid-group-togglebtn-close"),m.hasClass("l-grid-grouprow-last")&&$("td:first",m).width("auto")):(b=!1,$(n.groupbtn).addClass("l-grid-group-togglebtn-close"),m.hasClass("l-grid-grouprow-last")&&$("td:first",m).width(i.gridtablewidth));for(var y=m.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");;){if(0==y.length)break;b?(y.show(),y.hasClass("l-grid-detailpanel")&&!y.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open")&&y.hide()):y.hide(),y=y.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel")}i.trigger(b?"groupExtend":"groupCollapse"),i.trigger("SysGridHeightChanged")}else if(n.treelink)i.toggle(n.data);else if(n.row&&i.enabledCheckbox()){var x=!!r.selectRowButtonOnly;if(r.enabledEdit&&(x=!0),"a"==t.tagName.toLowerCase())return;if((n.checkbox||!x)&&0!=r.selectable){var w=(u=$(n.row)).hasClass("l-selected");if(0==i.trigger("beforeCheckRow",[!w,n.data,n.data.__id,n.row]))return!1;var _=w?"unselect":"select";if(i[_](n.data),r.tree&&r.autoCheckChildren)for(var C=i.getChildren(n.data,!0),p=0,D=C.length;p<D;p++)i[_](C[p]);i.trigger("checkRow",[!w,n.data,n.data.__id,n.row])}!n.checkbox&&n.cell&&r.enabledEdit&&r.clickToEdit&&i._applyEditor(n.cell)}else if(n.row&&!i.enabledCheckbox()&&0!=r.selectable)if(n.cell&&r.enabledEdit&&r.clickToEdit&&i._applyEditor(n.cell),$(n.row).hasClass("l-selected")){if(!r.allowUnSelectRow)return void $(n.row).addClass("l-selected-again");i.unselect(n.data)}else i.select(n.data);else if(n.toolbar)if(n.first){if(0==i.trigger("toFirst",[i.element]))return!1;i.changePage("first")}else if(n.prev){if(0==i.trigger("toPrev",[i.element]))return!1;i.changePage("prev")}else if(n.next){if(0==i.trigger("toNext",[i.element]))return!1;i.changePage("next")}else if(n.last){if(0==i.trigger("toLast",[i.element]))return!1;i.changePage("last")}else if(n.load){if($("span",n.load).hasClass("l-disabled"))return!1;if(0==i.trigger("reload",[i.element]))return!1;if(r.url&&i.isDataChanged&&!confirm(r.isContinueByDataChanged))return!1;i.loadData(r.where)}},select:function(e){var t=this,i=this.options,r=t.getRow(e),n=r.__id,o=t.getRowObj(n);if(i.rowSelectable&&0!=t.trigger("beforeSelectRow",[r,n,o])){var l=t.getRowObj(n,!0);if(!t.enabledCheckbox()&&!t.ctrlKey||i.isSingleCheck){for(var a in t.selected){var s=t.selected[a];s.__id in t.records&&($(t.getRowObj(s)).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(t.getRowObj(s,!0)).removeClass("l-selected l-selected-again"))}t.selected=[]}o&&$(o).addClass("l-selected"),l&&$(l).addClass("l-selected"),t.selected[t.selected.length]=r,t.trigger("selectRow",[r,n,o])}},unselect:function(e){var t=this,i=(this.options,t.getRow(e)),r=i.__id,n=t.getRowObj(r),o=t.getRowObj(r,!0);$(n).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(o).removeClass("l-selected l-selected-again"),t._removeSelected(i),t.trigger("unSelectRow",[i,r,n])},isSelected:function(e){var t=this,i=(this.options,t.getRow(e));for(var r in t.selected)if(t.selected[r]==i)return!0;return!1},arrayToTree:function(e,t,i){function r(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var n=this.options,o="children";if(n.tree&&(o=n.tree.childrenName),!e||!e.length)return[];for(var l=[],a={},s=e.length,d=0;d<s;d++){var u=e[d];a[h=r(u[t])]=u}for(d=0;d<s;d++){var c=e[d],h=r(c[i]),p=a[h];p?(p[o]=p[o]||[],p[o].push(c)):l.push(c)}return l},_onResize:function(){var e=this,t=this.options;if(t.height&&"auto"!=t.height){var i=$(window).height(),r=0,n=null;if("string"==typeof t.height&&t.height.indexOf("%")>0){var o=e.grid.parent();t.inWindow?(n=i,n-=parseInt($("body").css("paddingTop")),n-=parseInt($("body").css("paddingBottom"))):n=o.height(),r=n*parseInt(t.height)*.01,(t.inWindow||"body"==o[0].tagName.toLowerCase())&&(r-=e.grid.offset().top-parseInt($("body").css("paddingTop")))}else r=parseInt(t.height);r+=t.heightDiff,e.windowHeight=i,e._setHeight(r)}else e._updateHorizontalScrollStatus.ligerDefer(e,10);if(e.enabledFrozen()){var l=e.gridview1.width(),a=e.gridview.width();a-l<=0?e.gridview2.css({width:"auto"}):e.gridview2.css({width:a-l})}e.trigger("SysGridHeightChanged")},showFilter:function(){var e=this;this.options;{if(!e.winfilter){var t=$('<div id="'+e.id+'_filtercontainer"></div>').width(380).height(120).hide(),i=t.ligerFilter({fields:function(){var t=[];return $(e.columns).each(function(){var e={name:this.name,display:this.display},i="int"==this.type||"number"==this.type||"float"==this.type,r="date"==this.type;i&&(e.type="number"),r&&(e.type="date"),this.editor&&(e.editor=this.editor),t.push(e)}),t}()});return i.addRule($(i.element.firstChild)),e.winfilter=$.ligerDialog.open({width:420,height:208,target:t,isResize:!0,top:50,buttons:[{text:"确定",onclick:function(t,r){!function(){var t=i.getData();"server"==e.options.dataType?function(t){t&&t.rules&&t.rules.length?e.setParm("where",JSON.stringify(t)):e.removeParm("where"),e.loadData()}(t):function(t){e.loadData($.ligerFilter.getFilterFunction(t))}(t)}(),r.hide()}},{text:"取消",onclick:function(e,t){t.hide()}}]})}e.winfilter.show()}},addError:function(e,t){$(e).addClass("g-has-error"),$(e).prepend('<div class="g-help-block">'+t+"</div>")},addErrorByRC:function(e,t,i){var r=this.getCellObj(e,t);this.addError(r,i)},addErrorByName:function(e,t,i){var r=this.getColumnByName(t);this.addErrorByRC(e,r,i)},removeError:function(e){$(e).removeClass("g-has-error"),$(e).find("g-help-block").remove()},removeErrorByRC:function(e,t){var i=this.getCellObj(e,t);this.removeError(i)},removeErrorByName:function(e,t){var i=this.getColumnByName(t);this.removeErrorByRC(e,i)}}),$.ligerui.controls.Grid.prototype.enabledTotal=$.ligerui.controls.Grid.prototype.isTotalSummary,$.ligerui.controls.Grid.prototype.add=$.ligerui.controls.Grid.prototype.addRow,$.ligerui.controls.Grid.prototype.update=$.ligerui.controls.Grid.prototype.updateRow,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRow,$.ligerui.controls.Grid.prototype.getSelected=$.ligerui.controls.Grid.prototype.getSelectedRow,$.ligerui.controls.Grid.prototype.getSelecteds=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRows=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRowObjs=$.ligerui.controls.Grid.prototype.getSelectedRowObjs,$.ligerui.controls.Grid.prototype.setOptions=$.ligerui.controls.Grid.prototype.set,$.ligerui.controls.Grid.prototype.reload=$.ligerui.controls.Grid.prototype.loadData,$.ligerui.controls.Grid.prototype.refreshSize=$.ligerui.controls.Grid.prototype._onResize,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRange}(jQuery),function(e){e.fn.ligerTextBox=function(){return e.ligerui.run.call(this,"ligerTextBox",arguments)},e.fn.ligerGetTextBoxManager=function(){return e.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)},e.ligerDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:null,disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1},e.ligerui.controls.TextBox=function(t,i){e.ligerui.controls.TextBox.base.constructor.call(this,t,i)},e.ligerui.controls.TextBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){e.ligerui.controls.TextBox.base._init.call(this);var t=this.options;t.width||(t.width=e(this.element).width()),e(this.element).attr("readonly")?t.readonly=!0:t.readonly&&e(this.element).attr("readonly",!0)},_render:function(){var t=this,i=this.options;t.inputText=e(this.element),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.inputText.hasClass("l-text-field")||t.inputText.addClass("l-text-field"),this._setEvent(),(i.digits||i.number||i.currency)&&t.inputText.addClass("l-text-field-number"),t.set(i),t.formatValue()},destroy:function(){var e=this;e.wrapper&&e.wrapper.remove(),e.options=null,liger.remove(this)},_getValue:function(){var e=this,t=this.options;return e.inputText.hasClass("l-text-field-null")?"":t.digits||t.number||t.currency?e.parseNumber():e.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var e=this,t=this.options,i=e.inputText.val()||"";if(""==i)return"";if(t.currency)e.inputText.val(function(e,t){var i,r;if(e||(e=0),(e=e.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,"")).indexOf(".")>-1&&(e=e.replace(/[0]+$/g,"")),isNaN(e)&&(e=0),r=e==(e=Math.abs(e)),null==t)(i=-1!=(e=e.toString()).indexOf(".")?e.substr(e.indexOf(".")+1):"")&&(e=(e=Math.floor(1*e)).toString());else{t=parseInt(t);var n=Math.pow(10,t);for(i=(e=Math.floor(e*n+.50000000001))%100,e=Math.floor(e/n).toString();i.toString().length<t;)i="0"+i}for(var o=0;o<Math.floor((e.length-(1+o))/3);o++)e=e.substring(0,e.length-(4*o+3))+","+e.substring(e.length-(4*o+3));var l=(r?"":"-")+e;return i&&(l+="."+i),l}(i,t.precision));else if(t.number&&t.precision&&i){var r=parseFloat(e.inputText.val()).toFixed(t.precision);e.inputText.val(r)}},checkNotNull:function(){var e=this,t=this.options;if(!t.nullText||"null"==t.nullText||t.disabled||t.readonly)e.inputText.removeClass("l-text-field-null");else if(!e.inputText.val())return void e.inputText.addClass("l-text-field-null").val(t.nullText)},_setEvent:function(){function t(){(function(){var e=i.inputText.val();return!e||"-"==e||(r.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(e)})()||i.inputText.val(i.parseNumber())}var i=this,r=this.options;(r.digits||r.number||r.currency)&&i.inputText.keyup(t).bind("paste",t),i.inputText.bind("blur.textBox",function(){i.trigger("blur"),i.checkNotNull(),i.formatValue(),i.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){r.readonly||(i.trigger("focus"),r.nullText&&e(this).hasClass("l-text-field-null")&&e(this).removeClass("l-text-field-null").val(""),i.wrapper.addClass("l-text-focus"),(r.digits||r.number||r.currency)&&(e(this).val(i.parseNumber()),r.initSelect&&setTimeout(function(){i.inputText.select()},150)))}).change(function(){i.trigger("changeValue",[this.value])}),i.wrapper.hover(function(){i.trigger("mouseOver"),i.wrapper.addClass("l-text-over")},function(){i.trigger("mouseOut"),i.wrapper.removeClass("l-text-over")})},parseNumber:function(e){var t=this.options,i=!!t.digits;if(null==(e=e||this.inputText.val())||""==e)return"";if(!(t.digits||t.number||t.currency))return e;"string"!=typeof e&&(e=(e||"").toString());var r=/^\-/.test(e);if(i){if("0"==e)return e;e=e.replace(/\D+|^[0]+/g,"")}else e=e.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(e)&&(e=e.replace(/^[0]+/,""));return!i&&t.precision&&"NaN"==(e=parseFloat(e).toFixed(t.precision))?"0":(r&&(e="-"+e),e)},_setDisabled:function(e){var t=this.options;e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("l-text-disabled")):t.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("l-text-disabled"))},_setWidth:function(e){e>20&&(this.wrapper.css({width:e}),this.inputText.css({width:e-4}))},_setHeight:function(e){e>10&&(this.wrapper.height(e),this.inputText.height(e-2))},_setValue:function(e){null!=e&&this.inputText.val(e),this.checkNotNull()},_setLabel:function(t){var i=this,r=this.options;if(i.labelwrapper)i.labelwrapper.find(".l-text-label").html(t+":&nbsp");else{i.labelwrapper=i.wrapper.wrap('<div class="l-labeltext"></div>').parent();var n=e('<div class="l-text-label" style="float:left;">'+t+":&nbsp</div>");i.labelwrapper.prepend(n),i.wrapper.css("float","left"),r.labelWidth?i._setLabelWidth(r.labelWidth):r.labelWidth=n.width(),n.height(i.wrapper.height()),r.labelAlign&&i._setLabelAlign(r.labelAlign),i.labelwrapper.append('<br style="clear:both;" />'),i.labelwrapper.width(r.labelWidth+r.width+2)}},_setLabelWidth:function(e){this.options;this.labelwrapper&&this.labelwrapper.find(".l-text-label").width(e)},_setLabelAlign:function(e){this.options;this.labelwrapper&&this.labelwrapper.find(".l-text-label").css("text-align",e)},updateStyle:function(){var e=this,t=this.options;e.inputText.attr("readonly")?(e.wrapper.addClass("l-text-readonly"),t.disabled=!0):(e.wrapper.removeClass("l-text-readonly"),t.disabled=!1),e.inputText.attr("disabled")?(e.wrapper.addClass("l-text-disabled"),t.disabled=!0):(e.wrapper.removeClass("l-text-disabled"),t.disabled=!1),e.inputText.hasClass("l-text-field-null")&&e.inputText.val()!=t.nullText&&e.inputText.removeClass("l-text-field-null"),e.formatValue()},setValue:function(e){this._setValue(e),this.trigger("changeValue",[e])}})}(jQuery),function(e){e.fn.ligerComboBox=function(t){return e.ligerui.run.call(this,"ligerComboBox",arguments)},e.fn.ligerGetComboBoxManager=function(){return e.ligerui.run.call(this,"ligerGetComboBoxManager",arguments)},e.ligerDefaults.ComboBox={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-3,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!0,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"新增",addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteAllowEmpty:!0,isTextBoxMode:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!1,initIsTriggerEvent:!1,conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0},e.ligerDefaults.ComboBoxString={Search:"搜索"},e.ligerMethos.ComboBox=e.ligerMethos.ComboBox||{},e.ligerui.controls.ComboBox=function(t,i){e.ligerui.controls.ComboBox.base.constructor.call(this,t,i)},e.ligerui.controls.ComboBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"ComboBox"},_extendMethods:function(){return e.ligerMethos.ComboBox},_init:function(){e.ligerui.controls.ComboBox.base._init.call(this);var t=this.options;t.columns&&(t.isShowCheckBox=!0),t.isMultiSelect&&(t.isShowCheckBox=!0),t.triggerToLoad&&(t.delayLoad=!0)},_render:function(){var t=this,i=this.options;t.data=i.data,t.inputText=null,t.select=null,t.textFieldID="",t.valueFieldID="",t.valueField=null,e(this.element).is(":hidden")?(t.valueField=e(this.element),t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.valueField.attr("validate")&&(t.inputText.attr("validate",t.valueField.attr("validate")),t.valueField.removeAttr("validate")),t.valueField.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.valueField.attr("validateMessage")),t.valueField.removeAttr("validateMessage"))):"input"==this.element.tagName.toLowerCase()?(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id):"select"==this.element.tagName.toLowerCase()&&(e(this.element).hide(),t.select=e(this.element),i.isMultiSelect=!1,i.isShowCheckBox=!1,i.cancelable=!1,t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.select.attr("validate")&&(t.inputText.attr("validate",t.select.attr("validate")),t.select.removeAttr("validate")),t.select.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.select.attr("validateMessage")),t.select.removeAttr("validateMessage")),!i.value&&this.element.value&&(i.value=this.element.value)),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.inputText.attr("data-comboboxid",t.id),null==t.valueField&&(i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input").filter("input:hidden"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val")),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),null!=i.initValue&&(t.valueField[0].value=i.initValue),t.valueField.attr("data-ligerid",t.id),t.link=e('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),i.triggerIcon&&t.link.find("div:first").addClass(i.triggerIcon),t.selectBox=e('<div class="l-box-select" style="display:none"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-box-select-table"></table></div></div>'),t.selectBox.table=e("table:first",t.selectBox),t.selectBoxInner=t.selectBox.find(".l-box-select-inner:first"),t.wrapper=t.inputText.wrap('<div class="l-text l-text-combobox"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link),t.textwrapper=t.wrapper.wrap('<div class="l-text-wrapper"></div>').parent(),i.absolute?t.selectBox.appendTo("body").addClass("l-box-select-absolute"):t.textwrapper.append(t.selectBox),t.textwrapper.append(t.valueField),t.inputText.addClass("l-text-field"),i.isShowCheckBox&&!t.select?e("table",t.selectBox).addClass("l-table-checkbox"):(i.isShowCheckBox=!1,e("table",t.selectBox).addClass("l-table-nocheckbox")),t.link.hover(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")},function(){i.disabled||i.readonly||(this.className="l-trigger")}).mousedown(function(){i.disabled||i.readonly||(this.className="l-trigger-pressed")}).mouseup(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")}).click(function(){if(!i.disabled&&!i.readonly)return 0!=t.trigger("buttonClick")&&(0!=t.trigger("beforeOpen")&&void(i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible"))))}),t.inputText.click(function(){if(!i.disabled&&!i.readonly)return 0!=t.trigger("beforeOpen")&&void(i.autocomplete?t.updateSelectBoxPosition():i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible")))}).blur(function(){i.disabled||t.wrapper.removeClass("l-text-focus")}).focus(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-focus")}).change(function(){t.trigger("changeValue",[this.value])}),t.wrapper.hover(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-over")},function(){i.disabled||i.readonly||t.wrapper.removeClass("l-text-over")}),t.resizing=!1,t.selectBox.hover(null,function(e){i.hideOnLoseFocus&&t.selectBox.is(":visible")&&!t.boxToggling&&!t.resizing&&t._toggleSelectBox(!0)}),t.bulidContent(),t.set(i,null,"init"),i.selectBoxWidth?t.selectBox.width(i.selectBoxWidth):t.selectBox.css("width",t.wrapper.css("width")),i.grid&&(i.delayLoadGrid?t.bind("show",function(){t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))}):t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))),t.updateSelectBoxPosition(),e(document).bind("click.combobox",function(i){t.selectBox.is(":visible")&&0==e(i.target||i.srcElement).closest(".l-box-select, .l-text-combobox").length&&t._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove(),this.selectBox&&this.selectBox.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue("",""),e("a.l-checkbox-checked",this.selectBox).removeClass("l-checkbox-checked"),e("td.l-selected",this.selectBox).removeClass("l-selected"),e(":checkbox",this.selectBox).each(function(){this.checked=!1}),this.trigger("clear")},_setSelectBoxHeight:function(t){if(t){var i=this,r=this.options;if(r.grid)i.grid&&i.grid.set("height",i.getGridHeight(t));else if(r.tree)i.selectBoxInner.height(r.selectBoxHeight);else{var n=e("tr",i.selectBox.table).length;!r.selectBoxHeight&&n<8&&(r.selectBoxHeight=30*n),r.selectBoxHeight&&(n<8?i.selectBoxInner.height("auto"):i.selectBoxInner.height(r.selectBoxHeight))}}},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,r=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),r.disabled||r.readonly||!r.cancelable||i.wrapper.append(i.unselect),i.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setReadonly:function(e){e?this.wrapper.addClass("l-text-readonly"):this.wrapper.removeClass("l-text-readonly")},_setLable:function(t){var i=this,r=this.options;t&&(i.labelwrapper?i.labelwrapper.find(".l-text-label:first").html(t+":&nbsp"):(i.labelwrapper=i.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),i.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+t+":&nbsp</div>"),i.textwrapper.css("float","left")),r.labelWidth?e(".l-text-label",i.labelwrapper).outerWidth(r.labelWidth):r.labelWidth=e(".l-text-label",i.labelwrapper).outerWidth(),e(".l-text-label",i.labelwrapper).width(r.labelWidth),e(".l-text-label",i.labelwrapper).height(i.wrapper.height()),i.labelwrapper.append('<br style="clear:both;" />'),r.labelAlign&&e(".l-text-label",i.labelwrapper).css("text-align",r.labelAlign),i.textwrapper.css({display:"inline"}),i.labelwrapper.width(i.wrapper.outerWidth()+r.labelWidth+2))},_setWidth:function(e){var t=this,i=this.options;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}),i.selectBoxWidth||t.selectBox.css({width:e}))},_setHeight:function(e){e>10&&(this.wrapper.height(e),this.inputText.height(e-2))},_setResize:function(t){var i=this,r=this.options;if(!r.columns&&t&&e.fn.ligerResizable){var n=r.selectBoxHeight?"e":"se,s,e";i.selectBox.ligerResizable({handles:n,onStartResize:function(){i.resizing=!0,i.trigger("startResize")},onEndResize:function(){if(i.resizing=!1,0==i.trigger("endResize"))return!1},onStopResize:function(e,t){return!i.grid||(e.newWidth&&i.selectBox.width(e.newWidth),e.newHeight&&i.set({selectBoxHeight:e.newHeight}),i.grid.refreshSize(),i.trigger("endResize"),!1)}}),i.selectBox.append("<div class='l-btn-nw-drop'></div>")}},findTextByValue:function(t){var i=this,r=this.options;if(null==t)return"";var n,o="";return n=i.options.grid&&i.options.grid.data?i.options.grid.data.Rows:i.data,e(n).each(function(e,i){var n=i[r.valueField],l=i[r.textField];(function(e){for(var i=t.toString().split(r.split),n=0;n<i.length;n++)if(i[n]==e&&""!=i[n])return!0;return!1})(n)&&(o+=l+r.split)}),o.length>0&&(o=o.substr(0,o.length-1)),o},findValueByText:function(t){var i=this.options;if(!t&&""==t)return"";var r="";return e(this.data).each(function(e,n){var o=n[i.valueField];(function(e){for(var r=t.toString().split(i.split),n=0;n<r.length;n++)if(r[n]==e)return!0;return!1})(n[i.textField])&&(r+=o+i.split)}),r.length>0&&(r=r.substr(0,r.length-1)),r},insertItem:function(e,t){var i=this;this.options;i.data=i.data||[],i.data.splice(t,0,e),i.setData(i.data)},addItem:function(e){this.options;this.insertItem(e,(this.data||[]).length)},_setIsTextBoxMode:function(e){this.options;e&&this.inputText.removeAttr("readonly")},_setValue:function(t,i){var r=this,n=this.options,o=!0;if("init"==i&&(i=null,!0,o=!!n.initIsTriggerEvent),i=n.isTextBoxMode?t:i||r.findTextByValue(t),n.tree)setTimeout(function(){n.setTextBySource?r.selectValueByTree(t):r.treeSelectInit(t)},100);else if(n.isMultiSelect){if(r._changeValue(t,i,o),null!=t){var l=t.toString().split(n.split);e("table.l-table-checkbox :checkbox",r.selectBox).each(function(){this.checked=!1});for(var a=0;a<l.length;a++)e("table.l-table-checkbox tr[value="+l[a]+"] :checkbox",r.selectBox).each(function(){this.checked=!0})}}else r._changeValue(t,i,o),e("tr[value='"+t+"'] td",r.selectBox).addClass("l-selected"),e("tr[value!='"+t+"'] td",r.selectBox).removeClass("l-selected");n.selectBoxRenderUpdate&&n.selectBoxRenderUpdate.call(r,{selectBox:r.selectBox,value:t,text:i})},selectValue:function(e){this._setValue(e)},bulidContent:function(){var e=this,t=this.options;this.clearContent(),e.select?e.setSelect():t.tree&&e.setTree(t.tree)},reload:function(){var e=this,t=this.options;t.url?e.set("url",t.url):e.grid&&e.grid.reload()},_setUrl:function(t,i){if(t){var r=this,n=this.options;if(!n.readonly)if(!n.delayLoad||r.isAccessDelay||r.triggerLoaded){t=e.isFunction(t)?t.call(r):t;var o=e.isFunction(n.urlParms)?n.urlParms.call(r):n.urlParms;if(o)for(name in o)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+o[name];var l=e.isFunction(n.parms)?n.parms.call(r):n.parms;"application/json"==n.ajaxContentType&&"string"!=typeof l&&(l=liger.toJSON(l));var a={type:n.ajaxType,url:t,data:l,cache:!1,dataType:"json",beforeSend:n.ajaxBeforeSend,complete:n.ajaxComplete,success:function(t){var o=e.isFunction(n.dataGetter)?o=n.dataGetter.call(r,t):t;o=n.dataParmName&&o?o[n.dataParmName]:o,0!=r.trigger("beforeSetData",[o])&&(r.setData(o),r.trigger("success",[o]),e.isFunction(i)&&i(o))},error:function(e,t){r.trigger("error",[e,t])}};n.ajaxContentType&&(a.contentType=n.ajaxContentType),e.ajax(a)}else r.isAccessDelay=!0}},setUrl:function(e,t){return this._setUrl(e,t)},setParm:function(e,t){if(e){var i=this.get("parms");i||(i={}),i[e]=t,this.set("parms",i)}},clearContent:function(){var t=this,i=this.options;t&&(e("table",t.selectBox).html(""),t&&t._setSelectBoxHeight(i.selectBoxHeight))},setSelect:function(){var t=this,i=this.options;this.clearContent(),t.data=[],e("option",t.select).each(function(i){var r=e(this).val(),n=e(this).html();t.data.push({text:n,id:r});var o=e("<tr><td index='"+i+"' value='"+r+"' text='"+n+"'>"+n+"</td>");e("table.l-table-nocheckbox",t.selectBox).append(o),e("td",o).hover(function(){e(this).addClass("l-over").siblings("td").removeClass("l-over")},function(){e(this).removeClass("l-over")})}),e("td:eq("+t.select[0].selectedIndex+")",t.selectBox).each(function(){if(e(this).hasClass("l-selected"))t.selectBox.hide();else{e(".l-selected",t.selectBox).removeClass("l-selected"),e(this).addClass("l-selected"),t.select[0].selectedIndex!=e(this).attr("index")&&t.select[0].onchange&&(t.select[0].selectedIndex=e(this).attr("index"),t.select[0].onchange());var r=parseInt(e(this).attr("index"));t.select[0].selectedIndex=r,t.select.trigger("change"),t.selectBox.hide();var n=e(this).attr("value"),o=e(this).html();i.render?t.inputText.val(i.render(n,o)):t.inputText.val(o)}}),t._addClickEven()},_setData:function(e){this.setData(e)},getRowIndex:function(e){var t=this,i=this.options;if(!e)return-1;if(!t.data||!t.data.length)return-1;for(var r=0;r<t.data.length;r++)if(null!=t.data[r]){if(t.data[r][i.valueField]==e)return r}return-1},getRow:function(e){var t=this,i=this.options;if(!e)return null;if(!t.data||!t.data.length)return null;for(var r=0;r<t.data.length;r++)if(null!=t.data[r]){if(t.data[r][i.valueField]==e)return t.data[r]}return null},setData:function(t){var i=this,r=this.options;if(!i.select)if(r.selectBoxRender)r.selectBoxRender.call(i,{selectBox:i.selectBox,data:t});else{if(t&&t.length||(t=[]),i.data!=t&&(i.data=t),i.data=e.isFunction(i.data)?i.data():i.data,this.clearContent(),r.columns){i.selectBox.table.headrow=e("<tr class='l-table-headerow'><td width='18px'></td></tr>"),i.selectBox.table.append(i.selectBox.table.headrow),i.selectBox.table.addClass("l-box-select-grid");for(u=0;u<r.columns.length;u++){var n=e("<td columnindex='"+u+"' columnname='"+r.columns[u].name+"'>"+r.columns[u].header+"</td>");r.columns[u].width&&n.width(r.columns[u].width),i.selectBox.table.headrow.append(n)}}var o=[];r.emptyText&&(i.emptyRow={},i.emptyRow[r.textField]=r.emptyText,i.emptyRow[r.valueField]=void 0!=r.emptyValue?r.emptyValue:"",t.splice(0,0,i.emptyRow));for(var l=0;l<t.length;l++){var a=t[l][r.valueField],s=t[l][r.textField],d=!!e.isFunction(r.isRowReadOnly)&&r.isRowReadOnly(t[l]);if(r.columns){o.push("<tr value='"+a+"'"),d&&o.push(" class='rowreadonly'"),o.push(">"),o.push("<td style='width:18px;'  index='"+l+"' value='"+a+"' text='"+s+"' ><input type='checkbox' /></td>");for(var u=0;u<r.columns.length;u++){var c=r.columns[u].name;o.push("<td>"+t[l][c]+"</td>")}o.push("</tr>")}else{o.push("<tr value='"+a+"'");var h=[];d&&h.push(" rowreadonly "),e.isFunction(r.rowClsRender)&&h.push(r.rowClsRender(t[l])),h.length&&(o.push(" class='"),o.push(h.join("")),o.push("'")),o.push(">"),r.isShowCheckBox&&o.push("<td style='width:18px;'  index='"+l+"' value='"+a+"' text='"+s+"' ><input type='checkbox' /></td>");var p=s;p=r.renderItem?r.renderItem.call(i,{data:t[l],value:a,text:s,key:i.inputText.val()}):r.autocomplete&&r.highLight?i._highLight(s,i.inputText.val()):"<span>"+p+"</span>",o.push("<td index='"+l+"' value='"+a+"' text='"+s+"' align='left'>"+p+"</td></tr>")}}r.columns?i.selectBox.table.append(o.join("")):r.isShowCheckBox?e("table.l-table-checkbox",i.selectBox).append(o.join("")):e("table.l-table-nocheckbox",i.selectBox).append(o.join("")),r.addRowButton&&r.addRowButtonClick&&!i.addRowButton&&(i.addRowButton=e('<div class="l-box-select-add"><a href="javascript:void(0)" class="link"><div class="icon"></div></a></div>'),i.addRowButton.find(".link").append(r.addRowButton).click(r.addRowButtonClick),i.selectBoxInner.after(i.addRowButton)),i.set("selectBoxHeight",r.selectBoxHeight),r.isShowCheckBox&&e.fn.ligerCheckBox&&e("table input:checkbox",i.selectBox).ligerCheckBox(),e(".l-table-checkbox input:checkbox",i.selectBox).change(function(){if(this.checked&&i.hasBind("beforeSelect")){var t=null;if(null!=(t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent())&&0==i.trigger("beforeSelect",[t.attr("value"),t.attr("text")]))return i.selectBox.slideToggle("fast"),!1}r.isMultiSelect||this.checked&&(e("input:checked",i.selectBox).not(this).each(function(){this.checked=!1,e(".l-checkbox-checked",e(this).parent()).removeClass("l-checkbox-checked")}),i.selectBox.slideToggle("fast")),i._checkboxUpdateValue()}),e("table.l-table-nocheckbox td",i.selectBox).hover(function(){e(this).parent().hasClass("rowreadonly")||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),i._addClickEven(),r.autocomplete||i.updateStyle(),i.trigger("afterShowData",[t])}},setTree:function(t){var i=this,r=this.options;this.clearContent(),i.selectBox.table.remove(),0!=t.checkbox?t.onCheck=function(){var t=i.treeManager.getChecked(),n=[],o=[];e(t).each(function(e,t){r.treeLeafOnly&&t.data.children||(n.push(t.data[r.valueField]),o.push(t.data[r.textField]))}),i._changeValue(n.join(r.split),o.join(r.split),!0)}:(t.onSelect=function(e){if(!(0==i.trigger("BeforeSelect",[e])||r.treeLeafOnly&&e.data.children)){var t=e.data[r.valueField],n=e.data[r.textField];i._changeValue(t,n,!0),i.selectBox.hide()}},t.onCancelSelect=function(e){i._changeValue("","",!0)}),t.onAfterAppend=function(e,t){if(i.treeManager){var n=null;r.initValue?n=r.initValue:""!=i.valueField.val()&&(n=i.valueField.val()),i.selectValueByTree(n)}},i.tree=e("<ul></ul>"),e("div:first",i.selectBox).append(i.tree),i.innerTree=i.tree.ligerTree(t),i.treeManager=i.tree.ligerGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(e){var t=this.options;if(null!=e){var i=this.treeSelectInit(e);this._changeValue(e,i,t.initIsTriggerEvent)}},treeSelectInit:function(t){var i=this,r=this.options;if(null!=t){var n="",o=t.toString().split(r.split);return e(o).each(function(e,t){i.treeManager.selectNode(t.toString(),!1),n+=i.treeManager.getTextByID(t),e<o.length-1&&(n+=r.split)}),n}},setGrid:function(t){var i=this,r=this.options;if(!i.grid){r.hideOnLoseFocus=!!r.hideGridOnLoseFocus,this.clearContent(),i.selectBox.addClass("l-box-select-lookup"),i.selectBox.table.remove();var n=e("div:first",i.selectBox),o=e("<div></div>").appendTo(n),l=e("<div></div>").appendTo(n);if(i.conditionPanel=o,r.condition){var a=e.extend({labelWidth:60,space:20,width:r.selectBoxWidth},r.condition);i.condition=o.ligerForm(a)}else o.remove();t=e.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0,allowUnSelectRow:!0},t,{width:"100%",height:i.getGridHeight(),inWindow:!1,parms:r.parms,isChecked:function(t){var n=i.getValue();return!!n&&(!(!r.valueField||!t[r.valueField])&&-1!=e.inArray(t[r.valueField].toString(),n.split(r.split)))}}),i.grid=i.gridManager=l.ligerGrid(t),i.grid.bind("afterShowData",function(){i.updateSelectBoxPosition()});var s=[],d=function(){var n=[],o=[];e(s).each(function(e,t){n.push(t[r.valueField]),o.push(t[r.textField])}),t.checkbox?i.selected=s:s.length?i.selected=s[0]:i.selected=null,i._changeValue(n.join(r.split),o.join(r.split),!0),i.trigger("gridSelect",{value:n.join(r.split),text:o.join(r.split),data:s})};if(t.checkbox){var u=function(e,t){e&&function(e){for(var t=s.length-1;t>=0;t--)if(s[t][r.valueField]==e[r.valueField])return;s.push(e)}(t),!e&&function(e){for(var t=s.length-1;t>=0;t--)s[t][r.valueField]==e[r.valueField]&&s.splice(t,1)}(t)};i.grid.bind("CheckAllRow",function(t){e(i.grid.rows).each(function(e,i){u(t,i)}),d()}),i.grid.bind("CheckRow",function(e,t){u(e,t),d()})}else i.grid.bind("SelectRow",function(e){s=[e],d(),i._toggleSelectBox(!0)}),i.grid.bind("UnSelectRow",function(){s=[],d()});if(i.bind("show",function(){i.grid.refreshSize()}),i.bind("clear",function(){s=[],i.grid.selecteds=[],i.grid._showData()}),r.condition){var c=e('<li style="margin-right:9px"><div></div></li>'),h=e('<li style="margin-right:9px;float:right"><div></div></li>');e("ul:first",o).append(c).append(h).after('<div class="l-clear"></div>'),e("div",c).ligerButton({text:r.Search,width:40,click:function(){var n=i.condition.toConditions();r.conditionSearchClick?r.conditionSearchClick({grid:i.grid,rules:n}):i.grid.get("url")?(i.grid.setParm(t.conditionParmName||"condition",e.ligerui.toJSON(n)),i.grid.reload()):i.grid.loadData(e.ligerFilter.getFilterFunction(n))}}),e("div",h).ligerButton({text:"关闭",width:40,click:function(){i.selectBox.hide()}})}i.grid.refreshSize()}},getGridHeight:function(e){this.options;return e=e||this.selectBox.height(),e-=this.conditionPanel.height()},_getValue:function(){return this.options.isTextBoxMode?this.inputText.val():e(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var r=e.inArray(i,t.grid.rows);r-1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[r-1]))}else t.grid.select(t.grid.rows[0])}else{var n=t.selectBox.table.find("td.l-over").attr("index");if(void 0==n||"0"==n)return;n=parseInt(n)-1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+n+"]").addClass("l-over"),t._scrollAdjust(n)}},downFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var r=e.inArray(i,t.grid.rows);r+1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[r+1]))}else t.grid.select(t.grid.rows[0])}else{var n=t.selectBox.table.find("td.l-over").attr("index");if(n==t.data.length-1)return;n=void 0==n?0:parseInt(n)+1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+n+"]").addClass("l-over"),t._scrollAdjust(n)}},_scrollAdjust:function(t){var i=this,r=(this.options,e(".l-box-select-inner",i.selectBox).height()),n=e(".l-box-select-inner table",i.selectBox).height();if(!(n<=r)){parseInt(n/r);var o=n/i.data.length,l=parseInt((t+1)*o/r)+((t+1)*o%r?1:0);e(".l-box-select-inner",i.selectBox).scrollTop((l-1)*r)}},getText:function(){return this.inputText.val()},setText:function(e){this.options.isTextBoxMode||this.inputText.val(e)},updateStyle:function(){this.options.initValue=this._getValue(),this._dataInit()},_dataInit:function(){var t=this,i=this.options,r=null;if(null!=i.initValue&&null!=i.initText&&t._changeValue(i.initValue,i.initText),null!=i.initValue){if(r=i.initValue,i.tree)r&&t.selectValueByTree(r);else if(t.data){n=t.findTextByValue(r);t._changeValue(r,n)}}else if(""!=t.valueField.val())if(r=t.valueField.val(),i.tree)r&&t.selectValueByTree(r);else if(t.data){var n=t.findTextByValue(r);t._changeValue(r,n)}i.isShowCheckBox?e(":checkbox",t.selectBox).each(function(){var t=null,n=e(this);if(null!=(t="div"==n.parent().get(0).tagName.toLowerCase()?n.parent().parent():n.parent())){e(".l-checkbox",t).removeClass("l-checkbox-checked"),n[0].checked=!1;var o=(r||"").toString().split(i.split);e(o).each(function(i,o){null!=r&&o==t.attr("value")&&(e(".l-checkbox",t).addClass("l-checkbox-checked"),n[0].checked=!0)})}}):e("table tr",t.selectBox).find("td:first").each(function(){null!=r&&r==e(this).attr("value")?e(this).addClass("l-selected"):e(this).removeClass("l-selected")})},_changeValue:function(t,i,r){var n=this,o=this.options;n.valueField.val(t),o&&o.render?n.inputText.val(o.render(t,i)):n.inputText.val(i),n.select&&e("option",n.select).each(function(){e(this).attr("selected",e(this).attr("value")==t)}),n.selectedValue=t,n.selectedText=i,n.inputText.trigger("change"),r&&i&&n.inputText.focus();var l=null;if(t&&"string"==typeof t&&t.indexOf(o.split)>-1){l=[];var a=t.split(o.split);e(a).each(function(e,t){l.push(n.getRow(t))})}else t&&(l=n.getRow(t));r&&n.trigger("selected",[t,i,l])},_checkboxUpdateValue:function(){var t=this.options,i="",r="";e("input:checked",this.selectBox).each(function(){var n=null;(n="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent())&&(i+=n.attr("value")+t.split,r+=n.attr("text")+t.split)}),i.length>0&&(i=i.substr(0,i.length-1)),r.length>0&&(r=r.substr(0,r.length-1)),this._changeValue(i,r)},loadDetail:function(t,i){var r=this.options,n=e.isFunction(r.detailParms)?r.detailParms.call(this):r.detailParms;n[r.detailPostIdField||"id"]=t,"application/json"==r.ajaxContentType&&(n=liger.toJSON(n));var o={type:r.ajaxType,url:r.detailUrl,data:n,cache:!0,dataType:"json",beforeSend:r.ajaxBeforeSend,complete:r.ajaxComplete,success:function(t){var n=e.isFunction(r.detailDataGetter)?r.detailDataGetter(t):t;n=r.detailDataParmName?n[r.detailDataParmName]:n,i&&i(n)}};r.ajaxContentType&&(o.contentType=r.ajaxContentType),e.ajax(o)},enabledLoadDetail:function(){var e=this.options;return!(!e.detailUrl||!e.detailEnabled)},_addClickEven:function(){var t=this,i=this.options;e(".l-table-nocheckbox td",t.selectBox).click(function(){function r(){if(t.hasBind("beforeSelect")&&0==t.trigger("beforeSelect",[o,s,a]))return i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide(),!1;t.selected=a,e(this).hasClass("l-selected")?i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide():(e(".l-selected",t.selectBox).removeClass("l-selected"),n.addClass("l-selected"),t.select&&t.select[0].selectedIndex!=l&&(t.select[0].selectedIndex=l,t.select.trigger("change")),i.slide?(t.boxToggling=!0,t.selectBox.hide("fast",function(){t.boxToggling=!1})):t.selectBox.hide(),t.lastInputText=s,t._changeValue(o,s,!0))}var n=e(this),o=n.attr("value"),l=parseInt(e(this).attr("index")),a=t.data[l],s=n.attr("text");n.parent().hasClass("rowreadonly")||(t.enabledLoadDetail()?t.loadDetail(o,function(e){t.data[l]=a=e,r()}):r())})},updateSelectBoxPosition:function(){var t=this,i=this.options;if(i&&i.absolute){var r=e(document).height();i.alwayShowInTop||Number(t.wrapper.offset().top+1+t.wrapper.outerHeight()+t.selectBox.height())>r&&r>Number(t.selectBox.height()+1)?t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top-1-t.selectBox.height()+(i.selectBoxPosYDiff||0)}):t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()+(i.selectBoxPosYDiff||0)}),i.alwayShowInDown&&t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()})}else{var n=t.wrapper.offset().top-e(window).scrollTop(),o=t.selectBox.height()+textHeight+4;n+o>e(window).height()&&n>o&&t.selectBox.css("marginTop",-1*(t.selectBox.height()+textHeight+5)+(i.selectBoxPosYDiff||0))}},_toggleSelectBox:function(t){var i=this,r=this.options;if(i&&r){for(var n=e.ligerui.find(e.ligerui.controls.ComboBox),o=0,l=n.length;o<l;o++){(a=n[o]).id!=i.id&&null!=a.selectBox.is(":visible")&&a.selectBox.is(":visible")&&a.selectBox.hide()}for(var o=0,l=(n=e.ligerui.find(e.ligerui.controls.DateEditor)).length;o<l;o++){var a=n[o];a.id!=i.id&&null!=a.dateeditor.is(":visible")&&a.dateeditor.is(":visible")&&a.dateeditor.hide()}i.wrapper.height();if(i.boxToggling=!0,t)r.slide?i.selectBox.slideToggle("fast",function(){i.boxToggling=!1}):(i.selectBox.hide(),i.boxToggling=!1);else if(i.updateSelectBoxPosition(),r.slide)i.selectBox.slideToggle("fast",function(){if(i.boxToggling=!1,!r.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var t=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:t})}});else if(i._selectBoxShow(),i.boxToggling=!1,!i.tree&&!i.grid&&!r.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var s=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:s})}i.isShowed=i.selectBox.is(":visible"),i.trigger("toggle",[t]),i.trigger(t?"hide":"show")}},_selectBoxShow:function(){var e=this,t=this.options;t.readonly||(t.grid||t.tree?e.selectBox.show():e.selectBox.table.find("tr").length||t.selectBoxRender&&e.selectBoxInner.html()?e.selectBox.show():e.selectBox.hide())},_highLight:function(e,t){if(!e)return e;var i=e.indexOf(t);return-1==i?e:e.substring(0,i)+"<span class='l-highLight'>"+t+"</span>"+e.substring(t.length+i)},_setAutocomplete:function(t){var i=this,r=this.options;t&&(r.readonly||(i.inputText.removeAttr("readonly"),i.lastInputText=i.inputText.val(),i.inputText.keyup(function(n){38!=n.keyCode&&40!=n.keyCode&&13!=n.keyCode&&(this._acto&&clearTimeout(this._acto),this._acto=setTimeout(function(){if(i.lastInputText!=i.inputText.val()){var n=i.inputText.val();if(n?n=n.replace(/(^\s*)|(\s*$)/g,""):(r.initValue="",i.valueField.val("")),i.lastInputText=i.inputText.val(),e.isFunction(t))t.call(i,{key:n,show:function(){i._selectBoxShow()}});else{if(!r.autocompleteAllowEmpty&&!n)return i.clear(),void i.selectBox.hide();r.url?(i.setParm("key",n),i.setUrl(r.url,function(){i._selectBoxShow()})):r.grid&&(i.grid.setParm("key",n),i.grid.reload()),this._acto=null}}},300))})))}}),e.ligerui.controls.ComboBox.prototype.setValue=e.ligerui.controls.ComboBox.prototype.selectValue,e.ligerui.controls.ComboBox.prototype.setInputValue=e.ligerui.controls.ComboBox.prototype._changeValue,e(document).unbind("keydown.ligercombobox"),e(document).bind("keydown.ligercombobox",function(t){function i(){o.selectBox.is(":visible")||o.selectBox.show(),o.downFocus()}function r(){a?(o._changeValue(a[l.valueField],a[l.textField],!0),o.selectBox.hide(),o.trigger("textBoxKeyEnter",[{rowdata:a}])):(o._changeValue(d,s.attr("text"),!0),o.selectBox.hide(),o.trigger("textBoxKeyEnter",[{element:s.get(0)}]))}var n=e("input:focus");if(n.length&&n.attr("data-comboboxid")){var o=liger.get(n.attr("data-comboboxid"));if(!o)return;var l=o.options;if(!o.get("keySupport"))return;if(38==t.keyCode)o.upFocus();else if(40==t.keyCode)o.hasBind("textBoxKeyDown")?o.trigger("textBoxKeyDown",[{callback:function(){i()}}]):i();else if(13==t.keyCode){if(!o.selectBox.is(":visible"))return;var a=null;o.grid&&(a=o.grid.getSelected());var s=o.selectBox.table.find("td.l-over");if(a||s.length){var d=s.attr("value");a&&a.ID&&(d=a.ID),o.enabledLoadDetail()?o.loadDetail(d,function(e){if(!a){var t=o.getRowIndex(d);if(-1==t)return;o.data=o.data||[],o.data[t]=o.selected=e}r()}):r()}}}})}(jQuery),function(e){e.fn.ligerCheckBox=function(t){return e.ligerui.run.call(this,"ligerCheckBox",arguments)},e.fn.ligerGetCheckBoxManager=function(){return e.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)},e.ligerDefaults.CheckBox={disabled:!1,readonly:!1},e.ligerMethos.CheckBox={},e.ligerui.controls.CheckBox=function(t,i){e.ligerui.controls.CheckBox.base.constructor.call(this,t,i)},e.ligerui.controls.CheckBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){return e.ligerMethos.CheckBox},_render:function(){var t=this,i=this.options;t.input=e(t.element),t.link=e('<a class="l-checkbox"></a>'),t.wrapper=t.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.link.click(function(){return!t.input.attr("disabled")&&!t.input.attr("readonly")&&(!i.disabled&&!i.readonly&&(0!=t.trigger("beforeClick",[t.element])&&(e(this).hasClass("l-checkbox-checked")?t._setValue(!1):t._setValue(!0),void t.input.trigger("change"))))}),t.wrapper.hover(function(){i.disabled||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),this.set(i),this.updateStyle()},_setCss:function(e){this.wrapper.css(e)},_setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("l-checkbox-checked")):(t.input[0].checked=!1,t.link.removeClass("l-checkbox-checked"))},_setDisabled:function(e){e?(this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"))},_getValue:function(){return this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")}})}(jQuery),function(e){var t=e.ligerui;e(".l-dialog-btn").live("mouseover",function(){e(this).addClass("l-dialog-btn-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-btn-over")}),e(".l-dialog-tc .l-dialog-close").live("mouseover",function(){e(this).addClass("l-dialog-close-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-close-over")}),e.ligerDialog=function(){return t.run.call(null,"ligerDialog",arguments,{isStatic:!0})},e.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/",e.ligerDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,isDrag:!0,width:280,height:null,content:"",target:null,url:null,urlParms:null,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,isResize:!1,allowClose:!0,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:!0,show:!0,title:"提示",showMax:!1,showToggle:!1,showMin:!1,slide:!e.browser.msie,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1},e.ligerDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",waittingMessage:"正在等待中,请稍候..."},e.ligerMethos.Dialog=e.ligerMethos.Dialog||{},t.controls.Dialog=function(e){t.controls.Dialog.base.constructor.call(this,null,e)},t.controls.Dialog.ligerExtend(t.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return e.ligerMethos.Dialog},_render:function(){function i(){var t=0,i=0,o=n.width||r.dialog.width();1==n.slide&&(n.slide="fast"),null!=n.left?t=n.left:n.left=t=.5*(e(window).width()-o),null!=n.top?i=n.top:n.top=i=.5*(e(window).height()-r.dialog.height())+e(window).scrollTop()-10,t<0&&(n.left=t=0),i<0&&(n.top=i=0),r.dialog.css({left:t,top:i})}var r=this,n=this.options,o="";r.set(n,!0);var l=e('<div class="l-dialog"><table class="l-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="l-dialog-tl"></td><td class="l-dialog-tc"><div class="l-dialog-tc-inner"><div class="l-dialog-icon"></div><div class="l-dialog-title"></div><div class="l-dialog-winbtns"><div class="l-dialog-winbtn l-dialog-close"></div></div></div></td><td class="l-dialog-tr"></td></tr><tr><td class="l-dialog-cl"></td><td class="l-dialog-cc"><div class="l-dialog-body"><div class="l-dialog-image"></div> <div class="l-dialog-content"></div><div class="l-dialog-buttons"><div class="l-dialog-buttons-inner"></div></td><td class="l-dialog-cr"></td></tr><tr><td class="l-dialog-bl"></td><td class="l-dialog-bc"></td><td class="l-dialog-br"></td></tr></tbody></table></div>');if(e("body").append(l),r.dialog=l,2==n.layoutMode&&l.find("td.l-dialog-tl,td.l-dialog-cl,td.l-dialog-bl,td.l-dialog-tr,td.l-dialog-cr,td.l-dialog-br").remove(),r.element=l[0],r.dialog.body=e(".l-dialog-body:first",r.dialog),r.dialog.header=e(".l-dialog-tc-inner:first",r.dialog),r.dialog.winbtns=e(".l-dialog-winbtns:first",r.dialog.header),r.dialog.buttons=e(".l-dialog-buttons:first",r.dialog),r.dialog.content=e(".l-dialog-content:first",r.dialog),r.set(n,!1),0==n.allowClose&&e(".l-dialog-close",r.dialog).remove(),(n.target||n.url||"none"==n.type)&&(n.type=null,r.dialog.addClass("l-dialog-win")),n.cls&&r.dialog.addClass(n.cls),n.id&&r.dialog.attr("id",n.id),r.mask(),n.isDrag&&r._applyDrag(),n.isResize&&r._applyResize(),n.type?r._setImage():(e(".l-dialog-image",r.dialog).remove(),r.dialog.content.addClass("l-dialog-content-noimage")),n.contentCls&&r.dialog.content.addClass(n.contentCls),n.show||(r.unmask(),r.dialog.hide()),n.target)r.dialog.content.prepend(n.target),e(n.target).show();else if(n.url){var a=e.isFunction(n.url)?n.url.call(r):n.url,s=e.isFunction(n.urlParms)?n.urlParms.call(r):n.urlParms;if(n.timeParmName&&((s=s||{})[n.timeParmName]=(new Date).getTime()),s)for(var d in s)a+=-1==a.indexOf("?")?"?":"&",a+=d+"="+s[d];if(n.load)r.dialog.body.load(a,function(){r._saveStatus(),r.trigger("loaded")});else{r.jiframe=e("<iframe frameborder='0'></iframe>");var u=n.name?n.name:"ligerwindow"+(new Date).getTime();r.jiframe.attr("name",u),r.jiframe.attr("id",u),r.dialog.content.prepend(r.jiframe),r.dialog.content.addClass("l-dialog-content-nopadding l-dialog-content-frame"),setTimeout(function(){0==r.dialog.body.find(".l-dialog-loading:first").length&&r.dialog.body.append("<div class='l-dialog-loading' style='display:block;'></div>");var t=e(".l-dialog-loading:first",r.dialog.body);r.jiframe[0].dialog=r,r.jiframe.attr("src",a).bind("load.dialog",function(){t.hide(),r.trigger("loaded")}),r.frame=window.frames[r.jiframe.attr("name")]},0),o="jquery_ligerui_"+(new Date).getTime(),r.tmpInput=e("<input></input>"),r.tmpInput.attr("id",o),r.dialog.content.prepend(r.tmpInput)}}n.opener&&(r.dialog.opener=n.opener),n.buttons?e(n.buttons).each(function(t,i){var n=e('<div class="l-dialog-btn"><div class="l-dialog-btn-l"></div><div class="l-dialog-btn-r"></div><div class="l-dialog-btn-inner"></div></div>');e(".l-dialog-btn-inner",n).html(i.text),e(".l-dialog-buttons-inner",r.dialog.buttons).prepend(n),i.width&&n.width(i.width),i.onclick&&n.click(function(){i.onclick(i,r,t)}),i.cls&&n.addClass(i.cls)}):r.dialog.buttons.remove(),e(".l-dialog-buttons-inner",r.dialog.buttons).append("<div class='l-clear'></div>"),e(".l-dialog-title",r.dialog).bind("selectstart",function(){return!1}),r.dialog.click(function(){t.win.setFront(r)}),e(".l-dialog-tc .l-dialog-close",r.dialog).click(function(){n.isHidden?r.hide():r.close()}),n.fixedType||("auto"==n.width?setTimeout(function(){i()},100):i()),r.show(),e("body").bind("keydown.dialog",function(e){var t=e.which;13==t?r.enter():27==t&&r.esc()}),r._updateBtnsWidth(),r._saveStatus(),r._onReisze(),""!=o&&(e("#"+o).focus(),e("#"+o).remove())},_borderX:12,_borderY:32,doMax:function(i){var r=this,n=this.options,o=e(window).width(),l=e(window).height(),a=0;t.win.taskbar&&(l-=t.win.taskbar.outerHeight(),t.win.top&&(a+=t.win.taskbar.outerHeight())),i?(r.dialog.body.animate({width:o-r._borderX},n.slide),r.dialog.animate({left:0,top:a},n.slide),r.dialog.content.animate({height:l-r._borderY-r.dialog.buttons.outerHeight()},n.slide,function(){r._onReisze()})):(r.set({width:o,height:l,left:0,top:a}),r._onReisze())},max:function(){var t=this,i=this.options;t.winmax&&(t.winmax.addClass("l-dialog-recover"),t.doMax(i.slide),t.wintoggle&&(t.wintoggle.hasClass("l-dialog-extend")?t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled"):t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled")),t.resizable&&t.resizable.set({disabled:!0}),t.draggable&&t.draggable.set({disabled:!0}),t.maximum=!0,e(window).bind("resize.dialogmax",function(){t.doMax(!1)}))},recover:function(){var t=this,i=this.options;t.winmax&&(t.winmax.removeClass("l-dialog-recover"),i.slide?(t.dialog.body.animate({width:t._width-t._borderX},i.slide),t.dialog.animate({left:t._left,top:t._top},i.slide),t.dialog.content.animate({height:t._height-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:t._width,height:t._height,left:t._left,top:t._top}),t._onReisze()),t.wintoggle&&t.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled"),e(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),t.draggable&&t.draggable.set({disabled:!1}),t.maximum=!1},min:function(){var e=this,i=this.options;if(i.minIsHide)e.dialog.hide();else{var r=t.win.getTask(this);i.slide?(e.dialog.body.animate({width:1},i.slide),r.y=r.offset().top+r.height(),r.x=r.offset().left+r.width()/2,e.dialog.animate({left:r.x,top:r.y},i.slide,function(){e.dialog.hide()})):e.dialog.hide()}e.unmask(),e.minimize=!0,e.actived=!1},active:function(){var i=this,r=this.options;if(i.minimize){var n=i._width,o=i._height,l=i._left,a=i._top;i.maximum&&(n=e(window).width(),o=e(window).height(),l=a=0,t.win.taskbar&&(o-=t.win.taskbar.outerHeight(),t.win.top&&(a+=t.win.taskbar.outerHeight()))),r.slide?(i.dialog.body.animate({width:n-i._borderX},r.slide),i.dialog.animate({left:l,top:a},r.slide)):i.set({width:n,height:o,left:l,top:a})}i.actived=!0,i.minimize=!1,t.win.setFront(i),i.show()},toggle:function(){var e=this;this.options;e.wintoggle&&(e.wintoggle.hasClass("l-dialog-extend")?e.extend():e.collapse())},collapse:function(e){var t=this,i=this.options;t.wintoggle&&(i.slide&&0!=e?t.dialog.content.animate({height:1},i.slide):t.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),t.wintoggle.addClass("l-dialog-extend"))},extend:function(){var e=this,t=this.options;if(e.wintoggle){var i=e._height-e._borderY-e.dialog.buttons.outerHeight();t.slide?e.dialog.content.animate({height:i},t.slide):e.dialog.content.height(i),this.resizable&&this.resizable.set({disabled:!1}),e.wintoggle.removeClass("l-dialog-extend")}},_updateBtnsWidth:function(){var t=e(">div",this.dialog.winbtns).length;this.dialog.winbtns.width(22*t)},_setLeft:function(e){this.dialog&&null!=e&&this.dialog.css({left:e})},_setTop:function(e){this.dialog&&null!=e&&this.dialog.css({top:e})},_setWidth:function(e){this.dialog&&e>=this._borderX&&this.dialog.body.width(e-this._borderX)},_setHeight:function(e){var t=this,i=this.options;if(this.dialog)if("auto"==e)t.dialog.content.height("auto");else if(e>=this._borderY){var r=e-this._borderY-t.dialog.buttons.outerHeight();if(0==t.trigger("ContentHeightChange",[r]))return;i.load?t.dialog.body.height(r):t.dialog.content.height(r),t.trigger("ContentHeightChanged",[r])}},_setShowMax:function(t){var i=this;this.options;t?i.winmax||(i.winmax=e('<div class="l-dialog-winbtn l-dialog-max"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-recover")?e(this).addClass("l-dialog-recover-over"):e(this).addClass("l-dialog-max-over")},function(){e(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){e(this).hasClass("l-dialog-recover")?i.recover():i.max()})):i.winmax&&(i.winmax.remove(),i.winmax=null),i._updateBtnsWidth()},_setShowMin:function(i){var r=this,n=this.options;i?r.winmin||(r.winmin=e('<div class="l-dialog-winbtn l-dialog-min"></div>').appendTo(r.dialog.winbtns).hover(function(){e(this).addClass("l-dialog-min-over")},function(){e(this).removeClass("l-dialog-min-over")}).click(function(){r.min()}),n.minIsHide||t.win.addTask(r)):r.winmin&&(r.winmin.remove(),r.winmin=null),r._updateBtnsWidth()},_setShowToggle:function(t){var i=this;this.options;t?i.wintoggle||(i.wintoggle=e('<div class="l-dialog-winbtn l-dialog-collapse"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-toggle-disabled")||(e(this).hasClass("l-dialog-extend")?e(this).addClass("l-dialog-extend-over"):e(this).addClass("l-dialog-collapse-over"))},function(){e(this).removeClass("l-dialog-extend-over l-dialog-collapse-over")}).click(function(){if(!e(this).hasClass("l-dialog-toggle-disabled"))if(i.wintoggle.hasClass("l-dialog-extend")){if(0==i.trigger("extend"))return;i.wintoggle.removeClass("l-dialog-extend"),i.extend(),i.trigger("extended")}else{if(0==i.trigger("collapse"))return;i.wintoggle.addClass("l-dialog-extend"),i.collapse(),i.trigger("collapseed")}})):i.wintoggle&&(i.wintoggle.remove(),i.wintoggle=null)},enter:function(){var e,t=this.options;void 0!=t.closeWhenEnter?e=t.closeWhenEnter:"warn"!=t.type&&"error"!=t.type&&"success"!=t.type&&"question"!=t.type||(e=!0),e&&this.close()},esc:function(){},_removeDialog:function(){function t(){var t=e("iframe",i.dialog);if(t.length){var r=t[0];if(r.src="about:blank",r.contentWindow&&r.contentWindow.document)try{r.contentWindow.document.write("")}catch(e){}e.browser.msie&&CollectGarbage(),t.remove()}i.dialog.remove()}var i=this,r=this.options;r.showType&&r.fixedType?i.dialog.animate({bottom:-1*r.height},function(){t()}):t()},close:function(){var e=this;this.options;0!=e.trigger("Close")&&(e.doClose(),e.trigger("Closed"))},doClose:function(){t.win.removeTask(this),e.ligerui.remove(this),this.unmask(),this._removeDialog(),e("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(e){this.dialog.content.html(e)},_setTitle:function(t){this.options;t&&e(".l-dialog-title",this.dialog).html(t)},_hideDialog:function(){var e=this,t=this.options;t.showType&&t.fixedType?e.dialog.animate({bottom:-1*t.height},function(){e.dialog.hide()}):e.dialog.hide()},hidden:function(){var e=this;t.win.removeTask(e),e.dialog.hide(),e.unmask()},show:function(){var t=this,i=this.options;t.mask(),i.fixedType?i.showType?(t.dialog.css({bottom:-1*i.height}).addClass("l-dialog-fixed"),t.dialog.show().animate({bottom:0})):t.dialog.show().css({bottom:0}).addClass("l-dialog-fixed"):t.dialog.show(),e.ligerui.win.setFront.ligerDefer(e.ligerui.win,100,[t])},setUrl:function(e){this._setUrl(e)},_saveStatus:function(){var e=this;e._width=e.dialog.body.width(),e._height=e.dialog.body.height();var t=0,i=0;isNaN(parseInt(e.dialog.css("top")))||(t=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(i=parseInt(e.dialog.css("left"))),e._top=t,e._left=i},_applyDrag:function(){var i=this,r=this.options;e.fn.ligerDrag&&(i.draggable=i.dialog.ligerDrag({handler:".l-dialog-title",animate:!1,onStartDrag:function(){t.win.setFront(i);var r=e("<div class='l-dragging-mask' style='display:block'></div>").height(i.dialog.height());i.dialog.append(r),i.dialog.content.addClass("l-dialog-content-dragging")},onDrag:function(e,t){if((t.pageY||t.screenY)<0)return!1},onStopDrag:function(){if(i.dialog.find("div.l-dragging-mask:first").remove(),i.dialog.content.removeClass("l-dialog-content-dragging"),r.target){var n=t.find(e.ligerui.controls.DateEditor),o=t.find(e.ligerui.controls.ComboBox);e(e.merge(n,o)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}i._saveStatus()}}))},_onReisze:function(){var t=this.options;if(t.target||t.url){var i=e(t.target).liger();if(i||(i=e(t.target).find(":first").liger()),!i)return;var r=this.dialog.content.height(),n=this.dialog.content.width();i.trigger("resize",[{width:n,height:r}])}},_applyResize:function(){var t=this;this.options;e.fn.ligerResizable&&(t.resizable=t.dialog.ligerResizable({onStopResize:function(e,i){var r=0,n=0;return isNaN(parseInt(t.dialog.css("top")))||(r=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(n=parseInt(t.dialog.css("left"))),e.diffLeft&&t.set({left:n+e.diffLeft}),e.diffTop&&t.set({top:r+e.diffTop}),e.newWidth&&(t.set({width:e.newWidth}),t.dialog.body.css({width:e.newWidth-t._borderX})),e.newHeight&&t.set({height:e.newHeight}),t._onReisze(),t._saveStatus(),t.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var t=this,i=this.options;if(i.type){var r={paddingLeft:74,paddingRight:15,paddingBottom:30};"success"==i.type||"donne"==i.type||"ok"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-donne").show(),t.dialog.content.css(r)):"error"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-error").show(),t.dialog.content.css(r)):"warn"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-warn").show(),t.dialog.content.css(r)):"question"==i.type&&(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-question").show(),t.dialog.content.css(r))}}}),t.controls.Dialog.prototype.hide=t.controls.Dialog.prototype.hidden,e.ligerDialog.open=function(t){return e.ligerDialog(t)},e.ligerDialog.close=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){var r=e[i];r.destroy.ligerDefer(r,5)}t.win.unmask()},e.ligerDialog.show=function(i){var r=t.find(t.controls.Dialog.prototype.__getType());if(r.length)for(var n in r)return void r[n].show();return e.ligerDialog(i)},e.ligerDialog.hide=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){e[i].hide()}},e.ligerDialog.tip=function(t){return t=e.extend({showType:"slide",width:240,modal:!1,height:100},t||{}),e.extend(t,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog.open(t)},e.ligerDialog.alert=function(t,i,r,n,o){t=t||"","function"==typeof i?(n=i,r=null):"function"==typeof r&&(n=r);return p={content:t,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:function(e,t,i){t.close(),n&&n(e,t,i)}}]},"string"==typeof i&&""!=i&&(p.title=i),"string"==typeof r&&""!=r&&(p.type=r),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},o||{}),e.ligerDialog(p)},e.ligerDialog.confirm=function(t,i,r){"function"==typeof i&&(r=i,type=null);var n=function(e,t){t.close(),r&&r("ok"==e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:n,type:"ok",cls:"l-dialog-btn-ok"},{text:e.ligerDefaults.DialogString.no,onclick:n,type:"no",cls:"l-dialog-btn-no"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog(p)},e.ligerDialog.warning=function(t,i,r,n){"function"==typeof i&&(r=i,type=null);var o=function(e,t){t.close(),r&&r(e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:o,type:"yes"},{text:e.ligerDefaults.DialogString.no,onclick:o,type:"no"},{text:e.ligerDefaults.DialogString.cancel,onclick:o,type:"cancel"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},n||{}),e.ligerDialog(p)},e.ligerDialog.waitting=function(t){return t=t||e.ligerDefaults.Dialog.waittingMessage,e.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+t+"</div>",allowClose:!1})},e.ligerDialog.closeWaitting=function(){var e=t.find(t.controls.Dialog);for(var i in e){var r=e[i];r.dialog.hasClass("l-dialog-waittingdialog")&&r.close()}},e.ligerDialog.success=function(t,i,r,n){return e.ligerDialog.alert(t,i,"success",r,n)},e.ligerDialog.error=function(t,i,r,n){return e.ligerDialog.alert(t,i,"error",r,n)},e.ligerDialog.warn=function(t,i,r,n){return e.ligerDialog.alert(t,i,"warn",r,n)},e.ligerDialog.question=function(t,i,r){return e.ligerDialog.alert(t,i,"question",null,r)},e.ligerDialog.prompt=function(t,i,r,n){var o=e('<input type="text" class="l-dialog-inputtext"/>');"function"==typeof r&&(n=r),"function"==typeof i?n=i:"boolean"==typeof i&&(r=i),"boolean"==typeof r&&r&&(o=e('<textarea class="l-dialog-textarea"></textarea>')),"string"!=typeof i&&"int"!=typeof i||o.val(i);var l=function(e,t,i){t.close(),n&&n("yes"==e.type,o.val())};return p={title:t,target:o,width:320,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:l,type:"yes"},{text:e.ligerDefaults.DialogString.cancel,onclick:l,type:"cancel"}]},e.ligerDialog(p)}}(jQuery),function($){$.fn.ligerDateEditor=function(){return $.ligerui.run.call(this,"ligerDateEditor",arguments)},$.fn.ligerGetDateEditorManager=function(){return $.ligerui.run.call(this,"ligerGetDateEditorManager",arguments)},$.ligerDefaults.DateEditor={format:"yyyy-MM-dd hh:mm",width:null,showTime:!1,onChangeDate:!1,absolute:!0,cancelable:!0,readonly:!1},$.ligerDefaults.DateEditorString={dayMessage:["日","一","二","三","四","五","六"],monthMessage:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],todayMessage:"今天",closeMessage:"关闭"},$.ligerMethos.DateEditor={},$.ligerui.controls.DateEditor=function(e,t){$.ligerui.controls.DateEditor.base.constructor.call(this,e,t)},$.ligerui.controls.DateEditor.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"DateEditor"},__idPrev:function(){return"DateEditor"},_extendMethods:function(){return $.ligerMethos.DateEditor},_render:function(){var e=this,t=this.options;if(!t.showTime&&t.format.indexOf(" hh:mm")>-1&&(t.format=t.format.replace(" hh:mm","")),"input"==this.element.tagName.toLowerCase()&&"text"==this.element.type){e.inputText=$(this.element),e.inputText.hasClass("l-text-field")||e.inputText.addClass("l-text-field"),e.link=$('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),e.text=e.inputText.wrap('<div class="l-text l-text-date"></div>').parent(),e.text.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),e.text.append(e.link),e.textwrapper=e.text.wrap('<div class="l-text-wrapper"></div>').parent();var i="";i+="<div class='l-box-dateeditor' style='display:none'>",i+="    <div class='l-box-dateeditor-header'>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>",i+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>",i+="    </div>",i+="    <div class='l-box-dateeditor-body'>",i+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>",i+="            <thead>",i+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </thead>",i+="            <tbody>",i+="                <tr class='l-first'><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </tbody>",i+="        </table>",i+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="    </div>",i+="    <div class='l-box-dateeditor-toolbar'>",i+="        <div class='l-box-dateeditor-time'></div>",i+="        <div class='l-button l-button-today'></div>",i+="        <div class='l-button l-button-close'></div>",i+="        <div class='l-clear'></div>",i+="    </div>",i+="</div>",e.dateeditor=$(i),t.absolute?e.dateeditor.appendTo("body").addClass("l-box-dateeditor-absolute"):e.textwrapper.append(e.dateeditor),e.header=$(".l-box-dateeditor-header",e.dateeditor),e.body=$(".l-box-dateeditor-body",e.dateeditor),e.toolbar=$(".l-box-dateeditor-toolbar",e.dateeditor),e.body.thead=$("thead",e.body),e.body.tbody=$("tbody",e.body),e.body.monthselector=$(".l-box-dateeditor-monthselector",e.body),e.body.yearselector=$(".l-box-dateeditor-yearselector",e.body),e.body.hourselector=$(".l-box-dateeditor-hourselector",e.body),e.body.minuteselector=$(".l-box-dateeditor-minuteselector",e.body),e.toolbar.time=$(".l-box-dateeditor-time",e.toolbar),e.toolbar.time.hour=$("<a></a>"),e.toolbar.time.minute=$("<a></a>"),e.buttons={btnPrevYear:$(".l-box-dateeditor-header-prevyear",e.header),btnNextYear:$(".l-box-dateeditor-header-nextyear",e.header),btnPrevMonth:$(".l-box-dateeditor-header-prevmonth",e.header),btnNextMonth:$(".l-box-dateeditor-header-nextmonth",e.header),btnYear:$(".l-box-dateeditor-header-year",e.header),btnMonth:$(".l-box-dateeditor-header-month",e.header),btnToday:$(".l-button-today",e.toolbar),btnClose:$(".l-button-close",e.toolbar)};var r=new Date;e.now={year:r.getFullYear(),month:r.getMonth()+1,day:r.getDay(),date:r.getDate(),hour:r.getHours(),minute:r.getMinutes()},e.currentDate={year:r.getFullYear(),month:r.getMonth()+1,day:r.getDay(),date:r.getDate(),hour:r.getHours(),minute:r.getMinutes()},e.selectedDate=null,e.usedDate=null,$("td",e.body.thead).each(function(e,i){$(i).html(t.dayMessage[e])}),$("li",e.body.monthselector).each(function(e,i){$(i).html(t.monthMessage[e])}),e.buttons.btnToday.html(t.todayMessage),e.buttons.btnClose.html(t.closeMessage),t.showTime&&(e.toolbar.time.show(),e.toolbar.time.append(e.toolbar.time.hour).append(":").append(e.toolbar.time.minute),$("li",e.body.hourselector).each(function(e,t){var i=e;e<10&&(i="0"+e.toString()),$(this).html(i)}),$("li",e.body.minuteselector).each(function(e,t){var i=e;e<10&&(i="0"+e.toString()),$(this).html(i)})),e.bulidContent(),t.initValue&&e.inputText.val(t.initValue),""!=e.inputText.val()&&e.onTextChange(),e.dateeditor.hover(null,function(t){e.dateeditor.is(":visible")&&!e.editorToggling&&e.toggleDateEditor(!0)}),e.link.hover(function(){t.disabled||(this.className="l-trigger-hover")},function(){t.disabled||(this.className="l-trigger")}).mousedown(function(){t.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){t.disabled||(this.className="l-trigger-hover")}).click(function(){t.disabled||(e.bulidContent(),e.toggleDateEditor(e.dateeditor.is(":visible")))}),t.disabled&&(e.inputText.attr("readonly","readonly"),e.text.addClass("l-text-disabled")),e.buttons.btnClose.click(function(){e.toggleDateEditor(!0)}),$("td",e.body.tbody).hover(function(){$(this).hasClass("l-box-dateeditor-today")||$(this).addClass("l-box-dateeditor-over")},function(){$(this).removeClass("l-box-dateeditor-over")}).click(function(){$(".l-box-dateeditor-selected",e.body.tbody).removeClass("l-box-dateeditor-selected"),$(this).hasClass("l-box-dateeditor-today")||$(this).addClass("l-box-dateeditor-selected"),e.currentDate.date=parseInt($(this).html()),e.currentDate.day=new Date(e.currentDate.year,e.currentDate.month-1,1).getDay(),$(this).hasClass("l-box-dateeditor-out")&&(0==$("tr",e.body.tbody).index($(this).parent())?0==--e.currentDate.month&&(e.currentDate.month=12,e.currentDate.year--):13==++e.currentDate.month&&(e.currentDate.month=1,e.currentDate.year++)),e.selectedDate={year:e.currentDate.year,month:e.currentDate.month,date:e.currentDate.date},e.showDate(),e.editorToggling=!0,e.dateeditor.slideToggle("fast",function(){e.editorToggling=!1})}),$(".l-box-dateeditor-header-btn",e.header).hover(function(){$(this).addClass("l-box-dateeditor-header-btn-over")},function(){$(this).removeClass("l-box-dateeditor-header-btn-over")}),e.buttons.btnYear.click(function(){e.body.yearselector.is(":visible")||$("li",e.body.yearselector).each(function(t,i){var r=e.currentDate.year+(t-4);r==e.currentDate.year?$(this).addClass("l-selected"):$(this).removeClass("l-selected"),$(this).html(r)}),e.body.yearselector.slideToggle()}),e.body.yearselector.hover(function(){},function(){$(this).slideUp()}),$("li",e.body.yearselector).click(function(){e.currentDate.year=parseInt($(this).html()),e.body.yearselector.slideToggle(),e.bulidContent()}),e.buttons.btnMonth.click(function(){$("li",e.body.monthselector).each(function(t,i){e.currentDate.month==t+1?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.monthselector.slideToggle()}),e.body.monthselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.monthselector).click(function(){var t=$("li",e.body.monthselector).index(this);e.currentDate.month=t+1,e.body.monthselector.slideToggle(),e.bulidContent()}),e.toolbar.time.hour.click(function(){$("li",e.body.hourselector).each(function(t,i){e.currentDate.hour==t?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.hourselector.slideToggle()}),e.body.hourselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.hourselector).click(function(){var t=$("li",e.body.hourselector).index(this);e.currentDate.hour=t,e.body.hourselector.slideToggle(),e.bulidContent(),e.showDate()}),e.toolbar.time.minute.click(function(){$("li",e.body.minuteselector).each(function(t,i){e.currentDate.minute==t?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.minuteselector.slideToggle("fast",function(){if($("li",this).index($("li.l-selected",this))>29){var e=$("li.l-selected",this).offset().top-$(this).offset().top;$(this).animate({scrollTop:e})}})}),e.body.minuteselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.minuteselector).click(function(){var t=$("li",e.body.minuteselector).index(this);e.currentDate.minute=t,e.body.minuteselector.slideToggle("fast"),e.bulidContent(),e.showDate()}),e.buttons.btnPrevMonth.click(function(){0==--e.currentDate.month&&(e.currentDate.month=12,e.currentDate.year--),e.bulidContent()}),e.buttons.btnNextMonth.click(function(){13==++e.currentDate.month&&(e.currentDate.month=1,e.currentDate.year++),e.bulidContent()}),e.buttons.btnPrevYear.click(function(){e.currentDate.year--,e.bulidContent()}),e.buttons.btnNextYear.click(function(){e.currentDate.year++,e.bulidContent()}),e.buttons.btnToday.click(function(){e.currentDate={year:e.now.year,month:e.now.month,day:e.now.day,date:e.now.date},e.selectedDate={year:e.now.year,month:e.now.month,day:e.now.day,date:e.now.date},e.showDate(),e.dateeditor.slideToggle("fast")}),e.inputText.change(function(){e.onTextChange()}).blur(function(){e.text.removeClass("l-text-focus")}).focus(function(){e.text.addClass("l-text-focus")}),e.text.hover(function(){e.text.addClass("l-text-over")},function(){e.text.removeClass("l-text-over")}),t.label&&(e.labelwrapper=e.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),e.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+t.label+":&nbsp</div>"),e.textwrapper.css("float","left"),t.labelWidth?$(".l-text-label",e.labelwrapper).outerWidth(t.labelWidth):t.labelWidth=$(".l-text-label",e.labelwrapper).outerWidth(),$(".l-text-label",e.labelwrapper).width(t.labelWidth),$(".l-text-label",e.labelwrapper).height(e.text.height()),e.labelwrapper.append('<br style="clear:both;" />'),t.labelAlign&&$(".l-text-label",e.labelwrapper).css("text-align",t.labelAlign),e.textwrapper.css({display:"inline"}),e.labelwrapper.width(e.text.outerWidth()+t.labelWidth+2)),e.set(t),$(document).bind("click.dateeditor",function(t){e.dateeditor.is(":visible")&&0==$(t.target||t.srcElement).closest(".l-box-dateeditor, .l-text-date").length&&e.toggleDateEditor(!0)})}},destroy:function(){this.textwrapper&&this.textwrapper.remove(),this.dateeditor&&this.dateeditor.remove(),this.options=null,$.ligerui.remove(this)},bulidContent:function(){var e=this,t=this.options,i=new Date(e.currentDate.year,e.currentDate.month-1,1).getDay(),r=e.currentDate.month,n=e.currentDate.year;13==++r&&(r=1,n++);var o=new Date(n,r-1,0).getDate(),l=new Date(e.currentDate.year,e.currentDate.month-1,0).getDate();e.buttons.btnMonth.html(t.monthMessage[e.currentDate.month-1]),e.buttons.btnYear.html(e.currentDate.year),e.toolbar.time.hour.html(e.currentDate.hour),e.toolbar.time.minute.html(e.currentDate.minute),1==e.toolbar.time.hour.html().length&&e.toolbar.time.hour.html("0"+e.toolbar.time.hour.html()),1==e.toolbar.time.minute.html().length&&e.toolbar.time.minute.html("0"+e.toolbar.time.minute.html()),$("td",this.body.tbody).each(function(){this.className=""}),$("tr",this.body.tbody).each(function(t,r){$("td",r).each(function(r,n){var a=7*t+(r-i),s=a+1;e.selectedDate&&e.currentDate.year==e.selectedDate.year&&e.currentDate.month==e.selectedDate.month&&a+1==e.selectedDate.date?(0!=r&&6!=r||$(n).addClass("l-box-dateeditor-holiday"),$(n).addClass("l-box-dateeditor-selected"),$(n).siblings().removeClass("l-box-dateeditor-selected")):e.currentDate.year==e.now.year&&e.currentDate.month==e.now.month&&a+1==e.now.date?(0!=r&&6!=r||$(n).addClass("l-box-dateeditor-holiday"),$(n).addClass("l-box-dateeditor-today")):a<0?(s=l+s,$(n).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):a>o-1?(s-=o,$(n).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):0==r||6==r?$(n).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected"):n.className="",$(n).html(s)})})},updateSelectBoxPosition:function(){var e=this;if(this.options.absolute){var t=$(document).height();Number(e.text.offset().top+1+e.text.outerHeight()+e.dateeditor.height())>t&&t>Number(e.dateeditor.height()+1)?e.dateeditor.css({left:e.text.offset().left,top:e.text.offset().top-1-e.dateeditor.height()}):e.dateeditor.css({left:e.text.offset().left,top:e.text.offset().top+1+e.text.outerHeight()})}else e.text.offset().top+4>e.dateeditor.height()&&e.text.offset().top+e.dateeditor.height()+textHeight+4-$(window).scrollTop()>$(window).height()?(e.dateeditor.css("marginTop",-1*(e.dateeditor.height()+textHeight+5)),e.showOnTop=!0):e.showOnTop=!1},toggleDateEditor:function(e){for(var t=this,i=(this.options,$.ligerui.find($.ligerui.controls.ComboBox)),r=0,n=i.length;r<n;r++){(o=i[r]).id!=t.id&&null!=o.selectBox.is(":visible")&&o.selectBox.is(":visible")&&o.selectBox.hide()}for(var r=0,n=(i=$.ligerui.find($.ligerui.controls.DateEditor)).length;r<n;r++){var o=i[r];o.id!=t.id&&null!=o.dateeditor.is(":visible")&&o.dateeditor.is(":visible")&&o.dateeditor.hide()}t.text.height();t.editorToggling=!0,e?t.dateeditor.hide("fast",function(){t.editorToggling=!1}):(t.updateSelectBoxPosition(),t.dateeditor.slideDown("fast",function(){t.editorToggling=!1}))},showDate:function(){var e=this;this.options;if(this.currentDate){this.currentDate.hour=parseInt(e.toolbar.time.hour.html(),10),this.currentDate.minute=parseInt(e.toolbar.time.minute.html(),10);var t=this.currentDate.year+"/"+this.currentDate.month+"/"+this.currentDate.date+" "+this.currentDate.hour+":"+this.currentDate.minute,i=new Date(t);t=e.getFormatDate(i),this.inputText.val(t),this.onTextChange()}},isDateTime:function(e){this.options;var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4])},isLongDateTime:function(e){this.options;var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/);if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4],t[5],t[6]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4]&&i.getHours()==t[5]&&i.getMinutes()==t[6])},getFormatDate:function(e){if(null===e||"NaN"==e)return null;var t=this.options.format,i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t},clear:function(){this.set("value",""),this.usedDate=null},_setCancelable:function(e){var t=this,i=this.options;!e&&t.unselect&&(t.unselect.remove(),t.unselect=null),(e||t.unselect)&&(t.unselect=$('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),t.text.hover(function(){t.unselect.show()},function(){t.unselect.hide()}),!i.disabled&&i.cancelable&&t.text.append(t.unselect),t.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.readonly||t.clear()}))},_rever:function(){var e=this;this.options;e.usedDate?e.inputText.val(e.getFormatDate(e.usedDate)):e.inputText.val("")},_getMatch:function(e){for(var t=[-1,-1,-1,-1,-1,-1],i=0,r="^",n=e||this.options.format;;){var o=n.match(/^yyyy|MM|dd|mm|hh|HH|ss|-|\/|:|\s/);if(!o)return null;var l=o[0].charAt(0),a=o[0].length,s="yMdhms".indexOf(l);if(-1!=s)t[s]=i+1,r+="(\\d{1,"+a+"})";else{r+="("+(" "==l?"\\s":l)+")"}if(i++,a==n.length){r+="$";break}n=n.substring(a)}return{reg:new RegExp(r),position:t}},_bulidDate:function(e){var t=this.options,i=this._getMatch();if(!i)return null;var r=e.match(i.reg);if(!r)return null;var n={y:-1==i.position[0]?1900:r[i.position[0]],M:-1==i.position[1]?0:parseInt(r[i.position[1]],10)-1,d:-1==i.position[2]?1:parseInt(r[i.position[2]],10),h:-1==i.position[3]?0:parseInt(r[i.position[3]],10),m:-1==i.position[4]?0:parseInt(r[i.position[4]],10),s:-1==i.position[5]?0:parseInt(r[i.position[5]],10)};if(n.M<0||n.M>11||n.d<0||n.d>31)return null;var o=new Date(n.y,n.M,n.d);if(t.showTime){if(n.m<0||n.m>59||n.h<0||n.h>23||n.s<0||n.s>59)return null;o.setHours(n.h),o.setMinutes(n.m),o.setSeconds(n.s)}return o},updateStyle:function(){this.onTextChange()},onTextChange:function(){var e=this,t=(this.options,e.inputText.val());if(!t)return e.selectedDate=null,!0;var i=e._bulidDate(t);if(i){e.usedDate=i,e.selectedDate={year:e.usedDate.getFullYear(),month:e.usedDate.getMonth()+1,day:e.usedDate.getDay(),date:e.usedDate.getDate(),hour:e.usedDate.getHours(),minute:e.usedDate.getMinutes()},e.currentDate={year:e.usedDate.getFullYear(),month:e.usedDate.getMonth()+1,day:e.usedDate.getDay(),date:e.usedDate.getDate(),hour:e.usedDate.getHours(),minute:e.usedDate.getMinutes()};var r=e.getFormatDate(i);e.inputText.val(r),e.trigger("changeDate",[r]),$(e.dateeditor).is(":visible")&&e.bulidContent()}else e._rever()},_setHeight:function(e){var t=this;e>4&&(t.text.css({height:e}),t.inputText.css({height:e}),t.textwrapper.css({height:e}))},_setWidth:function(e){var t=this;e>20&&(t.text.css({width:e}),t.inputText.css({width:e-20}),t.textwrapper.css({width:e}))},_setValue:function(value){var g=this;value||g.inputText.val(""),"string"==typeof value&&(/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),g.inputText.val(value),g.usedDate=value),"object"==typeof value&&value instanceof Date&&(g.inputText.val(g.getFormatDate(value)),g.onTextChange())},_getValue:function(){return this.usedDate},setEnabled:function(){var e=this.options;this.inputText.removeAttr("readonly"),this.text.removeClass("l-text-disabled"),e.disabled=!1},setDisabled:function(){var e=this.options;this.inputText.attr("readonly","readonly"),this.text.addClass("l-text-disabled"),e.disabled=!0}})}(jQuery),function(e){e.fn.ligerSpinner=function(){return e.ligerui.run.call(this,"ligerSpinner",arguments)},e.fn.ligerGetSpinnerManager=function(){return e.ligerui.run.call(this,"ligerGetSpinnerManager",arguments)},e.ligerDefaults.Spinner={type:"float",isNegative:!0,decimalplace:2,step:.1,interval:50,value:null,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1,readonly:!1},e.ligerMethos.Spinner={},e.ligerui.controls.Spinner=function(t,i){e.ligerui.controls.Spinner.base.constructor.call(this,t,i)},e.ligerui.controls.Spinner.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return e.ligerMethos.Spinner},_init:function(){e.ligerui.controls.Spinner.base._init.call(this);var t=this.options;"float"==t.type?(t.step=.1,t.interval=50):"int"==t.type?(t.step=1,t.interval=100):"time"==t.type?(t.step=1,t.interval=100):(t.type="int",t.step=1,t.interval=100)},_render:function(){var t=this,i=this.options;t.interval=null,t.inputText=null,t.value=null,t.textFieldID="","input"==this.element.tagName.toLowerCase()&&this.element.type&&"text"==this.element.type?(t.inputText=e(this.element),this.element.id&&(t.textFieldID=this.element.id)):(t.inputText=e('<input type="text"/>'),t.inputText.appendTo(e(this.element))),""==t.textFieldID&&i.textFieldID&&(t.textFieldID=i.textFieldID),t.link=e('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>'),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link).after(t.selectBox).after(t.valueField),t.link.up=e(".l-spinner-up",t.link),t.link.down=e(".l-spinner-down",t.link),t.inputText.addClass("l-text-field"),i.disabled&&t.wrapper.addClass("l-text-disabled"),t._isVerify(t.inputText.val())||(t.value=t._getDefaultValue(),t._showValue(t.value)),t.link.up.hover(function(){i.disabled||e(this).addClass("l-spinner-up-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-up-over")}).mousedown(function(){i.disabled||(t._uping.call(t),t.interval=setInterval(function(){t._uping.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.link.down.hover(function(){i.disabled||e(this).addClass("l-spinner-down-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-down-over")}).mousedown(function(){i.disabled||(t.interval=setInterval(function(){t._downing.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.inputText.change(function(){var e=t.inputText.val();t.value=t._getVerifyValue(e),t.trigger("changeValue",[t.value]),t._showValue(t.value)}).blur(function(){t.wrapper.removeClass("l-text-focus")}).focus(function(){t.wrapper.addClass("l-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("l-text-over")},function(){t.wrapper.removeClass("l-text-over")}),t.set(i)},_setValue:function(e){null!=e&&this.inputText.val(e)},_setWidth:function(e){e>20&&(this.wrapper.css({width:e}),this.inputText.css({width:e-20}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2),t.link.height(e-4))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_showValue:function(e){var t=this.options;e&&"NaN"!=e||(e=0),"float"==t.type&&(e=parseFloat(e).toFixed(t.decimalplace)),this.inputText.val(e)},_setValue:function(e){this._showValue(e)},setValue:function(e){this._showValue(e)},getValue:function(){return this.inputText.val()},_round:function(e,t){this.options;for(var i=1;t>0;i*=10,t--);for(;t<0;i/=10,t++);return Math.round(e*i)/i},_isInt:function(e){return!!(this.options.isNegative?/^-?\d+$/:/^\d+$/).test(e)&&parseFloat(e)==e},_isFloat:function(e){return!!(this.options.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/).test(e)&&parseFloat(e)==e},_isTime:function(e){this.options;var t=e.match(/^(\d{1,2}):(\d{1,2})$/);return null!=t&&!(t[1]>24||t[2]>60)},_isVerify:function(e){var t=this,i=this.options;if("float"==i.type){if(!t._isFloat(e))return!1;r=parseFloat(e);return!(void 0!=i.minValue&&i.minValue>r)&&!(void 0!=i.maxValue&&i.maxValue<r)}if("int"==i.type){if(!t._isInt(e))return!1;var r=parseInt(e);return!(void 0!=i.minValue&&i.minValue>r)&&!(void 0!=i.maxValue&&i.maxValue<r)}return"time"==i.type&&t._isTime(e)},_getVerifyValue:function(e){var t=this,i=this.options,r=null;return"float"==i.type?r=t._round(e,i.decimalplace):"int"==i.type?r=parseInt(e):"time"==i.type&&(r=e),t._isVerify(r)?r:t.value},_isOverValue:function(e){var t=this.options;return null!=t.minValue&&t.minValue>e||null!=t.maxValue&&t.maxValue<e},_getDefaultValue:function(){var e=this.options;return"float"==e.type||"int"==e.type?0:"time"==e.type?"00:00":void 0},_addValue:function(e){var t=this,i=(this.options,t.inputText.val());i=parseFloat(i)+e,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_addTime:function(e){var t=this,i=(this.options,t.inputText.val()),r=i.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(r[2])+e,newminute<10&&(newminute="0"+newminute),i=r[1]+":"+newminute,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_uping:function(){var e=this.options;"float"==e.type||"int"==e.type?this._addValue(e.step):"time"==e.type&&this._addTime(e.step)},_downing:function(){var e=this.options;"float"==e.type||"int"==e.type?this._addValue(-1*e.step):"time"==e.type&&this._addTime(-1*e.step)},_isDateTime:function(e){this.options;var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4])},_isLongDateTime:function(e){this.options;var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/);if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4],t[5],t[6]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4]&&i.getHours()==t[5]&&i.getMinutes()==t[6])}})}(jQuery),function(e){e.fn.ligerPopupEdit=function(t){return e.ligerui.run.call(this,"ligerPopupEdit",arguments)},e.fn.ligerGetPopupEditManager=function(){return e.ligerui.run.call(this,"ligerGetPopupEditManager",arguments)},e.ligerDefaults.PopupEdit={valueFieldID:null,css:null,onButtonClick:null,nullText:null,disabled:!1,method:"post",async:!0,cancelable:!0,width:200,heigth:null,render:null,split:";",data:[],grid:null,condition:null,valueField:"id",textField:"text",parms:null,onSelect:null,onSelected:null,valueFieldCssClass:null,searchClick:null},e.ligerMethos.PopupEdit=e.ligerMethos.PopupEdit||{},e.ligerui.controls.PopupEdit=function(t,i){e.ligerui.controls.PopupEdit.base.constructor.call(this,t,i)},e.ligerui.controls.PopupEdit.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"PopupEdit"},_extendMethods:function(){return e.ligerMethos.PopupEdit},_init:function(){e.ligerui.controls.PopupEdit.base._init.call(this)},_render:function(){var t=this,i=this.options;t.inputText=null,"input"==this.element.tagName.toLowerCase()&&(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.valueField=null,i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),void 0==t.valueField[0].name&&(t.valueField[0].id=t.valueField[0].name=i.valueFieldID)):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val"),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.link=e('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),t.wrapper=t.inputText.wrap('<div class="l-text l-text-popup"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link),t.wrapper.append(t.valueField),t.valueField.attr("data-ligerid",t.id),t.inputText.addClass("l-text-field"),t.link.hover(function(){i.disabled||(this.className="l-trigger-hover")},function(){i.disabled||(this.className="l-trigger")}).mousedown(function(){i.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){i.disabled||(this.className="l-trigger-hover")}).click(function(){if(!i.disabled)return 0!=t.trigger("buttonClick")&&void 0}),t.inputText.click(function(){i.disabled}).blur(function(){i.disabled||t.wrapper.removeClass("l-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("l-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("l-text-over")},function(){i.disabled||t.wrapper.removeClass("l-text-over")}),t.set(i),t.setTextByVal(t.getValue())},destroy:function(){this.wrapper&&this.wrapper.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this.options;this.inputText.val(""),this.valueField.val("")},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,r=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),!r.disabled&&r.cancelable&&i.wrapper.append(i.unselect),i.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setWidth:function(e){e>20&&(this.wrapper.css({width:e}),this.inputText.css({width:e-20}))},_setHeight:function(e){e>10&&(this.wrapper.height(e),this.inputText.height(e-2))},getData:function(){var t=this.options,i=[],r=e(this.valueField).val(),n=e(this.inputText).val(),o=r?r.split(t.split):null,l=n?n.split(t.split):null;return e(o).each(function(e){var r={};r[t.textField]=l[e],r[t.valueField]=o[e],i.push(r)}),i},_getText:function(){return e(this.inputText).val()},_getValue:function(){return e(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(e,t){if(""!=e){var i=this;this.options;if(arguments.length>=2)return i.setValue(e),void i.setText(t);i.valueField.val(e)}},setTextByVal:function(t){if(""!=(t="string"!=typeof t?t.toString:t)){var i=this,r=[],n=this.options,o=[];i.valueField.val()!=t&&i.valueField.val(t);var l=n.grid;e.isFunction(l)&&(l=l());var a=e.extend({parms:n.parms},l);if(n.data.length>0)o=n.data.Rows;else{if(a.url)return void i.loadServerData(a.url,t);o=a.data.Rows}var s=t.split(n.split);e(o).each(function(t,i){-1!=e.inArray(i[n.valueField],s)&&r.push(i[n.textField])}),r=r.join(n.split),i.setText(r)}},loadServerData:function(t,i){var r=this,n=this.options;e.isFunction(t)&&(t=t());var o={type:n.method,url:t,async:n.async,dataType:"json",success:function(t){gridData=e.extend(!0,{},t),n.data=gridData,gridData=t.Rows;var o=i.split(n.split),l=[];e(gridData).each(function(t,i){-1!=e.inArray(i[n.valueField],o)&&l.push(i[n.textField])}),l=l.join(n.split),r.setText(l)},error:function(e,t,i){}};e.ajax(o)},setText:function(e){var t=this.options;t.render?this.inputText.val(t.render(e)):this.inputText.val(e)},addValue:function(t,i){var r=this,n=this.options;if(t){var o=r.getValue(),l=r.getText();if(o){for(var a=[],s=[],d=o.split(n.split),t=t.split(n.split),i=i.split(n.split),u=0,c=t.length;u<c;u++)-1==e.inArray(t[u],d)&&(a.push(t[u]),s.push(i[u]));a.length&&(r.setValue(o+n.split+a.join(n.split)),r.setText(l+n.split+s.join(n.split)))}else r.setValue(t),r.setText(i)}},removeValue:function(t,i){var r=this,n=this.options;if(t){var o=r.getValue(),l=r.getText();if(o){for(var a=o.split(n.split),s=l.split(n.split),d=0,u=-1,c=(t=t.split(n.split)).length;d<c;d++)-1!=(u=e.inArray(t[d],a))&&(a.splice(u,1),s.splice(u,1));r.setValue(a.join(n.split)),r.setText(s.join(n.split))}}},_setGrid:function(t){if(t){var i=this,r=this.options,n=e.extend({parms:r.parms},r.grid);this.bind("buttonClick",function(){if(!i.popupFn){var t={grid:n,condition:r.condition,valueField:r.valueField,textField:r.textField,split:r.split,searchClick:r.searchClick,lastSelected:function(){try{return i.getData()}catch(e){return null}}(),onSelect:function(e){0!=i.trigger("select",e)&&(r.grid.checkbox?(i.addValue(e.value,e.text),i.removeValue(e.remvoeValue,e.remvoeText)):(i.setValue(e.value),i.setText(e.text)),i.trigger("selected",e))},selectInit:function(t){var n=i.getValue();return!!n&&(!(!r.valueField||!t[r.valueField])&&-1!=e.inArray(t[r.valueField].toString(),n.split(r.split)))}};i.popupFn=e.ligerui.getPopupFn(t,i)}i.popupFn()})}}}),e.ligerui.getPopupFn=function(t,i){function r(e,i){for(var r=0;i&&i[r];r++){if(i[r][t.valueField]==e)return!0}return!1}if((t=e.extend({title:"选择数据",width:700,height:320,top:null,left:null,split:";",valueField:null,textField:null,grid:null,condition:null,onSelect:function(e){},searchClick:t.searchClick,selectInit:function(e){return!1}},t)).grid){var n,o,l,a=t.lastSelected||[];return function(){return function(){function s(e){return e=e||t.height,e-=u.height()}if(n)return o._showData(),n.show(),o.refreshSize(),void(a=o.selected.concat());var d=e("<div></div>"),u=e("<div></div>"),c=e("<div></div>");if(d.append(u).append(c),t.condition){var h=e.extend({labelWidth:60,space:20},t.condition);setTimeout(function(){l=u.ligerForm(h)},50)}else u.remove();var p=e.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0},t.grid,{width:"100%",height:s(),isChecked:t.selectInit,isSelected:t.selectInit,inWindow:!1});o=c.ligerGrid(p),t.condition&&setTimeout(function(){var i=e('<li style="margin-right:9px"><div></div></li>');e("ul:first",u).append(i).after('<div class="l-clear"></div>'),e("div",i).ligerButton({text:"搜索",click:function(){var i=l.toConditions();t.searchClick?t.searchClick({grid:o,rules:i}):o.get("url")?(o.setParm(o.conditionParmName||"condition",e.ligerui.toJSON(i)),o.reload()):o.loadData(e.ligerFilter.getFilterFunction(i))}})},100),n=e.ligerDialog.open({title:t.title,width:t.width,height:"auto",top:t.top,left:t.left,target:d,isResize:!0,cls:"l-selectorwin",onContentHeightChange:function(e){return o.set("height",s(e)),!1},onStopResize:function(){o.refreshSize()},buttons:[{text:"选择",onclick:function(i,n){!function(){var i=o.selected||[],n=[],l=[],s=[];e(i).each(function(i,r){t.valueField&&n.push(r[t.valueField]),t.textField&&l.push(r[t.textField]);var a=e.extend(!0,{},this);o.formatRecord(a,!0),s.push(a)});var d=[];e(a).each(function(e,n){!r(n[t.valueField],i)&&r(n[t.valueField],o.rows)&&d.push(n)});var u=[],c=[],h=[];e(d).each(function(i,r){t.valueField&&u.push(r[t.valueField]),t.textField&&c.push(r[t.textField]);var n=e.extend(!0,{},this);o.formatRecord(n,!0),h.push(n)}),t.onSelect({value:n.join(t.split),text:l.join(t.split),data:s,remvoeValue:u.join(t.split),remvoeText:c.join(t.split),removeData:h})}(),n.hide()}},{text:"取消",onclick:function(e,t){t.hide()}}]}),i&&(i.includeControls=i.includeControls||[],i.includeControls.push(n)),o.refreshSize()}(),!1}}}}(jQuery),function(e){var t=e.ligerui;e.fn.ligerDrag=function(e){return t.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetDragManager=function(){return t.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},t.controls.Drag=function(e){t.controls.Drag.base.constructor.call(this,null,e)},t.controls.Drag.ligerExtend(t.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i),t.cursor="move",t.handler.css("cursor",t.cursor),t.mouseDowned=!1,t.handler.bind("mousedown.drag",function(r){i.disabled||2!=r.button&&(t.mouseDowned=!0,e(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,r)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){e(document).unbind("selectstart.drag")}),e(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(i){var r=this,n=this.options;if(!r.reverting&&!n.disabled){if(r.current={target:r.target,left:r.target.offset().left,top:r.target.offset().top,startX:i.pageX||i.screenX,startY:i.pageY||i.clientY},0==r.trigger("startDrag",[r.current,i]))return!1;if(r.cursor="move",r._createProxy(n.proxy,i),n.proxy&&!r.proxy)return!1;(r.proxy||r.handler).css("cursor",r.cursor),e(document).bind("mousemove.drag",function(){r._drag.apply(r,arguments)}),t.draggable.dragging=!0,e(document).bind("mouseup.drag",function(){t.draggable.dragging=!1,r._stop.apply(r,arguments)})}},_drag:function(t){var i=this;this.options;if(i.current){var r=t.pageX||t.screenX,n=t.pageY||t.screenY;i.current.diffX=r-i.current.startX,i.current.diffY=n-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(o,l){var a=e(l),s=a.offset();r>s.left&&r<s.left+a.width()&&n>s.top&&n<s.top+a.height()?i.receiveEntered[o]?i.trigger("dragOver",[l,i.proxy||i.target,t]):(i.receiveEntered[o]=!0,i.trigger("dragEnter",[l,i.proxy||i.target,t])):i.receiveEntered[o]&&(i.receiveEntered[o]=!1,i.trigger("dragLeave",[l,i.proxy||i.target,t]))}),i.hasBind("drag")?0!=i.trigger("drag",[i.current,t])?i._applyDrag():i.proxy?i._removeProxy():i._stop():i._applyDrag()}},_stop:function(t){var i=this,r=this.options;e(document).unbind("mousemove.drag"),e(document).unbind("mouseup.drag"),e(document).unbind("selectstart.drag"),i.receive&&i.receive.each(function(e,r){i.receiveEntered[e]&&i.trigger("drop",[r,i.proxy||i.target,t])}),i.proxy&&(r.revert?i.hasBind("revert")?0!=i.trigger("revert",[i.current,t])?i._revert(t):i._removeProxy():i._revert(t):(i._applyDrag(i.target),i._removeProxy())),i.cursor="move",i.trigger("stopDrag",[i.current,t]),i.current=null,i.handler.css("cursor",i.cursor)},_revert:function(e){var t=this;t.reverting=!0,t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1,t._removeProxy(),t.trigger("endRevert",[t.current,e]),t.current=null})},_applyDrag:function(e){var t=this,i=this.options,r={},n=(e=e||t.proxy||t.target)==t.target;t.current.diffX&&(n||null==i.proxyX?r.left=t.current.left+t.current.diffX:r.left=t.current.startX+i.proxyX+t.current.diffX),t.current.diffY&&(n||null==i.proxyY?r.top=t.current.top+t.current.diffY:r.top=t.current.startY+i.proxyY+t.current.diffY),e==t.target&&t.proxy&&i.animate?(t.reverting=!0,e.animate(r,function(){t.reverting=!1})):e.css(r)},_setReceive:function(t){this.receiveEntered={},t&&(this.receive="string"==typeof t?e(t):t)},_setHandler:function(t){var i=this.options;this.handler=t?"string"==typeof t?e(t,i.target):t:e(i.target)},_setTarget:function(t){this.target=e(t)},_setCursor:function(e){this.cursor=e,(this.proxy||this.handler).css("cursor",e)},_createProxy:function(t,i){if(t){var r=this,n=this.options;"function"==typeof t?r.proxy=t.call(this.options.target,r,i):"clone"==t?(r.proxy=r.target.clone().css("position","absolute"),r.proxy.appendTo("body")):(r.proxy=e("<div class='l-draggable'></div>"),r.proxy.width(r.target.width()).height(r.target.height()),r.proxy.attr("dragid",r.id).appendTo("body")),r.proxy.css({left:null==n.proxyX?r.current.left:r.current.startX+n.proxyX,top:null==n.proxyY?r.current.top:r.current.startY+n.proxyY}).show()}},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)}})}(jQuery),function(e){e.fn.ligerResizable=function(t){return e.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetResizableManager=function(){return e.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},e.ligerui.controls.Resizable=function(t){e.ligerui.controls.Resizable.base.constructor.call(this,null,t)},e.ligerui.controls.Resizable.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,i=this.options;t.target=e(i.target),t.set(i),t.target.mousemove(function(r){if(!i.disabled&&(t.dir=t._getDir(r),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default"),i.target.ligeruidragid)){var n=e.ligerui.get(i.target.ligeruidragid);n&&t.dir?n.set("disabled",!0):n&&n.set("disabled",!1)}}).mousedown(function(e){i.disabled||t.dir&&t._start(e)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(t){var i=this,r=this.options,n="",o=i.target.offset(),l=i.target.width(),a=i.target.height(),s=r.scope,d=t.pageX||t.screenX,u=t.pageY||t.screenY;return u>=o.top&&u<o.top+s?n+="n":u<=o.top+a&&u>o.top+a-s&&(n+="s"),d>=o.left&&d<o.left+s?n+="w":d<=o.left+l&&d>o.left+l-s&&(n+="e"),"all"==r.handles||""==n?n:-1!=e.inArray(n,i.handles)?n:""},_setHandles:function(e){e&&(this.handles=e.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var t=this;t.proxy=e('<div class="l-resizable"></div>'),t.proxy.width(t.target.width()).height(t.target.height()),t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)},_start:function(t){var i=this;this.options;i._createProxy(),i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"}),i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:i.target.width(),height:i.target.height()},e(document).bind("selectstart.resizable",function(){return!1}),e(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)}),e(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)}),i.proxy.show(),i.trigger("startResize",[i.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this;this.options;if(t.current&&t.proxy){t.proxy.css("cursor",""==t.current.dir?"default":t.current.dir+"-resize");var i=e.pageX||e.screenX,r=e.pageY||e.screenY;t.current.diffX=i-t.current.startX,t.current.diffY=r-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])}},_stop:function(t){var i=this;this.options;i.hasBind("stopResize")?0!=i.trigger("stopResize",[i.current,t])&&i._applyResize():i._applyResize(),i._removeProxy(),i.trigger("endResize",[i.current,t]),e(document).unbind("selectstart.resizable"),e(document).unbind("mousemove.resizable"),e(document).unbind("mouseup.resizable")},_applyResize:function(t){var i=this,r=this.options,n={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},o=!1;t||(t=i.target,o=!0,isNaN(parseInt(i.target.css("top")))?n.top=0:n.top=parseInt(i.target.css("top")),isNaN(parseInt(i.target.css("left")))?n.left=0:n.left=parseInt(i.target.css("left"))),e.inArray(i.current.dir,i.changeBy.l)>-1?(n.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):o&&delete n.left,e.inArray(i.current.dir,i.changeBy.t)>-1?(n.top+=i.current.diffY,i.current.diffTop=i.current.diffY):o&&delete n.top,e.inArray(i.current.dir,i.changeBy.w)>-1?(n.width+=(-1==i.current.dir.indexOf("w")?1:-1)*i.current.diffX,i.current.newWidth=n.width):o&&delete n.width,e.inArray(i.current.dir,i.changeBy.h)>-1?(n.height+=(-1==i.current.dir.indexOf("n")?1:-1)*i.current.diffY,i.current.newHeight=n.height):o&&delete n.height,o&&r.animate?t.animate(n):t.css(n)}})}(jQuery);