webpackJsonp([77,269],{9:function(e,t,r){e.exports=r(7)(105)},14:function(e,t,r){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(r(16));t.default=function(e,t,r){return t in e?(0,a.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},16:function(e,t,r){e.exports={default:r(17),__esModule:!0}},17:function(e,t,r){r(18);var a=r(15).Object;e.exports=function(e,t,r){return a.defineProperty(e,t,r)}},18:function(e,t,r){var a=r(19);a(a.S+a.F*!r(27),"Object",{defineProperty:r(26).f})},29:function(e,t,r){e.exports=r(7)(82)},30:function(e,t,r){e.exports=r(7)(87)},31:function(e,t,r){e.exports=r(7)(104)},32:function(e,t,r){e.exports={default:r(33),__esModule:!0}},33:function(e,t,r){r(35),e.exports=r(15).Object.keys},34:function(e,t,r){var a=r(19),n=r(15),o=r(29);e.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],l={};l[e]=t(r),a(a.S+a.F*o(function(){r(1)}),"Object",l)}},35:function(e,t,r){var a=r(31),n=r(30);r(34)("keys",function(){return function(e){return n(a(e))}})},41:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(32)),o=a(r(9)),l=a(r(14)),i=a(r(42)),d=a(r(1));t.default={name:"t8t-list-view",props:(0,l.default)({deleteMethod:String,showTable:{type:Boolean,default:!0},breadcrumbData:{type:Array,default:[]},searchFields:Array,searchOptions:Object,searchDataSource:Object,showSearchToggleBtn:Boolean,treeData:Array,showTree:{type:Boolean,default:!1},treeProps:{type:Object,default:function(){return{label:"label",children:"children"}}},showTreeCheckBox:{type:Boolean,default:!1},defaultTreeExpandedKeys:{type:Array,default:function(){return[1]},required:!1},treeArgs:{type:Object,default:function(){return{}}},refreshOnTreeClick:{type:Boolean,default:!1},showToolbar:{type:Boolean,default:!0},toolbarSymbolList:{type:Array,default:[]},toolbarDisabledSymbols:{type:Array,default:[]},tableColumns:Array,tableService:String,tableMethod:String,tableCustomColumn:{type:Object,default:!0},tableEditable:{type:Boolean,default:!1},tableRadioCol:{type:Boolean,default:!1},tableArgs:{type:Object,default:{}},tablePageBar:{type:Boolean,default:!0},tableCommonData:Object,tableTemplateData:Object,tableSelectCol:{type:Boolean,default:!0},tableIndexCol:{type:Boolean,default:!1},tableAutoBuild:{type:Boolean,default:!1},searchKey:{type:String,default:"search"},searchFilter:Function,treeSearchKey:{type:String,default:"search"},autoRefreshTable:{type:Boolean,default:!0},beforeSearchSubmit:Function,beforeTreeSubmit:Function},"deleteMethod",String),methods:{searchChange:function(e,t){this.$emit("search-change",e,t)},searchChangeDivision:function(e,t){this.$emit("search-division-change",e,t)},visibleChange:function(e,t){this.$emit("search-visible-change",e,t)},searchIconClick:function(e,t){this.$emit("search-icon-click",e,t)},searchBlur:function(e,t){this.$emit("search-blur",e,t)},searchFocus:function(e,t){this.$emit("search-focus",e,t)},searchSelect:function(e,t){this.$emit("search-select",e,t)},getSearchInstance:function(){return this.$refs["list-search"]},getBreadcrumbInstance:function(){return this.$refs["list-breadcrumb"]},getTreeInstance:function(){return this.$refs["list-tree"]},getToolbarInstance:function(){return this.$refs["list-toolbar"]},getTableInstance:function(){return this.$refs["list-table"]},disableBySymbol:function(e){this.$refs["list-toolbar"].disableBySymbol(e)},unDisableBySymbol:function(e){this.$refs["list-toolbar"].unDisableBySymbol(e)},onToolbarClick:function(e,t){var r="list-"+e.toLowerCase();this.$emit(r,e,t)},searchSubmit:function(e){this.$emit("search-submit",e);var t=this.beforeSearchSubmit,r=void 0===t?"undefined":(0,o.default)(t);if(!0===("function"!==r||"function"===r&&(this.beforeSearchSubmit.call(this,e)||!1))&&!0===this.autoRefreshTable){var a={},l=this.tableAutoBuild?i.default.build(e,this.searchFields):e;"function"==typeof this.searchFilter&&(l=this.searchFilter.call(this,e,l)),(!l||(0,n.default)(l)<=0)&&(l=null),a[this.searchKey]=l,this.tableArgs=a}},onTreeNodeClick:function(e){this.$emit("tree-node-click",e);var t=this.beforeTreeSubmit,r=void 0===t?"undefined":(0,o.default)(t);!0===("function"!==r||"function"===r&&(t.call(this,e)||!1))&&!0===this.refreshOnTreeClick&&this.$nextTick(function(){var e={};e[this.treeSearchKey]=this.treeArgs,this.tableArgs=e})},tableSelectionChange:function(e,t,r){this.$emit("table-selection-change",e,t,r)},tableRowDobuleClick:function(e,t){this.$emit("table-row-dobule-click",e,t)},tableCurrentRowChange:function(e,t){this.$emit("table-current-row-change",e,t)},tableRowClick:function(e,t,r){this.$emit("table-row-click",e,t,r)},tableSortChange:function(e,t,r){this.$emit("table-sort-change",e,t,r)},tableDataLoaded:function(e){this.$emit("table-data-loaded",e)},tableSizeChange:function(e){this.$emit("table-size-change",e)},tableRowsAdded:function(e){this.$emit("table-rows-added",e)},tableRowsDeleted:function(e){this.$emit("table-rows-deleted",e)},tableCellClick:function(e,t,r,a,n){this.$emit("table-cell-click",e,t,r,a,n)},doDelete:function(e){e=e||"id";var t=[];if(this.deleteMethod){if(this.$refs["list-table"].getSelectRows().forEach(function(r){r[e]&&t.push(r[e])}),!(!t.length>0))return(0,d.default)({service:this.tableService,method:this.deleteMethod,args:{ids:t}});this.$message.error("没有选中需要删除的行！")}},doView:function(e,t){t=t||"id";var r=null;if(this.$refs["list-table"].getSelectRows().forEach(function(e){e[t]&&(r=e[t])}),r)this.$router.push({query:{id:r,mode:"view"},path:e});else{this.$message.error("没有选中需要查看的行！")}},doEdit:function(e,t){t=t||"id";var r=null;if(this.$refs["list-table"].getSelectRows().forEach(function(e){e[t]&&(r=e[t])}),r)this.$router.push({query:{id:r,mode:"edit"},path:e});else{this.$message.error("没有选中需要修改的行！")}},doAdd:function(e){this.$router.push({query:{mode:"add"},path:e})}}}},42:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};r.build=function(e,t){if(!t||t.length<=0)return e;var r={},a=void 0,n=void 0,o=void 0,l=void 0,i=void 0,d=void 0,s=void 0,u=["date","datetime"],c=["daterange","datetimerange"];return t.forEach(function(t){t.name&&(-1!==u.indexOf(t.type)&&-1!==c.indexOf(t.pickertype)?(l=t.operator||"gte",d=t.name+"_"+l,i=t.operator||"lt",s=t.name+"_"+i,null!=e[t.endField]&&null!=e[t.startField]&&(r[d]=e[t.startField],r[s]=e[t.endField])):"area"==t.type?(o=t.operator||"eq",t.subNames.forEach(function(t){n=e[t]||null,a=t+"_"+o,null!==n&&(r[a]=n)})):(o=t.operator||"eq",n=e[t.name]||null,a=t.name+"_"+o,null!==n&&(r[a]=n)))}),r},t.default=r},43:function(e,t,r){(e.exports=r(2)()).push([e.id,"\n.t8t-list-view[data-v-1d28835c]{\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-direction: column;\n        flex-direction: column;\n    -ms-flex: 1;\n        flex: 1;\n}\n",""])},44:function(e,t,r){var a=r(43);"string"==typeof a&&(a=[[e.id,a,""]]);r(3)(a,{});a.locals&&(e.exports=a.locals)},45:function(e,t,r){r(44);var a=r(4)(r(41),r(46),"data-v-1d28835c",null);e.exports=a.exports},46:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"t8t-list-view"},[e.breadcrumbData.length>0?r("t8t-breadcrumb",{ref:"list-breadcrumb",attrs:{data:e.breadcrumbData}}):e._e(),e._v(" "),e.searchFields.length>0?r("t8t-search",{ref:"list-search",attrs:{fields:e.searchFields,selectSource:e.searchOptions,formData:e.searchDataSource,showToggleBtn:e.showSearchToggleBtn},on:{submit:e.searchSubmit,change:e.searchChange,changeDivision:e.searchChangeDivision,"visible-change":e.visibleChange,click:e.searchIconClick,blur:e.searchBlur,focus:e.searchFocus,select:e.searchSelect}}):e._e(),e._v(" "),r("div",{staticClass:"g-main-container"},[e.showTree?r("t8t-tree",{ref:"list-tree",attrs:{data:e.treeData,props:e.treeProps,"show-checkbox":e.showTreeCheckBox,"default-expanded-keys":e.defaultTreeExpandedKeys},on:{"node-click":e.onTreeNodeClick}}):e._e(),e._v(" "),r("div",{staticClass:"g-main-container-column"},[e.showToolbar?r("t8t-toolbar",{ref:"list-toolbar",attrs:{symbolList:e.toolbarSymbolList,disabledSymbols:e.toolbarDisabledSymbols},on:{"toolbar-click":e.onToolbarClick}}):e._e(),e._v(" "),e.showTable?r("t8t-table",{ref:"list-table",attrs:{columns:e.tableColumns,service:e.tableService,method:e.tableMethod,args:e.tableArgs,pageBar:e.tablePageBar,commonData:e.tableCommonData,selectCol:e.tableSelectCol,indexCol:e.tableIndexCol,templateData:e.tableTemplateData,editable:e.tableEditable,radioCol:e.tableRadioCol,customColumn:e.tableCustomColumn},on:{"selection-change":e.tableSelectionChange,"row-double-click":e.tableRowDobuleClick,"current-row-change":e.tableCurrentRowChange,"row-click":e.tableRowClick,"sort-change":e.tableSortChange,"data-loaded":e.tableDataLoaded,"size-change":e.tableSizeChange,"rows-added":e.tableRowsAdded,"rows-deleted":e.tableRowsDeleted,"cell-click":e.tableCellClick}}):e._e()],1)],1)],1)},staticRenderFns:[]}},247:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={ORGANIZATION:{name:"sZtRu1cUhrxUCb3Xs9rEF7UWlxvmgWT",methods:{queryTreeByType:"Ch9v97-QSI8xfvtmUjsMbcKD9fc9eyPvA0OswLI-mnq"}},refundOrder:{name:"VqBhmkux_Up8X5gMW3lMq3_u92o0LEG",methods:{refundOrderCreate:"AYYWRbE-fTK4IANyJMo7GHLK5i8p6c286zI",refundOrderCancel:"KSO_2di1Uy8vKHDl7-OjRFHAiH-MrE4uQ5W",refundOrderReject:"ipop_tHhzf4W3vpL5VHapcaM-s7atrEXceG",refundOrderComplete:"lbVtgrNhjpsFsjH4ZjE79sOHQxKM3w0f23rOFTx",refundOrderQueryPage:"NVSU5i6OJTRza7Cq6WDn9uUIE3KHF1SHFZuEHPV",refundOrderProjectDetail:"64JIsUuNvJ1V1s3I1wYsBr7r95poC9Gk4y-TgiC-pi7_jPd",refundOrderFindById:"n3fyXwW7nievixZhL2vdIGuqRVoSwy5VRU1dTbK",refundOrderItemQueryPage:"AVBfYeEuFoELINDR1d6eCISKCwU_PVwasbUTuCg7_pgMJn3",queryByDemandOrderCode:"2_8AzCpJj-zu6KtNPQ_c-V9yukfojw0jFNSwukCXz-dwxLs4BYn6uu8z_W2lftX",queryByRefundOrderCode:"hnbbj-RzktYtlfrmcT-MoaN_PkLa1uSqM9iJL5XqpTPMf8grGZWftZuOmN2cKV2",queryPageForChooseDemandOrderCode:"_4KFDXyRA68t3D6f20epGr8oU894JwO2288vG4GfE1WHPB4ax54X7RL-oaLzZbJ59pp-alM"}}}},248:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(1)),o=a(r(247));t.default={queryTreeByType:function(e){return(0,n.default)({method:o.default.ORGANIZATION.methods.queryTreeByType,service:o.default.ORGANIZATION.name,args:e})},refundOrderCreate:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderCreate,service:o.default.refundOrder.name,args:e})},refundOrderCancel:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderCancel,service:o.default.refundOrder.name,args:e})},refundOrderReject:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderReject,service:o.default.refundOrder.name,args:e})},refundOrderComplete:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderComplete,service:o.default.refundOrder.name,args:e})},refundOrderQueryPage:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderQueryPage,service:o.default.refundOrder.name,args:e})},refundOrderItemQueryPage:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderItemQueryPage,service:o.default.refundOrder.name,args:e})},refundOrderProjectDetail:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderProjectDetail,service:o.default.refundOrder.name,args:e})},refundOrderFindById:function(e){return(0,n.default)({method:o.default.refundOrder.methods.refundOrderFindById,service:o.default.refundOrder.name,args:e})},queryByDemandOrderCode:function(e){return(0,n.default)({method:o.default.refundOrder.methods.queryByDemandOrderCode,service:o.default.refundOrder.name,args:e})},queryByRefundOrderCode:function(e){return(0,n.default)({method:o.default.refundOrder.methods.queryByRefundOrderCode,service:o.default.refundOrder.name,args:e})},queryPageForChooseDemandOrderCode:function(e){return(0,n.default)({method:o.default.refundOrder.methods.queryPageForChooseDemandOrderCode,service:o.default.refundOrder.name,args:e})}}},543:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(45)),o=a(r(248)),l=a(r(6));t.default={components:{T8tListView:n.default},activated:function(){this.$refs["list-view"].getTableInstance().reloadTable()},data:function(){return{breadcrumbData:[{title:"工程管理"},{title:"工程下单"},{title:"工程退货"}],detailRoute:"/delivery/refundOrder-detail",service:"6P0Z49WQ726I5w0aLvTckhWu1K3Zc0t",method:"NVSU5i6OJTRza7Cq6WDn9uUIE3KHF1SHFZuEHPV",deleteMethod:"WneQW3.MudoBmLTyS_w2DdaQzZnZGVtbDRTNgT1YBFB",tableArgs:{},tableColumns:[{prop:"refundOrderCode",label:"退货单号"},{prop:"projectId",label:"项目ID"},{prop:"demandOrderCode",label:"要货单号"},{prop:"pmName",label:"项目经理"},{prop:"ownerName",label:"业主姓名"},{prop:"address",label:"详细地址"},{prop:"status",label:"单据状态",list:"status"},{prop:"refundTime",label:"实际退货时间",formatter:"dateParser"},{prop:"createTime",label:"创建时间",formatter:"dateParser"},{prop:"materialType",label:"材料类型",list:"status1"}],searchFields:[{type:"input",label:"退货单号",name:"refundOrderCode"},{type:"input",label:"项目ID",name:"projectId"},{type:"input",label:"项目经理",name:"pmName"},{type:"input",label:"业主姓名",name:"ownerName"},{type:"select",label:"单据状态",name:"status",selectSourceKey:"status"},{type:"datetime",label:"创建时间",name:"createTime",pickertype:"datetimerange",startField:"createTime_gte",endField:"createTime_lt"},{type:"datetime",label:"实际退货时间",name:"refundTime",pickertype:"datetimerange",startField:"refundTime_gte",endField:"refundTime_lt"}],searchOptions:{status:[{value:1,text:"退货中"},{value:2,text:"已撤销"},{value:3,text:"已关闭"}],status1:[{value:1,text:"主材"},{value:2,text:"辅材"}]},treeData:[],treeProps:{label:"name",children:"children"},rejDialog:!1,textareaText:"",curRow:null,orgId:null}},methods:{onSearchSubmit:function(e){this.tableArgs={search:e}},onchange:function(e){},doMyView:function(){if(!this.curRow)return this.$message("请选择一行数据！");this.$router.push({query:{id:this.curRow.id,refundOrderCode:this.curRow.refundOrderCode,mode:"view"},path:this.detailRoute})},doAdd:function(){this.$router.push({query:{mode:"add"},path:this.detailRoute})},doUndo:function(){return this.curRow?1!==this.curRow.status?this.$message("退货中的单据才能撤销！"):void(this.rejDialog=!0):this.$message("请选择一行数据！")},onRejBtn:function(){var e=this;if(""!==this.textareaText){var t={refundOrder:{orderCode:this.curRow.refundOrderCode,cancelReason:this.textareaText,updateUser:+l.default.get("t8t-tc-uid")}};o.default.refundOrderCancel(t).then(function(t){200===t.data.status&&1===t.data.result?(e.$message.success("撤销成功！"),e.rejDialog=!1,e.$refs["list-view"].getTableInstance().reloadTable()):41607===t.data.status?e.$message("退货单状态有误"):41608===t.data.status?e.$message("更新要货单项可用数量错误"):e.$message("撤销失败！")})}else this.$message("请输入撤销原因")},closeRejDialog:function(){this.rejDialog=!1,this.textareaText=""},initTree:function(){var e=this;o.default.queryTreeByType({typeCodes:["001003010"]}).then(function(t){200===t.status&&(e.treeData=[t.data.result])})},treeNodeClick:function(e){var t=this.$refs["list-view"].getSearchInstance().getFormData();t.orgId=e.id,this.orgId=e.id,this.tableArgs={search:t}},onTableCRC:function(e,t){this.curRow=e}},created:function(){this.initTree()}}},1064:function(e,t,r){(e.exports=r(2)()).push([e.id,"\n.textarea-container[data-v-34909f6f] {\n    margin: 0 30px;\n}\n",""])},1508:function(e,t,r){var a=r(1064);"string"==typeof a&&(a=[[e.id,a,""]]);r(3)(a,{});a.locals&&(e.exports=a.locals)},1987:function(e,t,r){r(1508);var a=r(4)(r(543),r(2353),"data-v-34909f6f",null);e.exports=a.exports},2353:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("t8t-list-view",{ref:"list-view",attrs:{deleteMethod:e.deleteMethod,breadcrumbData:e.breadcrumbData,searchFields:e.searchFields,searchOptions:e.searchOptions,showSearchToggleBtn:!0,showTree:!0,treeData:e.treeData,treeProps:e.treeProps,tableColumns:e.tableColumns,tableService:e.service,tableArgs:e.tableArgs,tableMethod:e.method,tableCommonData:e.searchOptions,tableRadioCol:!0,beforeSearchSubmit:e.beforeSubmit},on:{"list-add":e.doAdd,"list-view":e.doMyView,"list-undo":e.doUndo,"search-submit":e.onSearchSubmit,"tree-node-click":e.treeNodeClick,"table-row-dobule-click":e.doMyView,"table-current-row-change":e.onTableCRC}}),e._v(" "),r("el-dialog",{ref:"rejDialogRef",attrs:{title:"撤销"},on:{close:e.closeRejDialog},model:{value:e.rejDialog,callback:function(t){e.rejDialog=t}}},[r("div",{staticClass:"textarea-container"},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:5},placeholder:"请输入撤销原因"},model:{value:e.textareaText,callback:function(t){e.textareaText=t}}})],1),e._v(" "),r("div",{slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onRejBtn}},[e._v("确定撤销")]),e._v(" "),r("el-button",{on:{click:e.closeRejDialog}},[e._v("取消撤销")])],1)])],1)},staticRenderFns:[]}}});