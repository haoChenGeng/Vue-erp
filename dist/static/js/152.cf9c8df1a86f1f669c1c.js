webpackJsonp([152,269],{5:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(1)),r=n(a(8));t.default={allSystemCodeList:function(e){return(0,s.default)({method:r.default.CONFIGURE.methods.SYS_CODE_LIST,service:r.default.CONFIGURE.name,args:e})},listNextLevelUnforbidden:function(e){return(0,s.default)({method:r.default.CONFIGURE.methods.LIST_UNFORBIDDEN,service:r.default.CONFIGURE.name,args:e})},queryUnionParent:function(e){return(0,s.default)({method:r.default.SUPPLY_CONFIGURE.methods.queryUnionParent,service:r.default.SUPPLY_CONFIGURE.name,args:e})},queryPage:function(e){return(0,s.default)({method:r.default.SUPPLY_CONFIGURE.methods.QUERY_PAGE,service:r.default.SUPPLY_CONFIGURE.name,args:e})},queryShopUnion:function(e){return(0,s.default)({method:r.default.SUPPLY_CONFIGURE.methods.queryShopUnion,service:r.default.SUPPLY_CONFIGURE.name,args:e})},queryShop:function(e){return(0,s.default)({method:r.default.SUPPLY_CONFIGURE.methods.queryShop,service:r.default.SUPPLY_CONFIGURE.name,args:e})},queryByFunctionCode:function(e){return(0,s.default)({method:r.default.ORGANIZATION.methods.QUERY_BY_FUNCTIONCODE,service:r.default.ORGANIZATION.name,args:e})},queryAll:function(e){return(0,s.default)({method:r.default.ORGANIZATION.methods.ORG_QUERY,service:r.default.ORGANIZATION.name,args:e})},queryTreeByTypeAndFunction:function(e){return(0,s.default)({method:r.default.ORGANIZATION.methods.QUERY_TREE_FUNCTION,service:r.default.ORGANIZATION.name,args:e})},queryChildrenByWholeCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,s.default)({method:r.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCode,service:r.default.SUPPLY_CONFIGURE.name,args:{wholeCode:e,depth:t}})},queryChildrenByWholeCodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,s.default)({method:r.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCodes,service:r.default.SUPPLY_CONFIGURE.name,args:{wholeCodes:e,depth:t}})},getAllQueue:function(){return(0,s.default)({method:r.default.EDA.methods.QUERY_QUEUE_QUERYQUEUES,service:r.default.EDA.name,args:{}})}}},8:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={CONFIGURE:{name:"OnLYil9jY0PiKilsavskNJvygGUxhME7eLPWccmGmYjb_ED",methods:{SYS_CODE_LIST:"vPnFi_QA4HeBWeU61ZjQPCn",LIST_UNFORBIDDEN:"vL0y_oFhAeDM3YTmFrp2oaHn1UDcQEzq1orWi41sEc2pVcjlpGN"}},SUPPLY_CONFIGURE:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"Ewi6YId8aELgLHFBBSBMT4BvG3R",queryUnionParent:"5l6jR2KUJ4QdYxLFz0ZJGFy5XZkLajNNSEdLf0t",queryShopUnion:"zPrIoMCwO3geMqwnGH2Afs0w-7lpdva",queryShop:"4VE-APqV_Fs13Cswfj8",queryChildrenByWholeCode:"sDE1BauR-rhu_AU-6F9VF952lJ_JIl-r1QOnscFpFYW0GFS9p3nAG1z",queryChildrenByWholeCodes:"CEGKxWt_AJmoqBtXoGEqET64657I2n7n39qadM-E_uX2b1O8X5k8Ii2vEnj"}},ORGANIZATION:{name:"CsxicaQ7wM_3kaiMdGJQAaOa2fUF8v-",methods:{QUERY_BY_FUNCTIONCODE:"UwBgld0zWv.T_KSfK6W2_uSPCGXiv-mkEbmTNx6qeGoR_hH",ORG_QUERY:"DOiN6_9fU1yNwZE_gRuTrdwwvEg",QUERY_TREE_FUNCTION:"-DB0-GqPoWXHozK4BKUV3yMPaFmC4lppJyYYIe9k-Gk5VCj84OEe2JBi24SnYuFqXHe",ORG_QUERY_WITHOUTDEL:"9Ivp3_1e5zNZU_miVqa6YXq9Zg0sb1JBadatp4EuTiR"}},GOODS:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"ByoqRxHfrD8M7MGSNKC-qVN",QUERY_PAGE_GOODS_UNION:"KYI9tvUKvrmrnw02TOmUAbkj27FmFOkq8nDox-O"}},EDA:{name:"806ndPAX4QHSaL8S3kOGYVWD7gJKERC",methods:{QUERY_QUEUE_QUERYQUEUES:"NJaG8pAbK6IGAM2RtOG2V_cGwPKCj8.QKtj"}}}},9:function(e,t,a){e.exports=a(7)(105)},13:function(e,t,a){"use strict";function n(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return e&&e.__esModule?e:{default:e}}(a(9)),r=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(l,i,o,d){if(1!==arguments.length||"string"!==function(e){return null===e?"null":void 0===e?"undefined":"object"!==(void 0===e?"undefined":(0,s.default)(e))?void 0===e?"undefined":(0,s.default)(e):Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}(l)||/\d/.test(l)||(i=l,l=void 0),(l=l||new Date)instanceof Date||(l=new Date(l)),isNaN(l))throw TypeError("Invalid date");var u=(i=String(r.masks[i]||i||r.masks.default)).slice(0,4);"UTC:"!==u&&"GMT:"!==u||(i=i.slice(4),o=!0,"GMT:"===u&&(d=!0));var c=o?"getUTC":"get",m=l[c+"Date"](),p=l[c+"Day"](),f=l[c+"Month"](),h=l[c+"FullYear"](),v=l[c+"Hours"](),y=l[c+"Minutes"](),g=l[c+"Seconds"](),S=l[c+"Milliseconds"](),_=o?0:l.getTimezoneOffset(),T=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-n);var s=(t-a)/6048e5;return 1+Math.floor(s)}(l),E=function(e){var t=e.getDay();return 0===t&&(t=7),t}(l),U={d:m,dd:n(m),ddd:r.i18n.dayNames[p],dddd:r.i18n.dayNames[p+7],m:f+1,mm:n(f+1),mmm:r.i18n.monthNames[f],mmmm:r.i18n.monthNames[f+12],yy:String(h).slice(2),yyyy:h,h:v%12||12,hh:n(v%12||12),H:v,HH:n(v),M:y,MM:n(y),s:g,ss:n(g),l:n(S,3),L:n(Math.round(S/10)),t:v<12?"a":"p",tt:v<12?"am":"pm",T:v<12?"A":"P",TT:v<12?"AM":"PM",Z:d?"GMT":o?"UTC":(String(l).match(t)||[""]).pop().replace(a,""),o:(_>0?"-":"+")+n(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][m%10>3?0:(m%100-m%10!=10)*m%10],W:T,N:E};return i.replace(e,function(e){return e in U?U[e]:e.slice(1,e.length-1)})}}();r.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},r.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},t.default=r},49:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});n(a(6)),n(a(5));var s=n(a(13)),r=n(a(1));t.default={name:"page-purchase-invoice-dialog",components:{},beforeCreate:function(){},created:function(){this.reloadTable()},data:function(){return{activeInputTabName:"basic",isDialogShow:!0,stepsData:[],endStepsData:[],activeIndex:null,endFormater:"yyyy-mm-dd HH:MM:ss"}},props:{args:Object,service:String,method:String,dataSource:{type:Array,default:function(){return[]}}},methods:{onClick:function(e){this.activeIndex!==e?this.activeIndex=e:this.activeIndex=null},closeDialog:function(){this.isDialogShow=!1,this.$emit("close")},reloadTable:function(){var e=this,t=this,a=t.args||{};t.service&&t.method&&!t.isEmptyObject(a)?(this.loading=!0,(0,r.default)({service:t.service,method:t.method,args:a}).then(function(a){e.loading=!1;200==a.data.status?(t.dataSource=a.data.result,t.$emit("data-loaded",t.dataSource)):t.dataSource=[]}).catch(function(t){e.loading=!1})):t.updateDataSource(t.dataSource)},isEmptyObject:function(e){for(var t in e)return!1;return!0},updateDataSource:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.length>0&&t.forEach(function(t){var a=[],n=void 0==t.markKey?"":t.markKey,r=void 0==t.startName?t.starter:t.startName,l=t.startTime>0?(0,s.default)(1e3*t.startTime,e.endFormater):"",i={};i.title="流程起始",i.span=[{text:"审批流程ID："+t.insId},{text:"发起时间："+l},{text:"单据编码："+n},{text:"发起人："+r}],!0===t.end?a.push(i):e.stepsData.push(i);var o=t.taskDetail.length;t.taskDetail.forEach(function(n,r){var l={};l.title=n.taskName;var i=n.executeUser?n.executeName&&n.executeName.length?n.executeName:n.executeUser:null,d=n.assignee?n.assigneeName?n.assigneeName:n.assignee:null;i=i||d;var u=n.commentTime>0?(0,s.default)(1e3*n.commentTime,e.endFormater):"",c=n.createTime>0?(0,s.default)(1e3*n.createTime,e.endFormater):"",m=n.comment?n.comment:"";l.span=[{text:"流程任务ID："+n.taskId},{text:" 生成时间："+c},{text:"处理时间："+u},{text:"处理人："+i},{text:"审批意见："+m}],!0===t.end?(!1===t.audit&&(l.status="error"),a.push(l)):(!1===t.audit&&(l.status="error"),e.stepsData.push(l),r==o-1&&(!0===t.suspend?l.status="suspend":l.status="process"))});var d={};d.title="流程结束",!0===t.end&&a.push(d),!0===t.end&&e.endStepsData.push(a)})}},watch:{args:function(e){this.reloadTable(e)},dataSource:function(e){this.updateDataSource(e)}}}},51:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.steps-container.t8t-full-dialog2 .el-tabs__header {\n    border-top: none;\n}\n",""])},52:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.tc[data-v-38965a90]{\n    text-align: center;\n}\n.steps-wrap[data-v-38965a90]{\n    width: 1200px;\n    margin: 0 auto;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n.steps-wrap1[data-v-38965a90]{\n    width: 1200px;\n    margin: 25px auto;\n    border: 1px solid gray;\n    padding: 20px 50px;\n}\n.steps-wrap1 .t8t-steps[data-v-38965a90]{\n    display: none;\n}\n.steps-wrap1.active .t8t-steps[data-v-38965a90]{\n    display: block;\n}\n.header[data-v-38965a90]{\n    height: 50px;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    -ms-flex-pack: justify;\n        justify-content: space-between;\n}\n.btn[data-v-38965a90]{\n    /*margin-right: 20px;*/\n}\n.title[data-v-38965a90]{\n    font-size: 16px;\n}\n.my-no-flow[data-v-38965a90]{\n    text-align: center;\n    margin-top: 40px;\n    font-size:20px;\n    font-weight: bold;\n}\n.step-page-header[data-v-38965a90]{\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    min-height: 48px;\n    width:1100px;\n}\n",""])},53:function(e,t,a){var n=a(51);"string"==typeof n&&(n=[[e.id,n,""]]);a(3)(n,{});n.locals&&(e.exports=n.locals)},54:function(e,t,a){var n=a(52);"string"==typeof n&&(n=[[e.id,n,""]]);a(3)(n,{});n.locals&&(e.exports=n.locals)},55:function(e,t,a){a(54),a(53);var n=a(4)(a(49),a(56),"data-v-38965a90",null);e.exports=n.exports},56:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"t8t-full-dialog2 steps-container",class:{isHide:e.isTopHide},attrs:{size:"full"},on:{close:e.closeDialog},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t}}},[a("div",{staticClass:"t8t-full-dialog2-container"},[a("div",{staticClass:"full-dialog-toolbar-container"},[a("div",{staticClass:"toolbar-container"})]),e._v(" "),a("div",{staticClass:"dialog2-main-container"},[a("h1",{staticClass:"tc"},[e._v("审批流程")]),e._v(" "),a("div",{staticClass:"full-dialog-tabs-container"},[a("el-tabs",{model:{value:e.activeInputTabName,callback:function(t){e.activeInputTabName=t}}},[a("el-tab-pane",{attrs:{label:"处理中",name:"basic"}},[e.stepsData.length>0?a("div",{staticClass:"steps-wrap"},[a("t8t-steps",{attrs:{stepsData:e.stepsData}})],1):a("div",{staticClass:"my-no-flow"},[e._v("\n                            暂无流程\n                        ")])]),e._v(" "),a("el-tab-pane",{attrs:{label:"已结束",name:"other"}},[e.endStepsData.length>0?a("div",e._l(e.endStepsData,function(t,n){return a("div",{staticClass:"steps-wrap1",class:{active:e.activeIndex===n}},[a("div",{staticClass:"header"},[a("el-row",{staticClass:"step-page-header"},[a("el-col",{attrs:{span:23}},[a("div",{staticClass:"title"},e._l(t[0].span,function(t,n){return a("el-col",{attrs:{span:6}},[e._v(e._s(t.text))])}))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.onClick(n)}}},[e._v("查看详情")])],1)],1)],1),e._v(" "),a("t8t-steps",{attrs:{stepsData:t}})],1)})):a("div",{staticClass:"my-no-flow"},[e._v("\n                            暂无流程\n                        ")])])],1)],1)])])])},staticRenderFns:[]}},145:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={SURCHARGE:{name:"tmChVEga-qCgUACgQYbyP7v9n-jmu6w",methods:{GETPROCESSDETAILBYID:"2_vAV5Cj6GaDRFLFTOKHP4-sS5AFF0Vzmuhx0yaBRuM3ktRLysDLd2W__7p",GETDETAILBYPROCESSID:"OZFTbSttPn7rzQ5n_X_aRWGX_ZP4pNNUzVCkLXMKDWfwdaG9HcX31ukwMz0",QUERYDETAIL:"h9nYpfLeEx5nydMyje8tpq5wNmtpeDepVqy4XnGvnV4cayU",QUERYPAGE:"IdkOGzLbJvVcXyNeGeTaeQK2yNVW1bUXW_kYTi6QTIc",VERIFY:"kqZYmP1-sg1YxLloSPtfsPaaXaRYjqkcT_z"}}}},521:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(145)),r=(n(a(6)),n(a(55)));t.default={components:{T8tStepPage:r.default},data:function(){return{detailRoute:"/delivery/page-surcharge-detail",service:s.default.SURCHARGE.name,method:s.default.SURCHARGE.methods.QUERYPAGE,tableArgs:{search:{supplierName_like:null,verifyStatus:null,settleStatus:null,createTime_gte:null,createTime_lte:null}},tableColumns:[{prop:"code",label:"单据编码"},{prop:"supplierName",label:"供应商名称"},{prop:"surchargeTypeName",label:"附加费类别"},{prop:"sourceOrderType",label:"关联单据类型"},{prop:"sourceOrderCode",label:"关联单据编码"},{prop:"applyAmount",label:"申请金额"},{prop:"realAmount",label:"实付金额"},{prop:"verifyStatus",label:"数据状态",list:"verifyStatusOpt"},{prop:"settleStatus",label:"结算状态",list:"settleStatusOpt"},{prop:"createUserName",label:"创建人"},{prop:"createTime",label:"创建时间",formatter:"dateParser"}],searchFields:[{type:"input",label:"单据编码",name:"code_like"},{type:"input",label:"商家名称",name:"supplierName_like"},{type:"select",label:"数据状态",name:"verifyStatus",selectSourceKey:"verifyStatusOpt"},{type:"select",label:"结算状态",name:"settleStatus",selectSourceKey:"settleStatusOpt"},{type:"datepicker",label:"创建时间",pickertype:"daterange",startField:"createTime_gte",endField:"createTime_lte"}],searchOptions:{verifyStatusOpt:[{value:0,text:"无状态"},{value:1,text:"暂存(新生成)"},{value:2,text:"审核中"},{value:3,text:"暂存(重新审核)"},{value:4,text:"已审核"},{value:5,text:"已关闭"}],settleStatusOpt:[{value:0,text:"无状态"},{value:1,text:"待结算"},{value:2,text:"结算中"},{value:3,text:"已结算"}],sourceOrderTypeOpt:[{value:0,text:""},{value:1,text:"直运采购订单"},{value:2,text:"安装单"},{value:3,text:"测量单"},{value:4,text:"标准采购订单"}]},flowArgs:{},flowService:s.default.SURCHARGE.name,flowMethod:s.default.SURCHARGE.methods.GETPROCESSDETAILBYID,flowData:[],isShowFlow:!1}},created:function(){},methods:{doView:function(){var e=this.$refs["list-view"].getTableInstance().getSelectRows();e.length>0?this.$router.push({path:this.detailRoute,query:{id:e[0].id}}):this.$message.error("请选择操作单据后重试")},onSearchSubmit:function(e){this.tableArgs={search:e}},flowBtn:function(){this.$TCS.addTag("red_13937_010007009002");var e=this.$refs["list-view"].getTableInstance().getSelectRows();if(e.length>0){if(e.length>1)return void this.$message.error("请选择单条操作单据后重试");if(!e[0].processId)return void this.$message.error("该单据未启动流程");this.flowArgs={id:e[0].id},this.isShowFlow=!0}else this.$message.error("请选择操作单据后重试")},closeStepPage:function(){this.isShowFlow=!1}}}},1966:function(e,t,a){var n=a(4)(a(521),a(2411),null,null);e.exports=n.exports},2411:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("t8t-list-view",{ref:"list-view",attrs:{breadcrumbData:e.breadcrumbData,searchFields:e.searchFields,searchOptions:e.searchOptions,showSearchToggleBtn:!0,tableColumns:e.tableColumns,tableService:e.service,tableArgs:e.tableArgs,tableMethod:e.method,tableCommonData:e.searchOptions},on:{"list-view":e.doView,"list-approval-flow":e.flowBtn,"table-row-dobule-click":e.doView,"search-submit":e.onSearchSubmit}}),e._v(" "),e.isShowFlow?a("t8t-step-page",{attrs:{args:e.flowArgs,service:e.flowService,method:e.flowMethod,dataSource:e.flowData},on:{close:e.closeStepPage}}):e._e()],1)},staticRenderFns:[]}}});