webpackJsonp([90,269],{5:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(1)),o=n(a(8));t.default={allSystemCodeList:function(e){return(0,r.default)({method:o.default.CONFIGURE.methods.SYS_CODE_LIST,service:o.default.CONFIGURE.name,args:e})},listNextLevelUnforbidden:function(e){return(0,r.default)({method:o.default.CONFIGURE.methods.LIST_UNFORBIDDEN,service:o.default.CONFIGURE.name,args:e})},queryUnionParent:function(e){return(0,r.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryUnionParent,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryPage:function(e){return(0,r.default)({method:o.default.SUPPLY_CONFIGURE.methods.QUERY_PAGE,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryShopUnion:function(e){return(0,r.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryShopUnion,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryShop:function(e){return(0,r.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryShop,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryByFunctionCode:function(e){return(0,r.default)({method:o.default.ORGANIZATION.methods.QUERY_BY_FUNCTIONCODE,service:o.default.ORGANIZATION.name,args:e})},queryAll:function(e){return(0,r.default)({method:o.default.ORGANIZATION.methods.ORG_QUERY,service:o.default.ORGANIZATION.name,args:e})},queryTreeByTypeAndFunction:function(e){return(0,r.default)({method:o.default.ORGANIZATION.methods.QUERY_TREE_FUNCTION,service:o.default.ORGANIZATION.name,args:e})},queryChildrenByWholeCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,r.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCode,service:o.default.SUPPLY_CONFIGURE.name,args:{wholeCode:e,depth:t}})},queryChildrenByWholeCodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,r.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCodes,service:o.default.SUPPLY_CONFIGURE.name,args:{wholeCodes:e,depth:t}})},getAllQueue:function(){return(0,r.default)({method:o.default.EDA.methods.QUERY_QUEUE_QUERYQUEUES,service:o.default.EDA.name,args:{}})}}},8:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={CONFIGURE:{name:"OnLYil9jY0PiKilsavskNJvygGUxhME7eLPWccmGmYjb_ED",methods:{SYS_CODE_LIST:"vPnFi_QA4HeBWeU61ZjQPCn",LIST_UNFORBIDDEN:"vL0y_oFhAeDM3YTmFrp2oaHn1UDcQEzq1orWi41sEc2pVcjlpGN"}},SUPPLY_CONFIGURE:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"Ewi6YId8aELgLHFBBSBMT4BvG3R",queryUnionParent:"5l6jR2KUJ4QdYxLFz0ZJGFy5XZkLajNNSEdLf0t",queryShopUnion:"zPrIoMCwO3geMqwnGH2Afs0w-7lpdva",queryShop:"4VE-APqV_Fs13Cswfj8",queryChildrenByWholeCode:"sDE1BauR-rhu_AU-6F9VF952lJ_JIl-r1QOnscFpFYW0GFS9p3nAG1z",queryChildrenByWholeCodes:"CEGKxWt_AJmoqBtXoGEqET64657I2n7n39qadM-E_uX2b1O8X5k8Ii2vEnj"}},ORGANIZATION:{name:"CsxicaQ7wM_3kaiMdGJQAaOa2fUF8v-",methods:{QUERY_BY_FUNCTIONCODE:"UwBgld0zWv.T_KSfK6W2_uSPCGXiv-mkEbmTNx6qeGoR_hH",ORG_QUERY:"DOiN6_9fU1yNwZE_gRuTrdwwvEg",QUERY_TREE_FUNCTION:"-DB0-GqPoWXHozK4BKUV3yMPaFmC4lppJyYYIe9k-Gk5VCj84OEe2JBi24SnYuFqXHe",ORG_QUERY_WITHOUTDEL:"9Ivp3_1e5zNZU_miVqa6YXq9Zg0sb1JBadatp4EuTiR"}},GOODS:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"ByoqRxHfrD8M7MGSNKC-qVN",QUERY_PAGE_GOODS_UNION:"KYI9tvUKvrmrnw02TOmUAbkj27FmFOkq8nDox-O"}},EDA:{name:"806ndPAX4QHSaL8S3kOGYVWD7gJKERC",methods:{QUERY_QUEUE_QUERYQUEUES:"NJaG8pAbK6IGAM2RtOG2V_cGwPKCj8.QKtj"}}}},9:function(e,t,a){e.exports=a(7)(105)},11:function(e,t,a){e.exports=a(7)(68)},13:function(e,t,a){"use strict";function n(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(a(9)),o=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(s,i,d,l){if(1!==arguments.length||"string"!==function(e){return null===e?"null":void 0===e?"undefined":"object"!==(void 0===e?"undefined":(0,r.default)(e))?void 0===e?"undefined":(0,r.default)(e):Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}(s)||/\d/.test(s)||(i=s,s=void 0),(s=s||new Date)instanceof Date||(s=new Date(s)),isNaN(s))throw TypeError("Invalid date");var u=(i=String(o.masks[i]||i||o.masks.default)).slice(0,4);"UTC:"!==u&&"GMT:"!==u||(i=i.slice(4),d=!0,"GMT:"===u&&(l=!0));var c=d?"getUTC":"get",f=s[c+"Date"](),m=s[c+"Day"](),h=s[c+"Month"](),p=s[c+"FullYear"](),g=s[c+"Hours"](),y=s[c+"Minutes"](),v=s[c+"Seconds"](),S=s[c+"Milliseconds"](),T=d?0:s.getTimezoneOffset(),b=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-n);var r=(t-a)/6048e5;return 1+Math.floor(r)}(s),C=function(e){var t=e.getDay();return 0===t&&(t=7),t}(s),_={d:f,dd:n(f),ddd:o.i18n.dayNames[m],dddd:o.i18n.dayNames[m+7],m:h+1,mm:n(h+1),mmm:o.i18n.monthNames[h],mmmm:o.i18n.monthNames[h+12],yy:String(p).slice(2),yyyy:p,h:g%12||12,hh:n(g%12||12),H:g,HH:n(g),M:y,MM:n(y),s:v,ss:n(v),l:n(S,3),L:n(Math.round(S/10)),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:l?"GMT":d?"UTC":(String(s).match(t)||[""]).pop().replace(a,""),o:(T>0?"-":"+")+n(100*Math.floor(Math.abs(T)/60)+Math.abs(T)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10],W:b,N:C};return i.replace(e,function(e){return e in _?_[e]:e.slice(1,e.length-1)})}}();o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},t.default=o},49:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});n(a(6)),n(a(5));var r=n(a(13)),o=n(a(1));t.default={name:"page-purchase-invoice-dialog",components:{},beforeCreate:function(){},created:function(){this.reloadTable()},data:function(){return{activeInputTabName:"basic",isDialogShow:!0,stepsData:[],endStepsData:[],activeIndex:null,endFormater:"yyyy-mm-dd HH:MM:ss"}},props:{args:Object,service:String,method:String,dataSource:{type:Array,default:function(){return[]}}},methods:{onClick:function(e){this.activeIndex!==e?this.activeIndex=e:this.activeIndex=null},closeDialog:function(){this.isDialogShow=!1,this.$emit("close")},reloadTable:function(){var e=this,t=this,a=t.args||{};t.service&&t.method&&!t.isEmptyObject(a)?(this.loading=!0,(0,o.default)({service:t.service,method:t.method,args:a}).then(function(a){e.loading=!1;200==a.data.status?(t.dataSource=a.data.result,t.$emit("data-loaded",t.dataSource)):t.dataSource=[]}).catch(function(t){e.loading=!1})):t.updateDataSource(t.dataSource)},isEmptyObject:function(e){for(var t in e)return!1;return!0},updateDataSource:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.length>0&&t.forEach(function(t){var a=[],n=void 0==t.markKey?"":t.markKey,o=void 0==t.startName?t.starter:t.startName,s=t.startTime>0?(0,r.default)(1e3*t.startTime,e.endFormater):"",i={};i.title="流程起始",i.span=[{text:"审批流程ID："+t.insId},{text:"发起时间："+s},{text:"单据编码："+n},{text:"发起人："+o}],!0===t.end?a.push(i):e.stepsData.push(i);var d=t.taskDetail.length;t.taskDetail.forEach(function(n,o){var s={};s.title=n.taskName;var i=n.executeUser?n.executeName&&n.executeName.length?n.executeName:n.executeUser:null,l=n.assignee?n.assigneeName?n.assigneeName:n.assignee:null;i=i||l;var u=n.commentTime>0?(0,r.default)(1e3*n.commentTime,e.endFormater):"",c=n.createTime>0?(0,r.default)(1e3*n.createTime,e.endFormater):"",f=n.comment?n.comment:"";s.span=[{text:"流程任务ID："+n.taskId},{text:" 生成时间："+c},{text:"处理时间："+u},{text:"处理人："+i},{text:"审批意见："+f}],!0===t.end?(!1===t.audit&&(s.status="error"),a.push(s)):(!1===t.audit&&(s.status="error"),e.stepsData.push(s),o==d-1&&(!0===t.suspend?s.status="suspend":s.status="process"))});var l={};l.title="流程结束",!0===t.end&&a.push(l),!0===t.end&&e.endStepsData.push(a)})}},watch:{args:function(e){this.reloadTable(e)},dataSource:function(e){this.updateDataSource(e)}}}},51:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.steps-container.t8t-full-dialog2 .el-tabs__header {\n    border-top: none;\n}\n",""])},52:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.tc[data-v-38965a90]{\n    text-align: center;\n}\n.steps-wrap[data-v-38965a90]{\n    width: 1200px;\n    margin: 0 auto;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n.steps-wrap1[data-v-38965a90]{\n    width: 1200px;\n    margin: 25px auto;\n    border: 1px solid gray;\n    padding: 20px 50px;\n}\n.steps-wrap1 .t8t-steps[data-v-38965a90]{\n    display: none;\n}\n.steps-wrap1.active .t8t-steps[data-v-38965a90]{\n    display: block;\n}\n.header[data-v-38965a90]{\n    height: 50px;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    -ms-flex-pack: justify;\n        justify-content: space-between;\n}\n.btn[data-v-38965a90]{\n    /*margin-right: 20px;*/\n}\n.title[data-v-38965a90]{\n    font-size: 16px;\n}\n.my-no-flow[data-v-38965a90]{\n    text-align: center;\n    margin-top: 40px;\n    font-size:20px;\n    font-weight: bold;\n}\n.step-page-header[data-v-38965a90]{\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    min-height: 48px;\n    width:1100px;\n}\n",""])},53:function(e,t,a){var n=a(51);"string"==typeof n&&(n=[[e.id,n,""]]);a(3)(n,{});n.locals&&(e.exports=n.locals)},54:function(e,t,a){var n=a(52);"string"==typeof n&&(n=[[e.id,n,""]]);a(3)(n,{});n.locals&&(e.exports=n.locals)},55:function(e,t,a){a(54),a(53);var n=a(4)(a(49),a(56),"data-v-38965a90",null);e.exports=n.exports},56:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"t8t-full-dialog2 steps-container",class:{isHide:e.isTopHide},attrs:{size:"full"},on:{close:e.closeDialog},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t}}},[a("div",{staticClass:"t8t-full-dialog2-container"},[a("div",{staticClass:"full-dialog-toolbar-container"},[a("div",{staticClass:"toolbar-container"})]),e._v(" "),a("div",{staticClass:"dialog2-main-container"},[a("h1",{staticClass:"tc"},[e._v("审批流程")]),e._v(" "),a("div",{staticClass:"full-dialog-tabs-container"},[a("el-tabs",{model:{value:e.activeInputTabName,callback:function(t){e.activeInputTabName=t}}},[a("el-tab-pane",{attrs:{label:"处理中",name:"basic"}},[e.stepsData.length>0?a("div",{staticClass:"steps-wrap"},[a("t8t-steps",{attrs:{stepsData:e.stepsData}})],1):a("div",{staticClass:"my-no-flow"},[e._v("\n                            暂无流程\n                        ")])]),e._v(" "),a("el-tab-pane",{attrs:{label:"已结束",name:"other"}},[e.endStepsData.length>0?a("div",e._l(e.endStepsData,function(t,n){return a("div",{staticClass:"steps-wrap1",class:{active:e.activeIndex===n}},[a("div",{staticClass:"header"},[a("el-row",{staticClass:"step-page-header"},[a("el-col",{attrs:{span:23}},[a("div",{staticClass:"title"},e._l(t[0].span,function(t,n){return a("el-col",{attrs:{span:6}},[e._v(e._s(t.text))])}))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.onClick(n)}}},[e._v("查看详情")])],1)],1)],1),e._v(" "),a("t8t-steps",{attrs:{stepsData:t}})],1)})):a("div",{staticClass:"my-no-flow"},[e._v("\n                            暂无流程\n                        ")])])],1)],1)])])])},staticRenderFns:[]}},99:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(1)),o=n(a(107)),s=n(a(108));t.default={getRelationStoragesByAccountId:function(e){return(0,r.default)({method:o.default.STORAGES.methods.getRelationStoragesByAccountId,service:o.default.STORAGES.name,args:{accountId:e}})},getAllBranchCompany:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getOrganizationByTypeCode(s.default.typeCode.branchCompany,e)},getAllBranchCompanyAndStore:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getOrganizationByTypeCode([s.default.typeCode.branchCompany,s.default.typeCode.store],e)},getAllStore:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getOrganizationByTypeCode(s.default.typeCode.store,e)},getOrganizationByTypeCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};return a="string"==typeof e?{typeCode_eq:e}:{typeCode_in:e},t&&(a.isDel=0),this.searchOrganization(a)},getAllStoreByCompanyId:function(e){var t={};return e&&(t={parentId_eq:e,typeCode_eq:s.default.typeCode.store}),this.searchOrganization(t)},searchOrganization:function(e){return(0,r.default)({method:o.default.STORAGES.methods.organizationQuery,service:o.default.STORAGES.name,args:{search:e}})},findOrgById:function(e){return(0,r.default)({method:o.default.STORAGES.methods.findOrgById,service:o.default.STORAGES.name,args:{id:e}})}}},107:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={STORAGES:{name:"L29ayPpC3PMWdg8tnQJNjYmuSEjMDZB",methods:{getRelationStoragesByAccountId:"6qpYf6GYaQS4mIzrd5co3UM36bDW6ZEJrX7U0iPIc1hxXfiz3DN",organizationQuery:"a-GBd1krF7w0DBvjMsd4F0orXdF",findOrgById:"n1EjEy1fY2s_QBnicLnD5DoAup7FqQi3fyx"}},INVORGS:{name:"XAgCY5Yu3vtfJ5mOz6l1EatklIpkR9ATvWAjWO5sLB9onDCTTYI",methods:{orgQueryPage:"9C7rcd65dU6JnNd4kGqUpR_6QCAqFOtANDv9BpD85kG8d1j",orgQuery:"ObB7LfrK0M3VLALaE6xboHiffuTm4lgbkAxRdd0QS0F",storageQuery:"isWQivU5v8S4WStoLiUSpvTu31ya5h.swBH",goodsRecordList:"7EesjOInTJa7X_HMS-V-UCZCYNloSCuZjp6GdscyzGhQt1y",storageBinQuery:"99rdBMsbQptsCPGZfPbDEAo8qQJfjOG7dIcEgJ0",statusQuery:"hcULftT8j8fAoEUOShvgp8iNO30wd6yjmHd"}}}},108:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={typeCode:{mainCompany:"001003001",company:"001003002",factory:"001003003",bu:"001003004",region:"001003005",branchCompany:"001003006",agency:"001003007",section:"001003008",storage:"001003009",store:"001003010",group:"001003011",others:"001003012",gallery:"001003014"}}},167:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={order:{name:"I1c2Cx1PxgTcpqUYzfTQualK0vhZ94S",methods:{create:"CYfdVCcvmAInVRLrotLJeTFv5J-6AR6Zs5cN9KW",detail:"nzvxYtZ3pvKtURLvgjkgK4gBVfPkR6iLQRuTcg1",detailVerify:"TiLaDyKVaQAsXBupUQzkPd-KUkVvrDBPxD_aZmIPcLuAL_0",addList:"611_9Gnp6A1lUo0VXmUzavLiHjEo0URn2zyxWI_6ddP",subList:"CML0DVyNGt2pCt1laAflbT5dYK39n-sbIl1ymLZselm",getQuoteOrderSpace:"X0uxaHJ8sgS-qDg7lFaengUrs0P8BxbhzjN",submit:"8FBDfJRnK7FiR1AxEd1_oNyTnQzykM7U0W9FCOP",print:"bSRRHlNZdh9zIcT-fgEE4s_j1OHYzuX_NKXYg8q",VOID:"VittbTpNiQXHygW57MHBza__aLhY8haPpV1",unSubmit:"vsp5y7fCyeAe5gqYIgJvQAZ7d5dqcD3v7AZxpdzzqiG",completeTask:"BdJURYr_NPtgaGvFtfOM0QQ7AZ25klNRj0k"}},workFlow:{name:"I1c2Cx1PxgTcpqUYzfTQualK0vhZ94S",methods:{getBusinessKeyDetail:"ntwMuDkDFF1gAtmoeocMEDugiSemvf2jCaBIyMsnQDsnAUXSetOlceZlNpN",querySignedProjects:"Yul33uIcygqk-hcqTs4yg2b0LCUumZ2xkctvL91rUSxtI62o7VG",variationOrderList:"Lgkgd6NbJVHuWE00kKU9cN2EkcY1aKIIhvLvAew"}}}},257:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(76)),o=n(a(1)),s=n(a(167));t.default={orderDetail:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o.default)({service:s.default.order.name,method:s.default.order.methods.detailVerify,args:{id:a,projectId:e,accountId:t}})},create:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,o.default)({service:s.default.order.name,method:s.default.order.methods.create,args:{dto:{id:e,yid:t,delVariationItemIds:n,variationOrderItems:r},accountId:a}})},verify:function(e,t,a,n,r){var i=1==r,d=n||"";return(0,o.default)({service:s.default.order.name,method:s.default.order.methods.completeTask,args:{req:{taskId:e,procInsId:t,executor:a,comment:d,biz:{deptLeaderApprove:i,deptLeaderComment:d},workflow:{isPass:i}}}})},getQuoteOrderSpace:function(e){var t=[];return new r.default(function(a,n){(0,o.default)({service:s.default.order.name,method:s.default.order.methods.getQuoteOrderSpace,args:{projectId:e}}).then(function(e){200==e.data.status?(e.data.result.forEach(function(e){t.push({text:e.spaceName+"/"+e.spaceAlias,value:e.id})}),a(t)):n(t)}).catch(function(e){n(t)})})},submit:function(e,t){return new r.default(function(a,n){(0,o.default)({service:s.default.order.name,method:s.default.order.methods.submit,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a():n(e.data.result||e.data.message||"提交失败")}).catch(function(e){n("提交异常")})})},void:function(e,t){return new r.default(function(a,n){(0,o.default)({service:s.default.order.name,method:s.default.order.methods.VOID,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a():n(e.data.result||e.data.message||"作废失败")}).catch(function(e){n("作废出现异常")})})},unSubmit:function(e,t){return new r.default(function(a,n){(0,o.default)({service:s.default.order.name,method:s.default.order.methods.unSubmit,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a():n(e.data.result||e.data.message||"反审核失败")}).catch(function(e){n("反审核出现异常")})})}}},790:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(11)),o=(n(a(77)),n(a(6))),s=n(a(167)),i=(n(a(257)),n(a(5)),n(a(99))),d=n(a(13)),l=n(a(55));t.default={components:{T8tStepPage:l.default},name:"show",data:function(){return{flowArgs:{},flowService:s.default.workFlow.name,flowMethod:s.default.workFlow.methods.getBusinessKeyDetail,flowData:[],isShowFlow:!1,currentRow:null,tabs:[{name:"已签约报价单",symbol:"quoteList"},{name:"变更单",symbol:"quoteChangeList"}],activeName:"quoteList",service:s.default.workFlow.name,method:s.default.workFlow.methods.querySignedProjects,args:{accountId:+o.default.get("t8t-tc-uid")},fullscreenLoading:!1,fields:[{type:"input",label:"项目ID",name:"yid"},{type:"select",label:"组织",name:"orgId",selectSourceKey:"organizes"}],fields2:[{type:"input",label:"项目ID",name:"yid"},{type:"select",label:"组织",name:"orgId",selectSourceKey:"organizes"}],formSelectSource:{organizes:[]},columns:[],quoteColumns:[{prop:"yid",label:"项目ID"},{prop:"ownerName",label:"业主姓名"},{prop:"orgName",label:"组织"},{prop:"area",label:"计价面积"},{prop:"houseTypeName",label:"户型"},{prop:"id",label:"报价单ID"},{prop:"totalPrice",label:"合同金额"},{prop:"updateTime",label:"更新日期",formatter:function(e){return e?(0,d.default)(new Date(1e3*e).getTime(),"yyyy-mm-dd HH:MM"):"--"}},{prop:"orderStatus",label:"报价状态",list:"orderStatus"}],quoteChangeColumns:[{prop:"yid",label:"项目ID"},{prop:"ownerName",label:"业主姓名"},{prop:"orgName",label:"组织"},{prop:"area",label:"计价面积"},{prop:"houseTypeName",label:"户型"},{prop:"id",label:"变更单ID"},{prop:"totalPrice",label:"变更单金额"},{prop:"updateTime",label:"更新日期",formatter:function(e){return e?(0,d.default)(new Date(1e3*e).getTime(),"yyyy-mm-dd HH:MM"):"--"}},{prop:"orderStatus",label:"变更单状态",list:"orderStatus"}],commonData:{orderStatus:[{text:"完成初稿",value:0},{text:"审核中",value:1},{text:"审核驳回",value:2},{text:"报价已出",value:3},{text:"核算中",value:4},{text:"核算驳回",value:5},{text:"报价完成",value:6},{text:"已签约",value:7},{text:"作废",value:8}],forbiddenStatus:[{text:"否",value:0},{text:"是",value:1}]}}},activated:function(){this.$refs.t8tTable.reloadTable()},methods:{handleClickTabs:function(e){this.args.dto=null;var t=e.name;this.activeName=e.name,this[t]()},quoteList:function(){var e=this.$refs.t8tTable;this.columns=this.quoteColumns,this.method=e.method=s.default.workFlow.methods.querySignedProjects,e.reloadTable({page:1})},quoteChangeList:function(){var e=this.$refs.t8tTable;this.columns=this.quoteChangeColumns,this.method=e.method=s.default.workFlow.methods.variationOrderList,e.reloadTable({page:1})},submitSearch:function(e){var t=(0,r.default)({},e),a=(0,r.default)({},this.args);a.dto=t,this.args=a},jumpToQuoteChangeOrder:function(){var e=this.$refs.t8tTable,t=e.getSelectRows(),a=e.selectedRows;if((t=t.length?t:a).length<1)return this.$message.error("未选择项目");if(t.length>1)return this.$message.error("仅可选择一项，请去掉多余的选项。");var n=t[0],r=null;"quoteChangeList"==this.activeName?(this.$TCS.addTag("red_11732_018003010003"),r={orderId:n.id}):(this.$TCS.addTag("red_11732_018003010002"),r={yid:n.yid}),this.$router.push({path:"/worker/quote-changeOrder-detail",query:r})},jumpToQuoteOrder:function(){var e=this.$refs.t8tTable,t=e.getSelectRows(),a=e.selectedRows;if((t=t.length?t:a).length<1)return this.$message.error("未选择项目");if(t.length>1)return this.$message.error("仅可选择一项，请去掉多余的选项。");var n=t[0];this.$router.push({path:"/worker/quote-order-detail",query:{yid:n.yid}})},getTableData:function(){this.$refs.t8tTable.reloadTable()},showFlow:function(){var e=this.$refs.t8tTable.getSelectRow();if(null==e&&null==this.currentRow)return this.$message.error("未选择项目");var t=e||this.currentRow;this.$TCS.addTag("red_11732_018003009008"),this.flowArgs={getBusinessKeyDetailDTO:{orderId:t.id}},this.isShowFlow=!0},closeStepPage:function(){this.isShowFlow=!1},handleCurrentRowChange:function(e,t){this.currentRow=e}},created:function(){var e=this;this.columns=this.quoteColumns,i.default.getAllStore().then(function(t){var a=[];200===t.data.status&&(t.data.result.rows.forEach(function(e){a.push({value:e.id,text:e.name})}),e.formSelectSource.organizes=a)})}}},1211:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.table-container[data-v-61722aba] {\n    -ms-flex: 1;\n        flex: 1;\n    overflow: auto;\n    margin-left: -1px;\n}\n.quoteChangeList .g-main-container[data-v-61722aba]{\n\n    display: -ms-flexbox;\n\n    display: flex;\n    -ms-flex-direction: column;\n        flex-direction: column;\n}\n.hideToolbar[data-v-61722aba]{\n    display: none;\n}\n",""])},1657:function(e,t,a){var n=a(1211);"string"==typeof n&&(n=[[e.id,n,""]]);a(3)(n,{});n.locals&&(e.exports=n.locals)},2233:function(e,t,a){a(1657);var n=a(4)(a(790),a(2463),"data-v-61722aba",null);e.exports=n.exports},2463:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quoteChangeList"},[a("t8t-breadcrumb",{attrs:{data:e.breadcrumbData}}),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeName,callback:function(t){e.activeName=t}}},e._l(e.tabs,function(e){return a("el-tab-pane",{attrs:{label:e.name,name:e.symbol}})})),e._v(" "),a("t8t-search",{attrs:{fields:"quoteChangeList"==this.activeName?e.fields2:e.fields,selectSource:e.formSelectSource,showToggleBtn:!1},on:{submit:e.submitSearch}}),e._v(" "),a("div",{staticClass:"g-main-container"},[a("t8t-toolbar",{ref:"toolbar",attrs:{symbolList:"quoteList"==this.activeName?["CREATE","VIEW_QUOTE_ORDER"]:["VIEW_CHANGE_ORDER","APPROVAL-FLOW"]},on:{CREATE:function(t){e.jumpToQuoteChangeOrder()},VIEW_CHANGE_ORDER:function(t){e.jumpToQuoteChangeOrder()},VIEW_QUOTE_ORDER:function(t){e.jumpToQuoteOrder()},"APPROVAL-FLOW":function(t){e.showFlow()}}}),e._v(" "),a("t8t-table",{ref:"t8tTable",attrs:{columns:e.columns,service:e.service,method:e.method,args:e.args,pageBar:!0,commonData:e.commonData,radioCol:!0},on:{"selection-change":e.selectionChange,"row-double-click":e.jumpToQuoteChangeOrder,"current-row-change":e.handleCurrentRowChange}})],1),e._v(" "),e.isShowFlow?a("t8t-step-page",{attrs:{method:e.flowMethod,service:e.flowService,args:e.flowArgs,dataSource:e.flowData},on:{close:e.closeStepPage}}):e._e()],1)},staticRenderFns:[]}}});