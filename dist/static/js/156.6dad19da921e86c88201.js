webpackJsonp([156,269],{11:function(e,t,a){e.exports=a(7)(68)},14:function(e,t,a){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(a(16));t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},16:function(e,t,a){e.exports={default:a(17),__esModule:!0}},17:function(e,t,a){a(18);var r=a(15).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},18:function(e,t,a){var r=a(19);r(r.S+r.F*!a(27),"Object",{defineProperty:a(26).f})},28:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(e){return e&&e.__esModule?e:{default:e}}(a(14)),l={SALES:{name:"mjlD58qb1joW4ezeiAh_0IuXu820nUn",methods:{QUERY_POTENTTIAL_ORDER_BY_PAGE:"0m56zOhGZdl3dGbjhdW4Gb43SIwbtyiS3Z3opL9rZU0trPLvuFDjLLzrZNZxsB1uMrV",QUERY_INTENTIAL_ORDER_BY_PAGE:"36A7nBRz1de-2Pja15aAJv_T8jL7aOiPwgQxxdVmxTI0sD-fbhDcSk8zrlW5vV8vAeF",QUERYDETAILPAGE:"bFPbdSeFjUA-QgViBMIAOXEa1nA_KqtDiCvEP0kLv9dOOaTN7AfUN6r",LISTACCOUNTBYROLECODE:"d223tHjwuHr1xIf22xGXovr1PCpdXHM6D_tNmVY5N_uoJEnp6TxIH2mSLRkcQQR",ASSIGN_AUDIT_STAFF:"VLZV8TsFAhE-36YBtsaS6ZnAYtoO_IX8L6ZSZecPY9aN2bpNq2S-b-2",FINDORDERDETAILBYIDLIST:"j-1rvNdBcJrkcMfn5gM41z0DEvXo1O8aqw8XSi5X9sqj7uZIsxFK0OocUSztdlE",FIND_ORDER_DETAIL_BY_ID:"4QMKB3e3bDzxpw_2T06Ey_KFLZMAxCM2B1E3Rq2IAsPDArMIzfU2gkV9v3s",QUERY_ESTATE_PAGE:"Trumg_9kgLMHk0QqJXROqlgt-1h3L5QZGqMX_tZcD5hYUtF8MsLR1zQ",CREATE_ORDER:"2EQDHuFi6f2h-NDVkSF7xCI5PbcE0GPmP3a3x2SEtZe",VERIFY_IMPORT_ORDER:"3r32uOlPDycc1y6amwN4nJg2ODwJqLhur8f3q5lEW_yuXOJgVZW",IMPORT_ORDER:"Vf3l6h7QtdJr1u3X30qW6xsfkS2dKU2O83AcUTJtVCR",QUERY_PROPERTY:"cgdRVvzmVwTgSfRAaIDnkuVcpqRtNu1lCsBOCkRGOIpUyNqE_gq",UPDATE_DETAIL:"x05lyLN-WFlzwKJiuqaQ2Dp49HtHlvK3lFsGGBtllzxGa9cQe9_",CREATE_AUDIT_BILL:"W1gfZAYopCjSykEapqWfoqf3uiSPCHjc7mnNjSBpO-EUAh9cg1oYPJN",SET_PRIMARY_CONTACT:"frspi9OzObJ4HmR8QUgPsxgrB3fIatn9ZQbiM01jd3mjrqJd7umKZD5",EXPORT_POTENTIAL_ORDER:"mvboQ5R1fTMWXQ47SP8mu4kaAlbLc4RnJtd4ukTGK4TJIwiNPrnc4yzL3Ho",EXPORT_INTENTIAL_ORDER:"oBv-1UjG1pjqqjAU66Rw62uWK2dtOo7ecAlRWPoPwJenftL0eB-wLF7kfy9",CREATE_REVISIT_RECORD:"ofdcSuVkStLsQigCMw3RLVwRu0nQLvZjcLpm7b0",FIND_REVISIT_LIST:"mczuX0wRlujxewUQEzzU-XuOEGsSHw4ofPsXL7gVFZ2"}},CASHDISCOUNT:{name:"yde-kyLPNGlrmSxZfYz-XXCnS1FZS.X",methods:(r={PRIVILEGElIST:"fspjcpOtPG6tcXqsWImenbKTsOIwUc3YtMLlwPBnCAG",PRIVILEGEFORBID:"DKK28MyQwZr7_2NT3A_39L55rmMxsT1vomQpOkZ5GLI",PRIVILEGEANTIFORBID:"DR77Ki4UDhvkCJS_HwDK0LAcraHyXI3htaEwULHr_ay82UFmn8a",PRIVILEGECREATESAVE:"irr4yMmJhPlt0C-IfwivqaMoCxgMmliYF0QlrycWqaLJaLzrpFI",PRIVILEGEGETONE:"wl4yrHeDscXIqq71w_qXa4UZiV7sYGxyFV7uGoF",PRIVILEGECREATESUBMIT:"UMdXRpGnD_-eQrbfPKJYTc7-H-hOAqIV7JhNxsWLNILMpJUVPMs",PRIVILEGEUPDATESAVE:"VdwsXCEoWSR2ncb6lfondMRcnn-rboOh4TNPwhiJrcf9_DBRK6L",PRIVILEGEUPDATESUBMIT:"E4IIuKtUCntO9OG-A59sMnp4-vnXH9q5OF4TL73433am1u88WLU",PRIVILEGEORDERLIST:"octthDE6lNBMzoxq8yiLnwJL_RolPU3h-v-oFGJ",PRIVILEGECANCEL:"EiQObiCWZBGRHdOjSBdTMRxp-rH8Ze_XD8YPf8nDs8o",PRIVILEGECREATEORDER:"FQ8-QFjkExyhADS6jTFB1NpQ0MFveDDPgLEsB4R",PRIVILEGESETDISABLE:"19iKJGKyYxxh_zOHCAs_9qctNs9yDGOrKv5oh7au4hD-0pT",PRIVILEGECANCELDISABLE:"VdbgW12sHwxRGiZNVFRfZdKtEdXBGZBeOtXUe-YMCdqORCqDOrp",PRIVILEGEGETORDER:"XeJgUtbvpXCugAcNhUQDfLbEbP6DhpGUbMX",PRIVILEGEUPDATEORDER:"xM3EvIozPCXu5BOHc9Bn_55Jo2q-prUt8RIA5iN",LISTDECORATIONORDERINFO:"RgZYEdwtmAp-eALeHg7IEZNr8L_7AS97aWC9FHKdxsMK4P_NudxRb0KVYHgAa20",QUERYDETAILPAGE:"bFPbdSeFjUA-QgViBMIAOXEa1nA_KqtDiCvEP0kLv9dOOaTN7AfUN6r"},(0,o.default)(r,"QUERYDETAILPAGE","bFPbdSeFjUA-QgViBMIAOXEa1nA_KqtDiCvEP0kLv9dOOaTN7AfUN6r"),(0,o.default)(r,"FIND_ORDERDETIAL_BY_IDLIST","-D0IBZZ7oVkA3VqE46mCQ4zgW7TiBa12F5H0s8DyCrH1HqTU4qhlXz5us4734qD"),r)},ORGNAME:{name:"UqcOtUkCoC6Ekm4p9MfLsM3BXeM8050",methods:{FINDORDBYID:"5r1I4FXW8XlU2DxxO8nEGHPSyvLEKgOP0FA",QUERY:"Ry_OfA9EuObbAaQM4pIfBrUNwhh",QUERYTREEBYTYPE:"IefMV_-kDFPfZ-shDibTaiAtug9yEjMCuudrr6HFltn"}},DISCOUNT_APPROVE_BILLS:{name:"yde-kyLPNGlrmSxZfYz-XXCnS1FZS.X",methods:{QUERY_PAGE:"IbhNeUzLndVW-sEPpyC81wUuOpHlqmib0Mo",LIST_DECORATION_ORDERINFO:"RgZYEdwtmAp-eALeHg7IEZNr8L_7AS97aWC9FHKdxsMK4P_NudxRb0KVYHgAa20",GET_DECORATION_ORDERINFO:"BGHxG_n-kK59dRJZDPQ4AJzZqGJJ-cLqJo064a9atB_nHfNarkNK6JVG5wI-Ugi",CREATE:"ZLxchUBG1PmPKqWs1_BRPIuk9RpVgUpok_ufNWZYxQL",GET_ORDERINFO_BYID:"4Dz_6RlLmxf69BDHVygbN2UvPlN_6za3eKh",UPDATE_SAVE:"ENIYDbwjN-pWOlhvcL34xZApIYvLKlAurmUHzTBma7n",CREATE_SUBMIT:"JWSUIlzGBAqLIFUVfH8reJzEd5NlbC_gdHtMj2jAUhZKvru",UPDATE_SUBMIT:"ZgiRTjLaDW_uSNsllyS-8uTDBo3mBbYEDqY9NJuClxjas2s",VERIFY_PROCESS:"RRFB-UtaMGuh9DbTCHFbmEmxToIFZLTWH7zepgMUBQQ8Ttd",REJECT_PROCESS:"dnnaS6QgZM0kPbEreVDVyanIKnOr7mPZJWSMT23c8NmesBD"}},ACTIVITY_TYPE:{name:"l4JP_07XHgOUCuagFgr7KuYT31hTLfS",methods:{QUERY_PAGE:"YYPHqnXstU4mrZA1c3V1bZc7JkEpI35mjSN",CREATE:"jlVAnfRmZPxbseNzIO1Y9oeRBhIu9b8",UPDATE:"mRF_lSfuiBzNrdKxS0c-XU-QM_UWFyF",DELETE_BATCH:"10aBzw0Drkx_re33hDnDcC5TiNyvjHMvwbM",FIND_BY_ID:"65lc-p0mDslEv7ihApdykKq1bR7h_Sz"}},ACTIVITY_LIST:{name:"l4JP_07XHgOUCuagFgr7KuYT31hTLfS",methods:{USER_FIND_BYID:"pqfIYlvsuSHiDtViTmf7mhsoxpj",UPDATE_STATUS_AUTHENTIC:"lRTyT8uRDkBpylfHF2k6_9WMeUYlSjaYOS-RGNM"}},COMPANYALLOCATION:{name:"3OvR1cNjj7isVDwxOiFvf0Yl4HtvtFV",methods:{COMPANYALLOCATIONFINDBYID:"qfkbbW_F3RxD5U976ZfK5U8zcgQaiW8EmQcxCpvkJWyIMJI",COMPANYALLOCATIONEXPORT:"RcXIPbChQd4nWXB5kDeN9gR4gV8NEhCNxyoULXVUv9q",COMPANYALLOCATIONVIEWSQUERYPAGE:"SJWdWPqBTRB2ZzPO6mjP6rhL-uVLM2i-sagRHaWDdCBVHHlT66EPYG0",reAllocation:"PrZbgoAucoxvkkP42SIuOeg6zmJLRtNq62lZdVPPj0MsIlN-QEy"}},STANDINGBOOK:{name:"JtGiVKQlw1AGmDEDq0CxiSP2.YEv82n",methods:{QUERYPAGE:"fVQTc20FY.fjjscU7MEY3xLR-tbw7jYkWmXAzSSQ_eFjE0SBL2S_HkVDKrC",GETCLIENTMANAGER:"-dcTQZsP-aclQIHIJKEmQTd-h7_W2VEtjfKMvkHZNmlPEQH8Bh0"}},CONTRACT:{name:"o99lHw34WOlisG4hm9obURiuE6ygagX",methods:{CREATE:"bWomP4NOvdXbkMdJqU95iJaJogZ4KlYJdDX",FINDINFOBYPROJECTID:"fTrlmci8sb4jE1ZSG5SyGmGXJtEWjsWzotVT9BZSDfb3onQI1PGID_8",GETDETAILBYPROCESSID:"haZUi9_0OtvH5OXa7V7HoNL3zfpblY4coZX9nuUlpEQVCpMdi-6EdEB",GETPROCESSDETAILBYID:"j1XWoQ_QeOZpGigKOBT7QqKILhBh6FlX451Mrdzg7XWOJ4xf068DGW0",QUERYPAGECONTRACTINFO:"CfMVdCv1qVsL7Z_7_j5sGJS-ATUARdBNM198HLFzinE_uDZBzJuBN-U",VERIFY:"vIyH6b4x8_H5A64rHwab27kqMLBLjUo76nZ",GETVALIDCONTRACTURL:"oAFky-DW43DG2Po3yYhFVvz3VPlAfO1Hi67vwRBpCEO8zmvnPvS8dOh"}},PHOTOS:{name:"hMNCl9S9hJbGkcd4dsaHxWWo3cOZFd3",methods:{FINDPHOTOSBYPROJECTID:"dlnnSvoBwbFpggO9nhxF4mZY7ZF7jucOu2YnnVbl9pbYClHYPb_"}},QUOTE:{name:"hMNCl9S9hJbGkcd4dsaHxWWo3cOZFd3",methods:{SHOWNOVERIFY:"-xBypVo86izBh9nefJ07CWFkzV66SvNoAH5txwSlj6E"}}};t.default=l},83:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(1)),l=r(a(28));t.default={queryDetailPage:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.QUERYDETAILPAGE,args:e})},listAccountByRoleCode:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.LISTACCOUNTBYROLECODE,args:e})},assignAuditStaff:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.ASSIGN_AUDIT_STAFF,args:e})},addRevisited:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.CREATE_REVISIT_RECORD,args:e})},findOrderDetailByIdList:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.FINDORDERDETAILBYIDLIST,args:e})},findOrderDetailById:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.FIND_ORDER_DETAIL_BY_ID,args:e})},findRevisitedList:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.FIND_REVISIT_LIST,args:e})},estateSearch:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.ESTATE_SEARCH,args:e})},createOrder:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.CREATE_ORDER,args:e})},importOrder:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.IMPORT_ORDER,args:e})},queryProperty:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.QUERY_PROPERTY,args:e})},updateDetail:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.UPDATE_DETAIL,args:e})},createAuditBill:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.CREATE_AUDIT_BILL,args:e})},setPrimaryContact:function(e){return(0,o.default)({service:l.default.SALES.name,method:l.default.SALES.methods.SET_PRIMARY_CONTACT,args:e})}}},714:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(11)),l=r(a(6)),i=r(a(83)),n=r(a(28)),s=!1;t.default={name:"page-purchase-invoice-dialog",components:{},data:function(){return{pickerOptions:{disabledDate:function(e){return e<new Date}},isLoading:!1,assignAccountId:0,type:null,isShowTable:!1,disabledSymbols:[],id:null,activeName:"one",editForm:!1,editTransfer:!1,auditDialog:!1,auditFormData:{radio:null,recordTime:null,remark:null,editGoOn:!1},formData:{activityId:null,auditGroup:null,auditGroupName:null,auditId:null,auditName:null,auditNick:null,bizTypeId:null,bizTypeName:null,cityId:null,cityName:null,createTime:null,createUser:null,decoratePattern:null,decoratePatternName:null,decorateRange:null,decorateRangeName:null,decorateType:null,decorateTypeName:null,estateId:null,estateName:null,houseStatus:null,houseStatusName:null,id:null,needExpedite:null,needExpediteName:null,orderMainStatus:null,orderMainStatusName:null,orderPriceId:null,orderPriceName:null,orderSubStatus:null,orderSubStatusName:null,organizationId:null,organizationName:null,ownerId:null,ownerName:null,phoneId:null,productPkgId:null,productPkgName:null,townId:null,townName:null,transferStatus:null,transferStatusName:null,updateTime:Date.parse((new Date).toString()),updateUser:l.default.get("t8t-tc-uid"),townArr:[],expectTransferTime:null,houseType:null,houseStruct:null,preferStyleId:null,expectMeasureTime:null,expectDecorateTime:null},formDataHouse:{houseAddress:null,houseArea:null,houseCoordinate:null,houseStruct:null,houseStructName:null,houseStyle:null,houseType:null,houseTypeName:null,houseValuationArea:null,orderId:null},formDataExt:{budget:null,expectDecorateTime:null,expectMeasureTime:null,expectTransferTime:null,orderId:null,preferStyleId:null,remarks:null},item:{label:"楼盘名称",name:"estateId",textValue:"sname",filedValue:"id",defaultValue:{filedValue:null,textValue:null},remote:!0,service:n.default.SALES.name,method:n.default.SALES.methods.QUERY_ESTATE_PAGE,remoteQueryKey:"estateName",remoteArgs:{page:1,size:10}},tableDataSource:[],tableFollowDataSource:[],activeInputTabName:"project",isTopHide:!1,isDialogShow:!0,dialogVisible:!1,formRule:{townId:[{required:!0,message:"请选择用户所在区域"}],estateId:[{required:!0,message:"请选择楼盘"}],transferStatus:[{required:!0,message:"请选择是否交房"}],expectTransferTime:[{required:!1,message:"请选择预计交房时间"}],houseType:[{required:!0,message:"请选择房屋类型"}],houseStatus:[{required:!0,message:"请选择新旧房"}],decorateType:[{required:!0,message:"请选择家装公装"}],decorateRange:[{required:!0,message:"请选择整改局改"}],decoratePattern:[{required:!0,message:"请选择半包全包"}],orderPriceId:[{required:!0,message:"请选择装修预算"}],expectMeasureTime:[{required:!0,message:"请选择预计量房时间"}],expectDecorateTime:[{required:!0,message:"请选择预计装修时间"}]},auditRules:{radio:[{required:!0,message:"请选择审核状态"}],recordTime:[{required:!1,message:"请选择跟进时间"}],remark:[{required:!0,message:"请选择备注"}]},columns:[{prop:"appellationShow",label:"称呼",show:!s,formatter:function(e,t,a,r){var o="";return t.sex>0&&(o=1==t.sex?"（先生）":"（女士）"),t.appellation+o}},{prop:"appellation",label:"称呼",show:s,editor:{type:"input",rules:[{required:!0,message:"请填写业主称呼"},{pattern:/^.{1,20}$/,message:"请输入1-20个中英文字符"}]},onClick:function(e,t,a,r){t.id>0&&r.handleFormItemBlur()}},{prop:"sex",label:"性别",show:s,list:"sexList",editor:{type:"select",rules:[{required:!0,message:"不能为空"}]},onClick:function(e,t,a,r){t.id>0&&r.handleFormItemBlur()}},{prop:"phoneId",label:"联系电话",show:!0,editor:{type:"input",rules:function(e,t,a,r){if(!t.id)return[{required:!0,message:"请填写业主手机号码"},{pattern:/^1[34578]\d{9}$/,message:"请填写正确的手机号码"}]}},formatter:function(e){return 0==e?"":e},onClick:function(e,t,a,r){t.id>0&&r.handleFormItemBlur()}},{prop:"wechatId",label:"微信",show:!0,editor:{type:"input",rules:[{pattern:/^.{1,20}$/,message:"请输入1-20个中英文字符"}]},formatter:function(e){return 0==e?"":e},onClick:function(e,t,a,r){t.id>0&&r.handleFormItemBlur()}},{prop:"qqId",label:"QQ",show:!0,editor:{type:"input",rules:[{pattern:/^\d{1,20}$/,message:"请输入1-20位数字"}]},formatter:function(e){return 0==e?"":e},onClick:function(e,t,a,r){t.id>0&&r.handleFormItemBlur()}}],followColumns:[{prop:"revisitTypeName",label:"跟进状态"},{prop:"remark",label:"情况记录",width:"350px"},{prop:"projectStatus",label:"项目状态",formatter:function(e,t,a,r){return t.projectMainStatusName+"/"+t.projectSubStatusName}},{prop:"createTime",label:"操作时间",formatter:"dateParser"},{prop:"createUserName",label:"操作人"}],receiptRecordArgs:{},receiptRecordDialog:!1,commonData:{sexList:[{text:"先生",value:1},{text:"女士",value:2}]},propertyData:{}}},beforeCreate:function(){this.id=this.$route.query.id,this.type=this.$route.query.type,"edit"==this.type&&(s=!0)},created:function(){this.id=this.$route.query.id,this.type=this.$route.query.type,this.findOrderDetail(this.id),this.findRevisitedList(this.id),this.getQueryProperty(),this.editForm=!1,this.editTransfer=!1,"edit"==this.type&&(this.editForm=!0)},methods:{doEdit:function(){this.$TCS.addTag("erp_scm_015002003001"),s=!0,this.$router.push({path:"/sale-manage/page-potential-owner-list/edit",query:{id:this.formData.id,type:"edit"}})},changeRadio:function(e){if(3==e){this.auditFormData.editGoOn=!0;new Date;var t=new Date(Date.parse((new Date).toString())+2592e5),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(Date.parse(a.toString())+324e5);this.auditFormData.recordTime=r,this.auditRules.recordTime=[{required:!0,message:"请选择跟进时间"}]}else this.auditFormData.recordTime=null,this.auditFormData.editGoOn=!1,this.auditRules.recordTime=[{required:!1,message:"请选择跟进时间"}]},handleAssignRowClick:function(e,t,a){},checkSelection:function(){var e=this.$refs.t8tTable.getSelectRows();return 0===e.length?(this.$message.error("请选择联系人。"),!1):!(e.length>1)||(this.$message.error("请对一个联系人进行操作。"),!1)},setPrimary:function(){if(!1===this.checkSelection())return!1;var e=this.$refs.t8tTable.getSelectRows()[0];if(void 0==e.id)return this.$message.error("请选择已存在的联系人"),!1;var t=this,a={id:e.id,updateUser:l.default.get("t8t-tc-uid")};i.default.setPrimaryContact(a).then(function(e){200===e.data.status?(t.$msgbox({title:"消息",type:"success",message:"设置成功",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),t.isLoading=!1):(t.$msgbox({title:"消息",type:"error",message:e.data.message,showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),t.isLoading=!1)})},handleEditorChange:function(e){this.auditFormData.recordTime=e},closeRedDialog:function(){this.auditDialog=!1,this.auditFormData.radio=null,this.auditFormData.recordTime=null,this.auditFormData.remark=null},doAntiAuditing:function(){this.$TCS.addTag("erp_scm_015002003002"),this.auditDialog=!0},runAudit:function(){var e=this,t=this;t.isLoading=!0,this.$refs.t8tAudit.validate(function(a){if(a){var r=!1,o=!1;e.$refs.formBasic.validate(function(t){t?r=!0:e.activeInputTabName="project"});var n=e.$refs.t8tTable;n.validate(function(a){if(a?o=!0:1==r?e.activeInputTabName="owner":1==r&&(e.activeInputTabName="follow"),r&&o){var s=t.getUpdateArgs(n);i.default.updateDetail(s).then(function(e){if(200===e.data.status){var a={auditBill:{orderId:t.formData.id,billStatus:t.auditFormData.radio,auditId:l.default.get("t8t-tc-uid"),nextFollowupTime:t.auditFormData.recordTime,remarks:t.auditFormData.remark}};i.default.createAuditBill(a).then(function(e){if(200===e.data.status)2==e.data.result?t.$msgbox({title:"消息",type:"success",message:"项目未找到可分配的门店",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}):t.$msgbox({title:"消息",type:"success",message:"提交成功",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),t.isLoading=!1,t.closeDialog();else{var a=e.data.message;30010==e.data.status&&(a="项目当前所处的状态不可审核"),e.data.status,t.$msgbox({title:"消息",type:"error",message:a,showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),t.isLoading=!1}})}else t.$msgbox({title:"消息",type:"error",message:e.data.message,showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),t.isLoading=!1})}else t.$msgbox({title:"消息",type:"error",message:"请完善项目必要信息",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),t.isLoading=!1})}else t.isLoading=!1})},doEditSubmit:function(){var e=this;this.$TCS.addTag("erp_scm_015002002001");var t=this,a=!1,r=!1;this.$refs.formBasic.validate(function(t){t?a=!0:e.activeInputTabName="project"});var o=this.$refs.t8tTable;o.validate(function(l){if(l?r=!0:1==a?e.activeInputTabName="owner":1==a&&(e.activeInputTabName="follow"),a&&r){e.isLoading=!0;var n=t.getUpdateArgs(o);i.default.updateDetail(n).then(function(a){200===a.data.status?(t.$msgbox({title:"消息",type:"success",message:"提交成功",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),t.isLoading=!1,t.closeDialog()):(e.$msgbox({title:"消息",type:"error",message:a.data.message,showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),e.isLoading=!1)})}})},getUpdateArgs:function(e){var t=e.getActionLog(!1);t.addedRows.forEach(function(e,a){t.addedRows[a].phone=e.phoneId,t.addedRows[a].wechat=e.wechatId,t.addedRows[a].qq=e.qqId});return{decorationOrder:{decorationOrderUpdateDTO:this.formData,decorationOrderExtUpdateDTO:{expectMeasureTime:this.formData.expectMeasureTime,expectTransferTime:this.formData.expectTransferTime,expectDecorateTime:this.formData.expectDecorateTime,preferStyleId:this.formData.preferStyleId},decorationOrderHouseUpdateDTO:{houseType:this.formData.houseType,houseStruct:this.formData.houseStruct},decorationOrderContactCreateDTOList:t.addedRows,deleteContactIdList:t.deletedIDs}}},add:function(){this.$refs.t8tTable.addNewRow()},del:function(){if(0===this.$refs.t8tTable.getSelectRows().length)return this.$message.error("请勾选需要删除的行。"),!1;this.$refs.t8tTable.delRows()},getQueryProperty:function(){var e=this;i.default.queryProperty({}).then(function(t){200==t.data.status&&(e.propertyData=t.data.result)})},findRevisitedList:function(e){var t={search:{projectId_eq:e}},a=this;i.default.findRevisitedList(t).then(function(e){200==e.data.status&&(a.tableFollowDataSource=(0,o.default)(a.tableFollowDataSource,e.data.result))})},findOrderDetail:function(e){var t=this,a={id:e},r=this;i.default.findOrderDetailById(a).then(function(e){200==e.data.status&&(r.tableDataSource=e.data.result.decorationOrderContactVOList,r.formDataHouse=(0,o.default)(r.formDataHouse,e.data.result.decorationOrderHouseVO),r.formDataExt=(0,o.default)(r.formDataExt,e.data.result.decorationOrderExtVO),r.formData=(0,o.default)(r.formData,e.data.result.decorationOrderVO),r.formData.houseType=r.formDataHouse.houseType,r.formData.houseStruct=r.formDataHouse.houseStruct,r.formData.preferStyleId=r.formDataExt.preferStyleId,r.formData.expectTransferTime=r.formDataExt.expectTransferTime,r.formData.expectMeasureTime=r.formDataExt.expectMeasureTime,r.formData.expectDecorateTime=r.formDataExt.expectDecorateTime,r.formData.updateUser=l.default.get("t8t-tc-uid"),r.formData.updateTime=Date.parse((new Date).toString()),r.formData.transferStatus=r.formData.transferStatus>0?r.formData.transferStatus:null,r.formData.houseType=r.formData.houseType>0?r.formData.houseType:null,r.formData.houseStatus=r.formData.houseStatus>0?r.formData.houseStatus:null,r.formData.decorateType=r.formData.decorateType>0?r.formData.decorateType:null,r.formData.decorateRange=r.formData.decorateRange>0?r.formData.decorateRange:null,r.formData.decoratePattern=r.formData.decoratePattern>0?r.formData.decoratePattern:null,r.formData.orderPriceId=r.formData.orderPriceId>0?r.formData.orderPriceId:null,r.formData.houseStruct=r.formData.houseStruct>0?r.formData.houseStruct:null,r.formData.preferStyleId=parseInt(r.formData.preferStyleId)>0?parseInt(r.formData.preferStyleId):null,r.item.defaultValue={filedValue:t.formData.estateId,textValue:t.formData.estateName})})},transferChange:function(e){var t=this;this.propertyData[33007].forEach(function(a,r){"02"==a.code&&e==a.id?(t.editTransfer="edit"==t.type,t.formRule.expectTransferTime=[{required:!0,message:"请选择预计交房时间"}]):(t.editTransfer=!1,t.formRule.expectTransferTime=[{required:!1,message:"请选择预计交房时间"}])})},onChange:function(e){this.formData.estateId=e},onDivisionChange:function(e){3==e.length?(this.formData.cityId=void 0==e[1]?null:e[1],this.formData.townId=void 0==e[2]?null:e[2]):this.formData.townId=null},closeDialog:function(){this.$router.push({path:"/sale-manage/page-potential-owner-list"}),this.$emit("close")}}}},1318:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.owner-potential-detail-page .t8t-form-popup .el-input {\n    width: 180px;\n    line-height: 32px;\n}\n",""])},1319:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.el-input.is-disabled .el-input__inner[data-v-c31534c0]{\n    width:180px !important;\n}\n",""])},1764:function(e,t,a){var r=a(1318);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},1765:function(e,t,a){var r=a(1319);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},2157:function(e,t,a){a(1765),a(1764);var r=a(4)(a(714),a(2555),"data-v-c31534c0",null);e.exports=r.exports},2555:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"owner-potential-detail-page"},[a("el-dialog",{staticClass:"t8t-full-dialog2 dialog-new",attrs:{size:"full"},on:{close:e.closeDialog},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t}}},[a("div",{staticClass:"t8t-full-dialog2-container"},[a("div",{staticClass:"full-dialog-toolbar-container"},[a("div",{staticClass:"toolbar-container"},[a("t8t-toolbar",{staticClass:"cost-reconciliation-toolbar t8t-dark",on:{EDIT:e.doEdit,"EDIT-SUBMIT":e.doEditSubmit,"ANTI-AUDITING":e.doAntiAuditing}})],1)]),e._v(" "),a("div",{staticClass:"dialog2-main-container"},[a("div",{staticClass:"full-dialog-form-container full-dialog-tabs-container"},[a("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.activeInputTabName,callback:function(t){e.activeInputTabName=t}}},[a("el-tab-pane",{attrs:{label:"项目信息",name:"project"}},[a("el-form",{ref:"formBasic",staticClass:"dialog2-form-container",attrs:{model:e.formData,rules:e.formRule,"label-position":"right","label-width":"120px"}},[a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"项目ID："}},[a("el-input",{attrs:{disabled:!0},model:{value:e.formData.id,callback:function(t){e.formData.id=t}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"创建时间："}},[a("t8t-datetime-picker",{attrs:{endFormater:"timestamp",bindValue:e.formData.createTime,type:"date",disabled:!0},model:{value:e.formData.createTime,callback:function(t){e.formData.createTime=t}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"最后跟进时间："}},[a("t8t-datetime-picker",{attrs:{endFormater:"timestamp",bindValue:e.formData.updateTime,type:"date",disabled:!0},model:{value:e.formData.updateTime,callback:function(t){e.formData.updateTime=t}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"区域：",prop:"townId"}},[a("t8t-division-old",{attrs:{changeOnSelect:!0,filterable:!0,clearable:!0,value:e.townArr,defaultValue:e.formData.townId,placeholder:e.选择区域,disabled:!e.editForm},on:{change:e.onDivisionChange},model:{value:e.townArr,callback:function(t){e.townArr=t}}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"dialog2-form-item-container",attrs:{label:"楼盘：",prop:"estateId"}},[a("el-col",{attrs:{span:22}},[a("t8t-form-popup",{ref:e.item.name,attrs:{disabled:!e.editForm,defaultValue:e.item.defaultValue,bindValue:e.formData[e.item.name],textValue:e.item.textValue,filedValue:e.item.filedValue,name:e.item.name,placeholder:e.item.placeholder,dialog:e.item.dialog,remote:e.item.remote,service:e.item.service,method:e.item.method,remoteArgs:e.item.remoteArgs,remoteQueryKey:e.item.remoteQueryKey,autoText:e.item.autoText,autoValue:e.item.autoValue,icon:!1},on:{change:e.onChange,select:e.onSelect}})],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"是否交房：",prop:"transferStatus"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},on:{change:e.transferChange},model:{value:e.formData.transferStatus,callback:function(t){e.formData.transferStatus=t}}},e._l(e.propertyData[33007],function(e){return a("el-option",{attrs:{label:e.name,value:e.id,name:"item.code"}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"预计交房时间：",prop:"expectTransferTime"}},[a("t8t-datetime-picker",{attrs:{endFormater:"timestamp",bindValue:e.formData.expectTransferTime,type:"date",disabled:!e.editTransfer,"picker-options":e.pickerOptions},model:{value:e.formData.expectTransferTime,callback:function(t){e.formData.expectTransferTime=t}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"房屋类型：",prop:"houseType"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.houseType,callback:function(t){e.formData.houseType=t}}},e._l(e.propertyData[33009],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"新旧房：",prop:"houseStatus"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.houseStatus,callback:function(t){e.formData.houseStatus=t}}},e._l(e.propertyData[33006],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"家装公装：",prop:"decorateType"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.decorateType,callback:function(t){e.formData.decorateType=t}}},e._l(e.propertyData[33004],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"整改局改：",prop:"decorateRange"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.decorateRange,callback:function(t){e.formData.decorateRange=t}}},e._l(e.propertyData[33003],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"半包全包：",prop:"decoratePattern"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.decoratePattern,callback:function(t){e.formData.decoratePattern=t}}},e._l(e.propertyData[33002],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"房屋结构："}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.houseStruct,callback:function(t){e.formData.houseStruct=t}}},e._l(e.propertyData[33011],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"装修预算：",prop:"orderPriceId"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.orderPriceId,callback:function(t){e.formData.orderPriceId=t}}},e._l(e.propertyData[33012],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"装修风格："}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.preferStyleId,callback:function(t){e.formData.preferStyleId=t}}},e._l(e.propertyData[33008],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"预计量房时间：",prop:"expectMeasureTime"}},[a("t8t-datetime-picker",{attrs:{endFormater:"timestamp",bindValue:e.formData.expectMeasureTime,type:"date",disabled:!e.editForm,"picker-options":e.pickerOptions},model:{value:e.formData.expectMeasureTime,callback:function(t){e.formData.expectMeasureTime=t}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"预计装修时间：",prop:"expectDecorateTime"}},[a("el-select",{attrs:{placeholder:"--请选择--",disabled:!e.editForm},model:{value:e.formData.expectDecorateTime,callback:function(t){e.formData.expectDecorateTime=t}}},e._l(e.propertyData[33013],function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})}))],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"业主信息",name:"owner"}},[a("el-form",{staticClass:"dialog2-form-container",attrs:{model:e.formData,"label-position":"right","label-width":"120px"}},[a("div",{staticClass:"dialog2-form-item-container"},[a("el-form-item",{attrs:{label:"业主ID："}},[a("el-input",{attrs:{disabled:!0},model:{value:e.formData.ownerId,callback:function(t){e.formData.ownerId=t}}})],1)],1)]),e._v(" "),a("div",{staticClass:"dialog2-toolbar-container"},[e.editForm?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.add()}}},[e._v("新增行")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.setPrimary()}}},[e._v("设为主要联系人")]),e._v(" "),e.editForm?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){e.del()}}},[e._v("删除行")]):e._e()],1),e._v(" "),a("t8t-table",{ref:"t8tTable",attrs:{columns:e.columns,dataSource:e.tableDataSource,commonData:e.commonData,selectCol:!0,indexCol:!0,editable:e.editForm,pageBar:!1,radioCol:!1},on:{"cell-click":e.handleFormItemBlur,"row-click":e.handleAssignRowClick,"cell-editor-change":e.cellEditorChange,"data-loaded":e.handleDataLoaded}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"跟进记录",name:"follow"}},[a("t8t-table",{ref:"t8tTable2",attrs:{columns:e.followColumns,dataSource:e.tableFollowDataSource,commonData:e.commonData,indexCol:!0,pageBar:!1,radioCol:!1,selectCol:!1}})],1)],1)],1)])])]),e._v(" "),a("el-dialog",{ref:"auditDialogRef",attrs:{title:"审核结果"},on:{close:e.closeRedDialog},model:{value:e.auditDialog,callback:function(t){e.auditDialog=t}}},[a("el-form",{ref:"t8tAudit",attrs:{model:e.auditFormData,rules:e.auditRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"审核状态",prop:"radio"}},[a("el-radio-group",{on:{change:e.changeRadio},model:{value:e.auditFormData.radio,callback:function(t){e.auditFormData.radio=t}}},[a("el-radio",{attrs:{label:2}},[e._v("可售")]),e._v(" "),a("el-radio",{attrs:{label:4}},[e._v("结束跟进")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("继续跟进")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"recordTime"}},[a("t8t-datetime-picker",{attrs:{endFormater:"timestamp",bindValue:e.auditFormData.recordTime,type:"datetime",disabled:!e.auditFormData.editGoOn,"picker-options":e.pickerOptions},model:{value:e.auditFormData.recordTime,callback:function(t){e.auditFormData.recordTime=t}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:5},placeholder:"请输入备注"},model:{value:e.auditFormData.remark,callback:function(t){e.auditFormData.remark=t}}})],1)],1),e._v(" "),a("div",{slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading.body.lock",value:e.isLoading,expression:"isLoading",modifiers:{body:!0,lock:!0}}],attrs:{type:"primary","element-loading-text":"提交中"},on:{click:e.runAudit}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.closeRedDialog}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]}}});