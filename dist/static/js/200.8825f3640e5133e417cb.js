webpackJsonp([200,269],{5:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(1)),n=r(a(8));t.default={allSystemCodeList:function(e){return(0,o.default)({method:n.default.CONFIGURE.methods.SYS_CODE_LIST,service:n.default.CONFIGURE.name,args:e})},listNextLevelUnforbidden:function(e){return(0,o.default)({method:n.default.CONFIGURE.methods.LIST_UNFORBIDDEN,service:n.default.CONFIGURE.name,args:e})},queryUnionParent:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryUnionParent,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryPage:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.QUERY_PAGE,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryShopUnion:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryShopUnion,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryShop:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryShop,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryByFunctionCode:function(e){return(0,o.default)({method:n.default.ORGANIZATION.methods.QUERY_BY_FUNCTIONCODE,service:n.default.ORGANIZATION.name,args:e})},queryAll:function(e){return(0,o.default)({method:n.default.ORGANIZATION.methods.ORG_QUERY,service:n.default.ORGANIZATION.name,args:e})},queryTreeByTypeAndFunction:function(e){return(0,o.default)({method:n.default.ORGANIZATION.methods.QUERY_TREE_FUNCTION,service:n.default.ORGANIZATION.name,args:e})},queryChildrenByWholeCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCode,service:n.default.SUPPLY_CONFIGURE.name,args:{wholeCode:e,depth:t}})},queryChildrenByWholeCodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCodes,service:n.default.SUPPLY_CONFIGURE.name,args:{wholeCodes:e,depth:t}})},getAllQueue:function(){return(0,o.default)({method:n.default.EDA.methods.QUERY_QUEUE_QUERYQUEUES,service:n.default.EDA.name,args:{}})}}},8:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={CONFIGURE:{name:"OnLYil9jY0PiKilsavskNJvygGUxhME7eLPWccmGmYjb_ED",methods:{SYS_CODE_LIST:"vPnFi_QA4HeBWeU61ZjQPCn",LIST_UNFORBIDDEN:"vL0y_oFhAeDM3YTmFrp2oaHn1UDcQEzq1orWi41sEc2pVcjlpGN"}},SUPPLY_CONFIGURE:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"Ewi6YId8aELgLHFBBSBMT4BvG3R",queryUnionParent:"5l6jR2KUJ4QdYxLFz0ZJGFy5XZkLajNNSEdLf0t",queryShopUnion:"zPrIoMCwO3geMqwnGH2Afs0w-7lpdva",queryShop:"4VE-APqV_Fs13Cswfj8",queryChildrenByWholeCode:"sDE1BauR-rhu_AU-6F9VF952lJ_JIl-r1QOnscFpFYW0GFS9p3nAG1z",queryChildrenByWholeCodes:"CEGKxWt_AJmoqBtXoGEqET64657I2n7n39qadM-E_uX2b1O8X5k8Ii2vEnj"}},ORGANIZATION:{name:"CsxicaQ7wM_3kaiMdGJQAaOa2fUF8v-",methods:{QUERY_BY_FUNCTIONCODE:"UwBgld0zWv.T_KSfK6W2_uSPCGXiv-mkEbmTNx6qeGoR_hH",ORG_QUERY:"DOiN6_9fU1yNwZE_gRuTrdwwvEg",QUERY_TREE_FUNCTION:"-DB0-GqPoWXHozK4BKUV3yMPaFmC4lppJyYYIe9k-Gk5VCj84OEe2JBi24SnYuFqXHe",ORG_QUERY_WITHOUTDEL:"9Ivp3_1e5zNZU_miVqa6YXq9Zg0sb1JBadatp4EuTiR"}},GOODS:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"ByoqRxHfrD8M7MGSNKC-qVN",QUERY_PAGE_GOODS_UNION:"KYI9tvUKvrmrnw02TOmUAbkj27FmFOkq8nDox-O"}},EDA:{name:"806ndPAX4QHSaL8S3kOGYVWD7gJKERC",methods:{QUERY_QUEUE_QUERYQUEUES:"NJaG8pAbK6IGAM2RtOG2V_cGwPKCj8.QKtj"}}}},11:function(e,t,a){e.exports=a(7)(68)},22:function(e,t,a){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},a=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in a,o=/constructor/i.test(e.HTMLElement)||e.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},i=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(u,d,c){c||(u=i(u));var m,p=this,f="application/octet-stream"===u.type,h=function(){!function(e,t,a){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,a||e)}catch(e){l(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return m=t().createObjectURL(u),void setTimeout(function(){a.href=m,a.download=d,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(a),h(),s(m),p.readyState=p.DONE});!function(){if((n||f&&o)&&e.FileReader){var a=new FileReader;return a.onloadend=function(){var t=n?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,h()},a.readAsDataURL(u),void(p.readyState=p.INIT)}m||(m=t().createObjectURL(u)),f?e.location.href=m:e.open(m,"_blank")||(e.location.href=m);p.readyState=p.DONE,h(),s(m)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,a){return t=t||e.name||"download",a||(e=i(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,a){return new u(e,t||e.name||"download",a)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);void 0!==e&&e.exports?e.exports.saveAs=o:null!==a(24)&&null!==a(25)&&void 0!==(r=function(){return o}.call(t,a,t,e))&&(e.exports=r)},23:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return function(e,t){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e}("yyyy-MM-dd hh-mm-ss",new Date)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(21));t.default=function(e){var t=function(e){var t=[s.default.gatewayAddr,encodeURIComponent(e.service),encodeURIComponent(e.method)],a=e.args||{};a.page=a.page?a.page:1,a.size=a.size?a.size:2e3;var r=t.join("/"),o=encodeURIComponent(window.location.hash.split("#")[1].split("?")[0]);return r+="/?action=export&uid="+i.default.get("t8t-tc-uid")+"&ticket="+i.default.get("t8t-tc-ticket")+"&headers="+e.headers+"&args="+(0,n.default)(a)+"&sorts="+e.sorts+"&title="+(e.title||"")+"&ref="+o}(e),a=l.default.prototype.$message({duration:0,message:"正在导出..."});return u.default.get(t,{responseType:"arraybuffer",timeout:12e4,onDownloadProgress:function(e){}}).then(function(t){var r=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=e.title||o();d.default.saveAs(r,n+".xls"),a.close()})};var l=r(a(38)),s=r(a(37)),i=r(a(6)),u=r(a(39)),d=r(a(22))},24:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},25:function(e,t){(function(t){e.exports=t}).call(t,{})},246:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.methods=t.Service=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(a(1)),o={NPS:{name:"uSt1vBYExVgL-kbP8EbQjnaxRB7bQXj",methods:{queryOne:"txgkrBaJ-tg3-xbzToxlU_-lSQzlgJDtTTCre84nfQL",queryPage:"OKHGCRY9K3HhR9aipdM3Nf94yZ9YBsP427X",itemConfirm:"ep011IjGr1qBCPmKhrcGyvdmh9spRze2IqJaYLu",billExport:"DE3KDLcQCr4kYcLcuN7ZAU3pGWvHrnb",autiClose:"diPQc43qOFl9uIkFImUDsuUBAzb_JWyZzIi",makeCall:"Ytl5tybWFcAZVU9WVdvZDxQ"}},SUPPLY_CONFIGURE:{name:"rWpKotZR9xK91ht70_7YB62Z5mjzfQlwaP2QPInsqVT54TB11oa",methods:{queryPropertyUnion:"66nS9zn0S94COMMfrLSJJXuPEgR62pUPz1ePMqb"}},AREA:{name:"xow0eCU1tI80eNpW9XyHLZPpyFO_5Q6",methods:{pctreeGetConfig:"vhErxe1cvalLLHx7492ZUEz-ZLhasDcOoJg5MnIyBtEg4ZI"}}},n={queryOne:function(e){return(0,r.default)({method:o.NPS.methods.queryOne,service:o.NPS.name,args:e})},queryPropertyUnion:function(e){return(0,r.default)({method:o.SUPPLY_CONFIGURE.methods.queryPropertyUnion,service:o.SUPPLY_CONFIGURE.name,args:e})},itemConfirm:function(e){return(0,r.default)({method:o.NPS.methods.itemConfirm,service:o.NPS.name,args:e})},pctreeGetConfig:function(e){return(0,r.default)({method:o.AREA.methods.pctreeGetConfig,service:o.AREA.name,args:e})},autiClose:function(e){return(0,r.default)({method:o.NPS.methods.autiClose,service:o.NPS.name,args:e})},makeCall:function(e){return(0,r.default)({method:o.NPS.methods.makeCall,service:o.NPS.name,args:e})}};t.Service=o,t.methods=n},407:function(e,t,a){e.exports=a(7)(218)},501:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(11)),n=a(246),l=r(a(5)),s=(r(a(407)),r(a(23)));t.default={name:"nps-list",data:function(){return{fields:[{type:"input",label:"项目ID",name:"projectId"},{type:"division",label:"城市",name:"cityIdArr",selectSourceKey:"citys",props:{value:"id",label:"name",children:"children"},defaultValue:[]},{type:"date",pickertype:"datetimerange",label:"评分日期",startField:"createTime_gte",endField:"createTime_lte",name:"createTime"},{type:"date",pickertype:"datetimerange",label:"实际竣工日期",startField:"completedTime_gte",endField:"completedTime_lte",name:"completedTime"},{type:"input",label:"单据编号",name:"billCode"},{type:"select",label:"单据状态",name:"billStatus",selectSourceKey:"billStatus"},{type:"select",label:"业务类型",name:"bizTypeId",selectSourceKey:"bizType"},{type:"select",label:"是否自动关闭",name:"autoClose",selectSourceKey:"autoClose"},{type:"date",pickertype:"datetimerange",label:"关闭日期",startField:"closeTime_gte",endField:"closeTime_lte",name:"closeTime"}],selectSource:{autoClose:[{text:"否",value:1},{text:"是",value:2}],billStatus:[{text:"已关闭",value:1},{text:"处理中",value:2}],evaluateScore:[],chosenReason:[],bizType:[],citys:[]},service:n.Service.NPS.name,method:n.Service.NPS.methods.queryPage,args:{sort:["createTime_desc"]},columns:[{prop:"projectId",label:"项目ID"},{prop:"city",label:"城市"},{prop:"createTime",label:"评分日期",formatter:"dateParser"},{prop:"completedTime",label:"实际竣工日期",formatter:"dateParser"},{prop:"billCode",label:"单据编号"},{prop:"billStatus",label:"单据状态",list:"billStatus"},{prop:"bizTypeId",label:"业务类型",list:"bizType"},{prop:"organizationName",label:"销售组织"},{prop:"autoClose",label:"是否自动关闭",list:"autoClose"},{prop:"closeTime",label:"关闭日期",formatter:"dateParser"},{prop:"evaluateScoreT8T",label:"项目NPS评分",list:"evaluateScore"},{prop:"chosenReason",label:"选择土巴兔原因",list:"chosenReason"},{prop:"evaluateTextT8T",label:"备注1"},{prop:"evaluateNameCustomerManager",label:"客户经理姓名"},{prop:"evaluateScoreCustomerManager",label:"客户经理评分",list:"evaluateScore"},{prop:"evaluateTextCustomerManager",label:"备注2"},{prop:"evaluateNameDesigner",label:"设计师姓名"},{prop:"evaluateScoreDesigner",label:"设计师评分",list:"evaluateScore"},{prop:"evaluateTextDesigner",label:"备注3"},{prop:"evaluateNameProjectManager",label:"项目经理姓名"},{prop:"evaluateScoreProjectManager",label:"项目经理评分",list:"evaluateScore"},{prop:"evaluateTextProjectManager",label:"备注4"},{prop:"evaluateNameProjectSteward",label:"项目管家姓名"},{prop:"evaluateScoreProjectSteward",label:"项目管家评分",list:"evaluateScore"},{prop:"evaluateTextProjectSteward",label:"备注5"},{prop:"evaluateNameAfterSale",label:"工模售后客服姓名"},{prop:"evaluateScoreAfterSale",label:"工模售后客服评分",list:"evaluateScore"},{prop:"evaluateTextAfterSale",label:"备注6"}],disabledSymbols:["VIEW","EDIT","UNCLOSE"]}},created:function(){this.getCommonData("11008","bizType"),this.getCommonDataCode("42902","evaluateScore"),this.getCommonDataCode("42903","chosenReason"),this.initAreaInfo()},activated:function(){this.$refs.listTable.reloadTable()},methods:{submitSearch:function(e){var t=(0,o.default)({},e);t.createTime_lte&&(t.createTime_lte=t.createTime_lte+86400-1),t.completedTime_lte&&(t.completedTime_lte=t.completedTime_lte+86400-1),t.closeTime_lte&&(t.closeTime_lte=t.closeTime_lte+86400-1),t.cityIdArr&&(t.cityId=t.cityIdArr[1]),delete t.cityIdArr,this.args.search=t,this.args=(0,o.default)({},this.args)},handleSelectionChange:function(e,t){if(e.length>1)return this.disabledSymbols.includes("VIEW")||this.disabledSymbols.push("VIEW"),this.disabledSymbols.includes("EDIT")||this.disabledSymbols.push("EDIT"),void(this.disabledSymbols.includes("UNCLOSE")||this.disabledSymbols.push("UNCLOSE"));if(e.length<1)return this.disabledSymbols.includes("VIEW")||this.disabledSymbols.push("VIEW"),this.disabledSymbols.includes("EDIT")||this.disabledSymbols.push("EDIT"),void(this.disabledSymbols.includes("UNCLOSE")||this.disabledSymbols.push("UNCLOSE"));var a=e[0];1!=a.billStatus?2!=a.billStatus||(this.disabledSymbols=["UNCLOSE"]):this.disabledSymbols=["EDIT"]},doView:function(){var e=this.$refs.listTable.getSelectRows();if(e.length>1)this.$message.error("请选择单项进行操作");else if(e.length<1)this.$message.error("请选择单项进行操作");else{var t=e[0];this.$router.push({path:"nps-view",query:{id:t.id}})}},doEdit:function(){var e=this.$refs.listTable.getSelectRows();if(e.length>1)this.$message.error("请选择单项进行操作");else if(e.length<1)this.$message.error("请选择单项进行操作");else{var t=e[0];this.$router.push({path:"nps-edit",query:{id:t.id}})}},doUnclose:function(){var e=this;this.$TCS.addTag("red_10654_016002001003");var t=this.$refs.listTable.getSelectRows();if(t.length>1)this.$message.error("请选择单项进行操作");else if(t.length<1)this.$message.error("请选择单项进行操作");else{var a=t[0];if(2!=a.billStatus){var r={id:a.id};this.disabledSymbols.push("UNCLOSE"),n.methods.autiClose(r).then(function(t){if(e.disabledSymbols.pop(),200==t.data.status&&1==t.data.result){var a=e;e.$msgbox({title:"反关闭成功",type:"success",message:"",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}).then(function(){a.$refs.listTable.reloadTable()})}else e.$msgbox({title:"反关闭失败",type:"error",message:t.data.message,showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"})}).catch(function(t){e.disabledSymbols.pop(),e.$msgbox({title:"反关闭失败",type:"error",message:t||"服务器异常",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"})})}else this.$message.error("关闭状态的项才能进行操作")}},doExport:function(){this.$TCS.addTag("red_10654_016002001004");var e=this.args;e.page=1,e.size=4e3,(0,s.default)({service:n.Service.NPS.name,method:n.Service.NPS.methods.billExport,args:e,headers:"序号,评分日期,城市,项目ID,实际竣工日期,单据编号,业务类型,销售组织,修改人,修改时间,单据状态,是否自动关闭,关闭日期,NPS评分,选择土巴兔原因,备注1,客户经理姓名,客户经理评分,备注2,设计师姓名,设计师评分,备注3,项目经理姓名,项目经理评分,备注4,项目管家姓名,项目管家评分,备注5,工模售后客服姓名,工模售后客服评分,备注6",sorts:"id,createTimeText,city,projectId,completedTimeText,billCode,bizTypeName,organizationName,updateName,updateTimeText,billStatusText,autoCloseText,closeTimeText,evaluateScoreT8T,chosenReasonText,teTextT8T,evaluateNameCustomerManager,evaluateScoreCustomerManager,evaluateTextCustomerManager,evaluateNameDesigner,evaluateScoreDesigner,evaluateTextDesigner,evaluateNameProjectManager,evaluateScoreProjectManager,evaluateTextProjectManager,evaluateNameProjectSteward,evaluateScoreProjectSteward,evaluateTextProjectSteward,evaluateNameAfterSale,evaluateScoreAfterSale,evaluateTextAfterSale"})},handleRowDblclick:function(e){this.$router.push({path:"nps-view",query:{id:e.id}})},initAreaInfo:function(){var e=this;n.methods.pctreeGetConfig({}).then(function(t){200==t.data.status&&(e.selectSource.citys=t.data.result)})},getCommonData:function(e,t){var a=this,r={page:1,search:{pPropertyCode:e},size:100},o=[];l.default.queryUnionParent(r).then(function(e){200===e.data.status&&(e.data.result.forEach(function(e){1===e.propertyStatus&&o.push({value:e.id,text:e.propertyName})}),a.selectSource[t]=o)})},getCommonDataCode:function(e,t){var a=this,r={page:1,search:{pPropertyCode:e},size:100},o=[];n.methods.queryPropertyUnion(r).then(function(e){200===e.data.status&&(e.data.result.forEach(function(e){1===e.propertyStatus&&o.push({value:e.wholeCode,text:e.propertyName})}),a.selectSource[t]=o)})}}}},1946:function(e,t,a){var r=a(4)(a(501),a(2547),null,null);e.exports=r.exports},2547:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("t8t-breadcrumb"),e._v(" "),a("t8t-search",{attrs:{fields:e.fields,selectSource:e.selectSource},on:{submit:e.submitSearch}}),e._v(" "),a("div",{staticClass:"g-main-container"},[a("div",{staticClass:"g-main-container-column"},[a("t8t-toolbar",{attrs:{disabledSymbols:e.disabledSymbols},on:{VIEW:e.doView,EDIT:e.doEdit,UNCLOSE:e.doUnclose,EXPORT:e.doExport}}),e._v(" "),a("t8t-table",{ref:"listTable",attrs:{service:e.service,method:e.method,columns:e.columns,args:e.args,indexCol:!0,commonData:e.selectSource},on:{"selection-change":e.handleSelectionChange,"row-double-click":e.handleRowDblclick}})],1)])],1)},staticRenderFns:[]}}});