webpackJsonp([36,269],{5:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(1)),o=r(a(8));t.default={allSystemCodeList:function(e){return(0,n.default)({method:o.default.CONFIGURE.methods.SYS_CODE_LIST,service:o.default.CONFIGURE.name,args:e})},listNextLevelUnforbidden:function(e){return(0,n.default)({method:o.default.CONFIGURE.methods.LIST_UNFORBIDDEN,service:o.default.CONFIGURE.name,args:e})},queryUnionParent:function(e){return(0,n.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryUnionParent,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryPage:function(e){return(0,n.default)({method:o.default.SUPPLY_CONFIGURE.methods.QUERY_PAGE,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryShopUnion:function(e){return(0,n.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryShopUnion,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryShop:function(e){return(0,n.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryShop,service:o.default.SUPPLY_CONFIGURE.name,args:e})},queryByFunctionCode:function(e){return(0,n.default)({method:o.default.ORGANIZATION.methods.QUERY_BY_FUNCTIONCODE,service:o.default.ORGANIZATION.name,args:e})},queryAll:function(e){return(0,n.default)({method:o.default.ORGANIZATION.methods.ORG_QUERY,service:o.default.ORGANIZATION.name,args:e})},queryTreeByTypeAndFunction:function(e){return(0,n.default)({method:o.default.ORGANIZATION.methods.QUERY_TREE_FUNCTION,service:o.default.ORGANIZATION.name,args:e})},queryChildrenByWholeCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,n.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCode,service:o.default.SUPPLY_CONFIGURE.name,args:{wholeCode:e,depth:t}})},queryChildrenByWholeCodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,n.default)({method:o.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCodes,service:o.default.SUPPLY_CONFIGURE.name,args:{wholeCodes:e,depth:t}})},getAllQueue:function(){return(0,n.default)({method:o.default.EDA.methods.QUERY_QUEUE_QUERYQUEUES,service:o.default.EDA.name,args:{}})}}},8:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={CONFIGURE:{name:"OnLYil9jY0PiKilsavskNJvygGUxhME7eLPWccmGmYjb_ED",methods:{SYS_CODE_LIST:"vPnFi_QA4HeBWeU61ZjQPCn",LIST_UNFORBIDDEN:"vL0y_oFhAeDM3YTmFrp2oaHn1UDcQEzq1orWi41sEc2pVcjlpGN"}},SUPPLY_CONFIGURE:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"Ewi6YId8aELgLHFBBSBMT4BvG3R",queryUnionParent:"5l6jR2KUJ4QdYxLFz0ZJGFy5XZkLajNNSEdLf0t",queryShopUnion:"zPrIoMCwO3geMqwnGH2Afs0w-7lpdva",queryShop:"4VE-APqV_Fs13Cswfj8",queryChildrenByWholeCode:"sDE1BauR-rhu_AU-6F9VF952lJ_JIl-r1QOnscFpFYW0GFS9p3nAG1z",queryChildrenByWholeCodes:"CEGKxWt_AJmoqBtXoGEqET64657I2n7n39qadM-E_uX2b1O8X5k8Ii2vEnj"}},ORGANIZATION:{name:"CsxicaQ7wM_3kaiMdGJQAaOa2fUF8v-",methods:{QUERY_BY_FUNCTIONCODE:"UwBgld0zWv.T_KSfK6W2_uSPCGXiv-mkEbmTNx6qeGoR_hH",ORG_QUERY:"DOiN6_9fU1yNwZE_gRuTrdwwvEg",QUERY_TREE_FUNCTION:"-DB0-GqPoWXHozK4BKUV3yMPaFmC4lppJyYYIe9k-Gk5VCj84OEe2JBi24SnYuFqXHe",ORG_QUERY_WITHOUTDEL:"9Ivp3_1e5zNZU_miVqa6YXq9Zg0sb1JBadatp4EuTiR"}},GOODS:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"ByoqRxHfrD8M7MGSNKC-qVN",QUERY_PAGE_GOODS_UNION:"KYI9tvUKvrmrnw02TOmUAbkj27FmFOkq8nDox-O"}},EDA:{name:"806ndPAX4QHSaL8S3kOGYVWD7gJKERC",methods:{QUERY_QUEUE_QUERYQUEUES:"NJaG8pAbK6IGAM2RtOG2V_cGwPKCj8.QKtj"}}}},9:function(e,t,a){e.exports=a(7)(105)},11:function(e,t,a){e.exports=a(7)(68)},13:function(e,t,a){"use strict";function r(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(a(9)),o=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(i,s,d,l){if(1!==arguments.length||"string"!==function(e){return null===e?"null":void 0===e?"undefined":"object"!==(void 0===e?"undefined":(0,n.default)(e))?void 0===e?"undefined":(0,n.default)(e):Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}(i)||/\d/.test(i)||(s=i,i=void 0),(i=i||new Date)instanceof Date||(i=new Date(i)),isNaN(i))throw TypeError("Invalid date");var u=(s=String(o.masks[s]||s||o.masks.default)).slice(0,4);"UTC:"!==u&&"GMT:"!==u||(s=s.slice(4),d=!0,"GMT:"===u&&(l=!0));var c=d?"getUTC":"get",m=i[c+"Date"](),f=i[c+"Day"](),p=i[c+"Month"](),h=i[c+"FullYear"](),g=i[c+"Hours"](),I=i[c+"Minutes"](),b=i[c+"Seconds"](),y=i[c+"Milliseconds"](),T=d?0:i.getTimezoneOffset(),S=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var r=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-r);var n=(t-a)/6048e5;return 1+Math.floor(n)}(i),v=function(e){var t=e.getDay();return 0===t&&(t=7),t}(i),O={d:m,dd:r(m),ddd:o.i18n.dayNames[f],dddd:o.i18n.dayNames[f+7],m:p+1,mm:r(p+1),mmm:o.i18n.monthNames[p],mmmm:o.i18n.monthNames[p+12],yy:String(h).slice(2),yyyy:h,h:g%12||12,hh:r(g%12||12),H:g,HH:r(g),M:I,MM:r(I),s:b,ss:r(b),l:r(y,3),L:r(Math.round(y/10)),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:l?"GMT":d?"UTC":(String(i).match(t)||[""]).pop().replace(a,""),o:(T>0?"-":"+")+r(100*Math.floor(Math.abs(T)/60)+Math.abs(T)%60,4),S:["th","st","nd","rd"][m%10>3?0:(m%100-m%10!=10)*m%10],W:S,N:v};return s.replace(e,function(e){return e in O?O[e]:e.slice(1,e.length-1)})}}();o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},t.default=o},47:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={PROCENTERTREE:{name:"tac4MBKgFxtkOyGS5xolDBVgEEqR4_j",methods:{LISTCATEGIRY:"N4VlGazqhEV4O7p5tFECXLmvbMA87jp"}},PROCENTERCATEGORY:{name:"UXCW5_FfDpVAC4RS04cKtoUQPAo0Ct1bM6DkpEzEh-tmghj",methods:{CATEGORY:"P5ZnSOIfU9FZfG5oeLRcGlaqV3mIzl0g-JG"}},PROCENTERDEPLOYLIST:{name:"kahC43ofmx3VBfYN4D86B0aWN7xyrzY",methods:{DEPLOYLIST:"5k_j_P_WD8RwL8UqaGgemLL",PRODIAGRAM:"ocM-RfcwmwgITykyYSQX_K9vYW-g7j.vb43",FLOWLIST:"Hi_a7GN6TG85Q0RgZpY",PROCESSDETAIL:"h9Gn7JK_3a-JnhpyXXPI7xixH31",GETUSERTASKSWEB:"9bMs6cQMGe_LEaZPtnQU6_k",PROCESSNAME:"bzPfRPsZAIkInrHzR0Ww3jYQ_-B",PROCESSINSTSWEB:"mN-bBZSV7j6gslGBe2R8YAd8iBn",HISTORYPROCESSINSTSWEB:"NXGklFkG5yvT_vupqPexl6hpmeFSq4FqJKrsYWV",QUERYPROCINFOBYSTARTER:"qKH0uUvM502z9e4Eh-3Dbw24I34XnWxYXfCtGiH5-Nk",RETRIEVEPROCESSPICTURE:"caQX8iZlaSbYUOb-Wad-zIItpQHKCn-OTEy",GETACTIVITUINFO:"UwqvS8Ww3OrN3ZNE8PbR9gnMv-gwilk"}},PROCENTERDEPLOYCTL:{name:"ubBdWrXdnC-1cRnPgZs7CXA6xZRnzF0",methods:{SUSPENDPROCDEF:"5nyeHyB7ZEuri3TpRh3tD0d",ACTIVATEPROCDEF:"fcpjGsaCz11JaX2oP0Tevt2",SUSPENDPROCESS:"IiBNEwBUZHvaZEd884hkl9s",ACTIVAREPROCESS:"r-jGv4CJ2_eJr8ju5dL55tG",UPDATEASSIGNEE:"vhuF2ysepV8qxRGxwy2tauE",STARTPROCESS:"ufxCx62mvy5O56qyW1J",COMPLETETASK:"zxbXS3heSFwAqv910ZQ"}},PROCENTERDEPLOY:{name:"75HlZS4nGZjFaJVfcJTtxqRfF8pIixrHj8VLVGRXNwD",methods:{DEPLOYBYZIP:"3qjAn-cqKdzGCqqoRdo"}},USERINFODATD:{name:"VVFThqq6Am6swm_FAiqN6rrCR46gTZuiCR5qQ5N",methods:{ACOUNT:"1zrMMREJIKUfTbFF_QMtddb",FINDUIDBYNAME:"rWhkvIhueB4zmbk3Mhcl3hYq2q5"}},SYSTEMCODE:{name:"6ke2igQ72I0buaw0iMB5QK05wLEnhMQ7HuZlwSYYzEgGJCu",methods:{GETSYSTEMCODE:"MXXlQL4yf_XaY2HZLHGADkzYymPhjUU-DJJ"}},SUPPLIERSHOP:{name:"a4huh3BDf-pU0emKmyu7Fiwcu9ytbRyd6R4fJGCtTE1xcMLdnKS",methods:{GETSUPPSHOPPERSONS:"CxHWEqtWE6yKZEE5n1c"}},IMPOWERSERVICE:{name:"ubBdWrXdnC-1cRnPgZs7CXA6xZRnzF0",methods:{CREATEAGENCY:"2M_S3N4E_Qzk9CCpO9CH9-BA6UT",IMPOWERLIST:"lbZvPBChkehHxtjvcDe8L2Nru8y",DELETEAGENCY:"D0zKDUrN3VmS8o2xeDh7_Lp0ynf"}},CATEGORY:{name:"U_Uwpq1EYRL1nw5uYeS5kdEskn_Q26K",methods:{CREATEGATEGORY:"GcageCv_T_wEaS93LLdsdPRWUUaJJgn",SEARCHCATEGORY:"RdOLFf_hAyM7bPId_uCSRjTPLNEjzon",UPDATECATEGORY:"QoonamrRzgeZFpbXCmQoInbZS4QspJB",UPDATECATEGORYSTATUS:"yB143AKgQw4gHnW9m1GiYUYopvSv7Hm-loDD7tS",TREE:"0AQQGTyJIyMNDgtJ3doayCo38O1cYfXK-mm",CATEGORYPIDS:"MCOWT8SpIDi_P6nikI18e4QgTv1zrDd"}},WORKFLOW:{name:"pQXz7EdPwVrOsEK1WynO21gH--Bnbyi",methods:{LISTPROCESSCATEGORY:"C66IFbiHFe-Mzok0JHNlOoss0N9MWcx2wlW",QUERYPROCESS:"fjlUgmlG7zLURjhrVAcT6lWX8h2",UPDATEPROCESS:"2fjRpZj6xhUBfZFOiDLHxViZvIdeD4E",INSERTPROCESS:"PUVDPQo7aFEVTLG5rTDmohGmzmNfs.r",DELPROCESS:"LdVSoc43wGHYZrRy2pW2VzLdDm_",GETONEPROCESS:"sk62c1hvoLkHg4t51EUUH-WLmyaFBsP",GETCATEGORIES:"Y0i3HqIGSslCeEP0Vwilsqqj3ytq-.M",GETPROCBPMINFOS:"I85ObDNhRvd-fAt0VDczbxoOUv-7gaJ",CREATEPROCBPMINFO:"MWVWMmrbKm9TJFAFx5m5eIk6fvKzSgTIaqx",UPDATEPROCBPMINFO:"TZEGAo_fQ4jWF59EH21rlLTqTMHWhQw6Iut",GETPROCBPMINFOVERSIONS:"5U0yq2AIsSnb6QlkuMuoGsMph2RqGhk-8lE37a-uTcO",UPDATERUNBPM:"THUHVn_jPO9hEb5LDaDHHkxWj-l",OUTPUTPROCINFO:"msrZf5Q1ZsK8hPxa9J7R4e6ZrwbqD2G"}},ProcessInsService:{name:"tac4MBKgFxtkOyGS5xolDBVgEEqR4_j",methods:{getProcessInsts:"ouPCdbPwR9KlvisnAd8UAhC"}}}},49:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});r(a(6)),r(a(5));var n=r(a(13)),o=r(a(1));t.default={name:"page-purchase-invoice-dialog",components:{},beforeCreate:function(){},created:function(){this.reloadTable()},data:function(){return{activeInputTabName:"basic",isDialogShow:!0,stepsData:[],endStepsData:[],activeIndex:null,endFormater:"yyyy-mm-dd HH:MM:ss"}},props:{args:Object,service:String,method:String,dataSource:{type:Array,default:function(){return[]}}},methods:{onClick:function(e){this.activeIndex!==e?this.activeIndex=e:this.activeIndex=null},closeDialog:function(){this.isDialogShow=!1,this.$emit("close")},reloadTable:function(){var e=this,t=this,a=t.args||{};t.service&&t.method&&!t.isEmptyObject(a)?(this.loading=!0,(0,o.default)({service:t.service,method:t.method,args:a}).then(function(a){e.loading=!1;200==a.data.status?(t.dataSource=a.data.result,t.$emit("data-loaded",t.dataSource)):t.dataSource=[]}).catch(function(t){e.loading=!1})):t.updateDataSource(t.dataSource)},isEmptyObject:function(e){for(var t in e)return!1;return!0},updateDataSource:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.length>0&&t.forEach(function(t){var a=[],r=void 0==t.markKey?"":t.markKey,o=void 0==t.startName?t.starter:t.startName,i=t.startTime>0?(0,n.default)(1e3*t.startTime,e.endFormater):"",s={};s.title="流程起始",s.span=[{text:"审批流程ID："+t.insId},{text:"发起时间："+i},{text:"单据编码："+r},{text:"发起人："+o}],!0===t.end?a.push(s):e.stepsData.push(s);var d=t.taskDetail.length;t.taskDetail.forEach(function(r,o){var i={};i.title=r.taskName;var s=r.executeUser?r.executeName&&r.executeName.length?r.executeName:r.executeUser:null,l=r.assignee?r.assigneeName?r.assigneeName:r.assignee:null;s=s||l;var u=r.commentTime>0?(0,n.default)(1e3*r.commentTime,e.endFormater):"",c=r.createTime>0?(0,n.default)(1e3*r.createTime,e.endFormater):"",m=r.comment?r.comment:"";i.span=[{text:"流程任务ID："+r.taskId},{text:" 生成时间："+c},{text:"处理时间："+u},{text:"处理人："+s},{text:"审批意见："+m}],!0===t.end?(!1===t.audit&&(i.status="error"),a.push(i)):(!1===t.audit&&(i.status="error"),e.stepsData.push(i),o==d-1&&(!0===t.suspend?i.status="suspend":i.status="process"))});var l={};l.title="流程结束",!0===t.end&&a.push(l),!0===t.end&&e.endStepsData.push(a)})}},watch:{args:function(e){this.reloadTable(e)},dataSource:function(e){this.updateDataSource(e)}}}},51:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.steps-container.t8t-full-dialog2 .el-tabs__header {\n    border-top: none;\n}\n",""])},52:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.tc[data-v-38965a90]{\n    text-align: center;\n}\n.steps-wrap[data-v-38965a90]{\n    width: 1200px;\n    margin: 0 auto;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n.steps-wrap1[data-v-38965a90]{\n    width: 1200px;\n    margin: 25px auto;\n    border: 1px solid gray;\n    padding: 20px 50px;\n}\n.steps-wrap1 .t8t-steps[data-v-38965a90]{\n    display: none;\n}\n.steps-wrap1.active .t8t-steps[data-v-38965a90]{\n    display: block;\n}\n.header[data-v-38965a90]{\n    height: 50px;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    -ms-flex-pack: justify;\n        justify-content: space-between;\n}\n.btn[data-v-38965a90]{\n    /*margin-right: 20px;*/\n}\n.title[data-v-38965a90]{\n    font-size: 16px;\n}\n.my-no-flow[data-v-38965a90]{\n    text-align: center;\n    margin-top: 40px;\n    font-size:20px;\n    font-weight: bold;\n}\n.step-page-header[data-v-38965a90]{\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    min-height: 48px;\n    width:1100px;\n}\n",""])},53:function(e,t,a){var r=a(51);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},54:function(e,t,a){var r=a(52);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},55:function(e,t,a){a(54),a(53);var r=a(4)(a(49),a(56),"data-v-38965a90",null);e.exports=r.exports},56:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"t8t-full-dialog2 steps-container",class:{isHide:e.isTopHide},attrs:{size:"full"},on:{close:e.closeDialog},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t}}},[a("div",{staticClass:"t8t-full-dialog2-container"},[a("div",{staticClass:"full-dialog-toolbar-container"},[a("div",{staticClass:"toolbar-container"})]),e._v(" "),a("div",{staticClass:"dialog2-main-container"},[a("h1",{staticClass:"tc"},[e._v("审批流程")]),e._v(" "),a("div",{staticClass:"full-dialog-tabs-container"},[a("el-tabs",{model:{value:e.activeInputTabName,callback:function(t){e.activeInputTabName=t}}},[a("el-tab-pane",{attrs:{label:"处理中",name:"basic"}},[e.stepsData.length>0?a("div",{staticClass:"steps-wrap"},[a("t8t-steps",{attrs:{stepsData:e.stepsData}})],1):a("div",{staticClass:"my-no-flow"},[e._v("\n                            暂无流程\n                        ")])]),e._v(" "),a("el-tab-pane",{attrs:{label:"已结束",name:"other"}},[e.endStepsData.length>0?a("div",e._l(e.endStepsData,function(t,r){return a("div",{staticClass:"steps-wrap1",class:{active:e.activeIndex===r}},[a("div",{staticClass:"header"},[a("el-row",{staticClass:"step-page-header"},[a("el-col",{attrs:{span:23}},[a("div",{staticClass:"title"},e._l(t[0].span,function(t,r){return a("el-col",{attrs:{span:6}},[e._v(e._s(t.text))])}))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.onClick(r)}}},[e._v("查看详情")])],1)],1)],1),e._v(" "),a("t8t-steps",{attrs:{stepsData:t}})],1)})):a("div",{staticClass:"my-no-flow"},[e._v("\n                            暂无流程\n                        ")])])],1)],1)])])])},staticRenderFns:[]}},79:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(76)),o=r(a(1)),i=r(a(47));t.default={obtainCategory:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.LISTPROCESSCATEGORY,service:i.default.WORKFLOW.name,args:e})},queryProcess:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.QUERYPROCESS,service:i.default.WORKFLOW.name,args:e})},editProcess:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.UPDATEPROCESS,service:i.default.WORKFLOW.name,args:e})},createProcess:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.INSERTPROCESS,service:i.default.WORKFLOW.name,args:e})},toggleProcess:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.DELPROCESS,service:i.default.WORKFLOW.name,args:e})},findProcess:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.GETONEPROCESS,service:i.default.WORKFLOW.name,args:e})},getAllCategories:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.GETCATEGORIES,service:i.default.WORKFLOW.name,args:e})},createProcBpmInfo:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.CREATEPROCBPMINFO,service:i.default.WORKFLOW.name,args:e})},updateProcBpmInfo:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.UPDATEPROCBPMINFO,service:i.default.WORKFLOW.name,args:e})},getProcBpmInfos:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.GETPROCBPMINFOS,service:i.default.WORKFLOW.name,args:e})},getProcBpmInfoVersions:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.GETPROCBPMINFOVERSIONS,service:i.default.WORKFLOW.name,args:e})},updateRunBpm:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.UPDATERUNBPM,service:i.default.WORKFLOW.name,args:e})},outputProcInfo:function(e){return(0,o.default)({method:i.default.WORKFLOW.methods.OUTPUTPROCINFO,service:i.default.WORKFLOW.name,args:e})},getProcessInsts:function(e){return(0,o.default)({service:i.default.ProcessInsService.name,method:i.default.ProcessInsService.methods.getProcessInsts,args:e})},getBusinessKeyByProcInsId:function(e){var t=this;return new n.default(function(a,r){t.getProcessInsts({query:{procInsId:e,page:1,size:1}}).then(function(e){200==e.data.status?e.data.result&&e.data.result.result&&e.data.result.result.length>0&&a(e.data.result.result[0].businessKey):r(0)}).catch(function(e){r(0)})})}}},103:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(a(6));t.default={name:"t8t-audit",created:function(){},data:function(){return{radio:null,ruleForm:{agree:null,idea:null},rules:{agree:[{required:!0,message:"请选择审核方案",trigger:"change"}],idea:[{required:!0,message:"请填写审批意见",trigger:"blur"},{max:200,message:"审批意见最多200字",trigger:"blur"}]}}},props:{auditForm:{type:Boolean,default:!1}},methods:{validate:function(e){this.$refs.t8tAudit.validate(e)},changeRadio:function(e){var t=this;1==e?t.$set(t.rules,"idea",[{required:!1,message:"请填写审批意见",trigger:"blur"},{max:200,message:"审批意见最多200字",trigger:"blur"}]):t.$set(t.rules,"idea",[{required:!0,message:"请填写审批意见",trigger:"blur"},{max:200,message:"审批意见最多200字",trigger:"blur"}])}}}},112:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*审核流头部样式*/\n.steps-review-bg-color-diy {\n    background-color: #fffcf8;\n}\n.t8t-full-dialog2 .steps-top-review-confirm-dialog {\n    background-color: #fffcf8;\n    border-bottom: 1px solid #ffead1;\n    min-height:150px;\n}\n.t8t-full-dialog2.isHide .steps-top-review-confirm-dialog .full-dialog-form {\n    height: auto;\n}\n\n/*审批意见输入框大小*/\n.t8t-audit-form .el-textarea {\n    width: 350px;\n}\n",""])},113:function(e,t,a){var r=a(112);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},114:function(e,t,a){a(113);var r=a(4)(a(103),a(115),null,null);e.exports=r.exports},115:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"t8tAudit",staticClass:"t8t-audit-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"方案审核",prop:"agree"}},[a("el-radio-group",{attrs:{disabled:e.auditForm},on:{change:e.changeRadio},model:{value:e.ruleForm.agree,callback:function(t){e.ruleForm.agree=t}}},[a("el-radio",{attrs:{label:"1"}},[e._v("同意")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("不同意")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审批意见",prop:"idea"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",disabled:e.auditForm},model:{value:e.ruleForm.idea,callback:function(t){e.ruleForm.idea=t}}})],1)],1)},staticRenderFns:[]}},160:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(21));t.default=function(e){var t=function(e){var t=[o.default.gatewayAddr,encodeURIComponent(e.service),encodeURIComponent(e.method)],a=e.args||{},r=t.join("/");return r+="/?action=printPDF&uid="+i.default.get("t8t-tc-uid")+"&ticket="+i.default.get("t8t-tc-ticket")+"&args="+(0,n.default)(a)}(e),a=document.createElement("a");a.href=t,a.target="_blank",a.click()};var o=r(a(37)),i=r(a(6))},167:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={order:{name:"I1c2Cx1PxgTcpqUYzfTQualK0vhZ94S",methods:{create:"CYfdVCcvmAInVRLrotLJeTFv5J-6AR6Zs5cN9KW",detail:"nzvxYtZ3pvKtURLvgjkgK4gBVfPkR6iLQRuTcg1",detailVerify:"TiLaDyKVaQAsXBupUQzkPd-KUkVvrDBPxD_aZmIPcLuAL_0",addList:"611_9Gnp6A1lUo0VXmUzavLiHjEo0URn2zyxWI_6ddP",subList:"CML0DVyNGt2pCt1laAflbT5dYK39n-sbIl1ymLZselm",getQuoteOrderSpace:"X0uxaHJ8sgS-qDg7lFaengUrs0P8BxbhzjN",submit:"8FBDfJRnK7FiR1AxEd1_oNyTnQzykM7U0W9FCOP",print:"bSRRHlNZdh9zIcT-fgEE4s_j1OHYzuX_NKXYg8q",VOID:"VittbTpNiQXHygW57MHBza__aLhY8haPpV1",unSubmit:"vsp5y7fCyeAe5gqYIgJvQAZ7d5dqcD3v7AZxpdzzqiG",completeTask:"BdJURYr_NPtgaGvFtfOM0QQ7AZ25klNRj0k"}},workFlow:{name:"I1c2Cx1PxgTcpqUYzfTQualK0vhZ94S",methods:{getBusinessKeyDetail:"ntwMuDkDFF1gAtmoeocMEDugiSemvf2jCaBIyMsnQDsnAUXSetOlceZlNpN",querySignedProjects:"Yul33uIcygqk-hcqTs4yg2b0LCUumZ2xkctvL91rUSxtI62o7VG",variationOrderList:"Lgkgd6NbJVHuWE00kKU9cN2EkcY1aKIIhvLvAew"}}}},257:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(76)),o=r(a(1)),i=r(a(167));t.default={orderDetail:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o.default)({service:i.default.order.name,method:i.default.order.methods.detailVerify,args:{id:a,projectId:e,accountId:t}})},create:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,o.default)({service:i.default.order.name,method:i.default.order.methods.create,args:{dto:{id:e,yid:t,delVariationItemIds:r,variationOrderItems:n},accountId:a}})},verify:function(e,t,a,r,n){var s=1==n,d=r||"";return(0,o.default)({service:i.default.order.name,method:i.default.order.methods.completeTask,args:{req:{taskId:e,procInsId:t,executor:a,comment:d,biz:{deptLeaderApprove:s,deptLeaderComment:d},workflow:{isPass:s}}}})},getQuoteOrderSpace:function(e){var t=[];return new n.default(function(a,r){(0,o.default)({service:i.default.order.name,method:i.default.order.methods.getQuoteOrderSpace,args:{projectId:e}}).then(function(e){200==e.data.status?(e.data.result.forEach(function(e){t.push({text:e.spaceName+"/"+e.spaceAlias,value:e.id})}),a(t)):r(t)}).catch(function(e){r(t)})})},submit:function(e,t){return new n.default(function(a,r){(0,o.default)({service:i.default.order.name,method:i.default.order.methods.submit,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a():r(e.data.result||e.data.message||"提交失败")}).catch(function(e){r("提交异常")})})},void:function(e,t){return new n.default(function(a,r){(0,o.default)({service:i.default.order.name,method:i.default.order.methods.VOID,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a():r(e.data.result||e.data.message||"作废失败")}).catch(function(e){r("作废出现异常")})})},unSubmit:function(e,t){return new n.default(function(a,r){(0,o.default)({service:i.default.order.name,method:i.default.order.methods.unSubmit,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a():r(e.data.result||e.data.message||"反审核失败")}).catch(function(e){r("反审核出现异常")})})}}},424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={datas:{order_status:[{text:"完成初稿",value:0},{text:"审核中",value:1},{text:"审核驳回",value:2},{text:"报价已出",value:3},{text:"核算中",value:4},{text:"核算驳回",value:5},{text:"报价完成",value:6},{text:"已签约",value:7},{text:"作废",value:8}],addOrSubItemTypes:[{text:"增项",value:1},{text:"减项",value:2}]},formFields:[{prop:"yid",label:"项目ID",type:"input",disabled:!0},{prop:"projectAddress",label:"工程地址",type:"input",disabled:!0},{prop:"owner",label:"业主称呼",type:"input",disabled:!0},{prop:"area",label:"计价面积",type:"input",disabled:!0},{prop:"houseTypeName",label:"户型",type:"input",disabled:!0},{prop:"tempName",label:"模板名称",type:"input",disabled:!0},{prop:"totalPrice",label:"变更单金额",type:"input",disabled:!0},{prop:"orderStatus",label:"变更单状态",type:"select",list:"order_status",disabled:!0}],mainTableColumns:[{prop:"orderSpaceId",label:"使用空间",resizable:!1,required:!0,list:"spaces",editor:{type:"select",rules:[{type:"number",required:!0,min:0,message:"请选择使用空间"}]}},{prop:"placeId",label:"位置",resizable:!1,list:"places"},{prop:"qiName",label:"报价项名称",resizable:!1},{prop:"amount",label:"数量",resizable:!1,required:!0,trigger:"blur",editor:{type:"input",rules:function(e,t,a,r){var n=new RegExp("^[0-9]+(\\.\\d{3,})$"),o=t.upperLimit||1e4,i=0==t.lowerLimit?"不含":"包含",s=0==o?"不含":"包含";return[{type:"number",validator:function(e,a,r,i,s){n.test(+a)?r(!1):+a<=0?r(!1):+a>=t.lowerLimit&&+a<=o||0==+a?r():r(!1)},message:"请输入"+t.lowerLimit+"("+i+")-"+o+"("+s+")之间的数字, 精确到两位小数",transform:function(e){return+e},trigger:"blur"},{type:"number",message:"必须为数值",trigger:"blur"}]}}},{prop:"qiUnit",label:"单位",resizable:!1},{prop:"price",label:"单价",resizable:!1},{prop:"totalMoney",label:"金额",resizable:!1,formatter:function(e,t){return(+t.price*+t.amount).toFixed(2)*(1==t.addOrSubItemType?1:-1)}},{prop:"addOrSubItemType",label:"增减",resizable:!1,list:"addOrSubItemTypes"},{prop:"craftDetails",label:"工艺详情",align:"left",resizable:!1}],summaryColumns:[{prop:"spaceName",label:"使用空间",resizable:!1},{prop:"placeName",label:"位置",resizable:!1},{prop:"qiName",label:"报价项名称",resizable:!1},{prop:"amount",label:"数量",resizable:!1},{prop:"qiUnit",label:"单位",resizable:!1},{prop:"price",label:"单价",resizable:!1},{prop:"totalMoney",label:"金额",resizable:!1},{prop:"addOrSubItem",label:"增减",resizable:!1},{prop:"craftDetails",label:"工艺详情",align:"left",resizable:!1}],addPlusItemColumns:[{prop:"qiName",label:"报价项名"},{prop:"qiUnit",label:"单位"},{prop:"price",label:"单价"},{prop:"craftDetails",label:"工艺详情"}],addPlusItemFormFields:[{name:"qiCode",placeholder:"报价项编码",type:"input"},{name:"qiName",placeholder:"报价项名称",type:"input"},{name:"craftDetails",placeholder:"工艺详情关键字",type:"input"}],addSubItemColumns:[],addSubItemFormFields:[{name:"qiName",placeholder:"报价项名称",type:"input"},{name:"orderSpaceId",placeholder:"空间",type:"select",selectSourceKey:"spaces"},{name:"placeId",placeholder:"位置",type:"select",selectSourceKey:"places"}]};t.default=a},788:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(11)),o=r(a(167)),i=r(a(424));t.default={name:"addChangeOrderItemDialog",components:{},props:["addItemType","tempCode","orgId","yid","spaces","places"],created:function(){this.initParams(),this.formData.spaces=this.spaces,this.formData.places=this.places},mounted:function(){},methods:{initParams:function(){switch(this.addItemType){case"plus":this.mainTableMethod=o.default.order.methods.addList,this.fields=i.default.addPlusItemFormFields,this.mainTableColumns=this.columns1,this.title="添加增项",this.args={dto:{orgId:this.orgId,tempCode:this.tempCode}};break;case"sub":this.mainTableMethod=o.default.order.methods.subList,this.fields=i.default.addSubItemFormFields,this.mainTableColumns=this.columns2,this.title="添加减项",this.args={dto:{yid:this.yid}};break;default:this.mainTableMethod=""}},submit:function(){var e=this,t=this.$refs.addChangeOrderItemTable.getSelectRows();if(0==t.length&&null==this.currentRow)return this.$message({type:"warning",message:"请选择报价项"});var a=t||[this.currentRow]||[];a.length&&a.forEach(function(t){e.submitSelectRow(t)}),this.closeAddItemDialog()},handlerDoubleClick:function(e){this.submitSelectRow(e),this.closeAddItemDialog()},submitSelectRow:function(e){var t={tempItemId:e.id,itemPriceId:e.itemPriceId,orderSpaceId:e.orderSpaceId||null,qiName:e.qiName,qiUnit:e.qiUnit,price:e.price,craftDetails:e.craftDetails,upperLimit:e.upperLimit||e.amount||0,lowerLimit:e.lowerLimit||0,spaceId:e.spaceId||0,placeId:e.placeId||0};this.$parent.handlerAddItem(t)},submitSearch:function(e){var t=(0,n.default)({},e),a=(0,n.default)({},this.args),r=(0,n.default)(a.dto,t);a.dto=r,this.args=a},handleCurrentRowChange:function(e,t){this.currentRow=e},closeAddItemDialog:function(){this.$emit("close")}},data:function(){return{title:"",mainTableColumns:[],mainTableService:o.default.order.name,mainTableMethod:"",args:{dto:{orgId:this.orgId,tempCode:this.tempCode}},addItemDialogVisible:!0,fields:[],formData:{places:[],spaces:[]},selectSource:{},columns1:[{prop:"qiName",label:"报价项名"},{prop:"qiUnit",label:"单位"},{prop:"price",label:"单价"},{prop:"craftDetails",label:"工艺详情"}],columns2:[{prop:"qiName",label:"报价项名"},{prop:"qiUnit",label:"单位"},{prop:"price",label:"单价"},{prop:"spaceName",label:"空间"},{prop:"placeName",label:"位置"}]}}}},789:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(21)),o=r(a(11)),i=r(a(424)),s=r(a(167)),d=r(a(257)),l=r(a(79)),u=r(a(2231)),c=r(a(5)),m=r(a(114)),f=r(a(55)),p=r(a(160)),h=r(a(6));t.default={components:{addChangeOrderItemDialog:u.default,T8tAudit:m.default,T8tStepPage:f.default},name:"quoteChangeOrderDetail",created:function(){this.getCommonOptions(30003,"places")},mounted:function(){this.initParams(),this.initOrderData()},data:function(){return{yid:null,orderId:null,tempCode:null,orgId:null,isTopHide:!1,orderItems:[],orderItemsClone:[],orderInfo:{},addItemDialogVisible:!1,quoteChangeOrderDialogVisible:!0,accountId:null,addItemType:"",delVariationItemIds:[],changeOrderPrice:0,projectManagerPrice:0,tax:0,procInsId:0,taskId:0,isInWorkFlow:!1,flowArgs:{},flowService:s.default.workFlow.name,flowMethod:s.default.workFlow.methods.getBusinessKeyDetail,flowData:[],isShowFlow:!1,symbilListTop:["TEMP-SAVE","VOID","EDIT-SUBMIT","PRINT","ANTI-AUDITING","AUDITING-SUBMIT","APPROVAL-FLOW"],symbilListTopDefault:["TEMP-SAVE","VOID","EDIT-SUBMIT","PRINT","ANTI-AUDITING","AUDITING-SUBMIT","APPROVAL-FLOW"],symbilListTopWorkFlow:["AUDITING-SUBMIT","APPROVAL-FLOW"],disabledSymbolsTopDefault:["TEMP-SAVE","EDIT-SUBMIT","VOID","PRINT","ANTI-AUDITING","AUDITING-SUBMIT"],disabledSymbolsTop:["TEMP-SAVE","EDIT-SUBMIT","VOID","PRINT","ANTI-AUDITING","AUDITING-SUBMIT"],formCommonData:{order_status:i.default.datas.order_status,houseTypes:[],addOrSubItemTypes:i.default.datas.addOrSubItemTypes,spaces:[]},formFields:i.default.formFields,mainTableColumns:i.default.mainTableColumns,templateData:{spaceId:null,placeId:null,amount:0,price:0,totalMoney:0,addOrSubItemType:null,orderSpaceId:null},summaryColumns:i.default.summaryColumns,summaryData:[{columnsProp:"changeOrderTotalPrice",spaceName:"",placeName:"",qiName:"变更金额合计",amount:"",qiUnit:"",price:"",totalMoney:"",addOrSubItem:"",craftDetails:""},{columnsProp:"projectManagerPrice",spaceName:"",placeName:"",qiName:"项目管理费",amount:"",qiUnit:"",price:"",totalMoney:"",addOrSubItem:"",craftDetails:""},{columnsProp:"tax",spaceName:"",placeName:"",qiName:"税金",amount:"",qiUnit:"",price:"",totalMoney:"",addOrSubItem:"",craftDetails:""},{columnsProp:"changeOrderPrice",spaceName:"",placeName:"",qiName:"变更单金额",amount:"",qiUnit:"",price:"",totalMoney:"",addOrSubItem:"",craftDetails:""}]}},methods:{addItem:function(e){var t=this.$refs.t8ttable,a=(0,o.default)({},t.templateData),r=(0,o.default)(a,e);t.addNewRow(r,"back")},addPlusItem:function(){this.addItemType="plus",this.showAddItemDialog()},handlerAddPlusItem:function(e){this.$TCS.addTag("red_11732_018003009009");var t=(0,o.default)({},e);t.addOrSubItemType=1,this.addItem(t)},addSubTractItem:function(){this.addItemType="sub",this.showAddItemDialog()},handlerAddSubTractItem:function(e){if(this.orderItems.length&&this.orderItems.filter(function(t){return 2==t.addOrSubItemType&&t.tempItemId==e.tempItemId&&t.orderSpaceId==e.orderSpaceId}).length>0)return this.$msgbox({title:"",type:"error",message:"变更单已经存在相同的减项"});this.$TCS.addTag("red_11732_018003009010");var t=(0,o.default)({},e);t.addOrSubItemType=2,this.addItem(t)},handlerAddItem:function(e){switch(this.addItemType){case"plus":this.handlerAddPlusItem(e);break;case"sub":this.handlerAddSubTractItem(e);break;default:this.$msgbox({title:"",type:"error",message:"添加失败：未知操作"})}this.resizeGrid(0)},showAddItemDialog:function(){this.addItemDialogVisible=!0},removeItem:function(e){var t=e.$index,a=e.row;this.orderItems.splice(t,1),a.hasOwnProperty("id")&&!this.isEmpty(a.id)&&this.delVariationItemIds.push(a.id),this.computeAmount(),this.resizeGrid(0)},cellEditorChange:function(e,t,a,r){var n=e.row,o=e.column.property;if("amount"==o&&this.computeAmount(),"orderSpaceId"===o&&this.orderItems.length){var i=[];if((i=this.orderItems.filter(function(e){return n!=e&&1==e.addOrSubItemType&&e.tempItemId==n.tempItemId&&e.orderSpaceId==n.orderSpaceId})).length>0)return n.orderSpaceId=null,this.$msgbox({title:"错误",type:"error",message:"同一使用空间不能存在相同的增项(第"+(e.$index+1)+"行和第"+(this.orderItems.indexOf(i[0])+1)+"行重复)"})}},cellClick:function(e,t,a,r){"orderSpaceId"===t.property&&2==e.addOrSubItemType&&this.$refs.t8ttable.handleFormItemBlur()},computeAmount:function(){var e=0,t=this.orderItems,a=this.orderInfo;t.forEach(function(t,a){e+=t.amount&&!isNaN(t.amount)?+(+t.price*+t.amount).toFixed(2)*(1==t.addOrSubItemType?1:-1):0}),e=+e.toFixed(2),([0,2].indexOf(a.orderStatus)>-1||this.isEmpty(a.id))&&(this.projectManagerPrice=+(e*a.projectManagerPriceRate).toFixed(2),this.$set(this.summaryData.filter(function(e){return"projectManagerPrice"==e.columnsProp})[0],"totalMoney",this.projectManagerPrice)),([0,2].indexOf(a.orderStatus)>-1||this.isEmpty(a.id))&&(this.tax=+((e+this.projectManagerPrice)*a.taxRate).toFixed(2),this.$set(this.summaryData.filter(function(e){return"tax"==e.columnsProp})[0],"totalMoney",this.tax)),this.$set(this.summaryData.filter(function(e){return"changeOrderTotalPrice"==e.columnsProp})[0],"totalMoney",e),this.$set(this.summaryData.filter(function(e){return"changeOrderPrice"==e.columnsProp})[0],"totalMoney",(e+this.tax+this.projectManagerPrice).toFixed(2))},tempSave:function(){var e=this,t=this,a=[this.$refs.t8ttable];this.validateData(a,0,function(){var a=e.formatVariationOrderItemsCreateToSave();if(0==a.length&&0==e.delVariationItemIds.length)return e.$msgbox({type:"error",title:"",message:"没有添加、修改或删除增(减)项"});t.$TCS.addTag("red_11732_018003009002"),t.addDisabledSymbol("TEMP-SAVE",t.disabledSymbolsTop),d.default.create(e.orderInfo.id||null,e.orderInfo.yid,+h.default.get("t8t-tc-uid"),e.delVariationItemIds,a).then(function(a){200==a.data.status?(e.$msgbox({type:"success",title:"",message:"暂存成功"}),!e.isEmpty(a.data.result)&&e.isEmpty(e.orderId)&&(e.orderId=a.data.result,e.$router.push({path:"/worker/quote-changeorder-detail",query:{yid:e.yid,orderId:e.orderId}})),e.delVariationItemIds=[],e.initOrderData(),t.removeDisabledSymbol("TEMP-SAVE",t.disabledSymbolsTop)):(e.$msgbox({title:"",type:"error",message:a.data.result||a.data.message}),t.removeDisabledSymbol("TEMP-SAVE",t.disabledSymbolsTop))}).catch(function(a){e.$msgbox({title:"暂存出错",type:"error",message:a}),t.removeDisabledSymbol("TEMP-SAVE",t.disabledSymbolsTop)})})},formatVariationOrderItemsCreateToSave:function(){var e=[];return this.orderItems&&this.orderItems.forEach(function(t,a){e.push({id:t.id||null,tempItemId:t.tempItemId,itemPriceId:t.itemPriceId,orderSpaceId:t.orderSpaceId,serialNumber:a+1,amount:t.amount?t.amount*(1==t.addOrSubItemType?1:-1):0})}),e},validateData:function(e,t,a){var r=this;0==e.length?a():e[t].validate(function(n){if(!n)return!1;e.length==t+1?a():r.validateData(e,t+1,a)})},submit:function(){var e=this,t=this;if(0==t.orderItems.length)return this.$msgbox({type:"error",title:"",message:"变更单中没有报价项"});this.$confirm("提交前请确认变更单内容无误。是否继续提交？","提示",{type:"warning",confirmButtonText:"继续提交",cancelButtonText:"先不提交"}).then(function(){(0,n.default)(e.orderItems)!=(0,n.default)(e.orderItemsClone)?e.$confirm("有数据变更，继续提交未保存的数据将丢失，是否继续提交？","提示",{type:"warning",confirmButtonText:"继续提交",cancelButtonText:"先不提交"}).then(function(){t.submitDo()}):t.submitDo()})},submitDo:function(){var e=this,t=this;t.$TCS.addTag("red_11732_018003009003"),t.addDisabledSymbol("EDIT-SUBMIT",t.disabledSymbolsTop),d.default.submit(t.orderId,+h.default.get("t8t-tc-uid")).then(function(a){return e.$msgbox({title:"消息",type:"success",message:"提交成功",callback:function(){t.$router.push("/worker/quote-changeorder-list")}})}).catch(function(a){return t.removeDisabledSymbol("EDIT-SUBMIT",t.disabledSymbolsTop),e.$msgbox({title:"消息",type:"error",message:a})})},print:function(){this.$TCS.addTag("red_11732_018003009004"),(0,p.default)({method:s.default.order.methods.print,service:s.default.order.name,args:{id:this.orderId,accountId:+h.default.get("t8t-tc-uid")}})},unSubmit:function(){var e=this,t=this;this.$TCS.addTag("red_11732_018003009005"),this.addDisabledSymbol("ANTI-AUDITING",t.disabledSymbolsTop),d.default.unSubmit(this.orderId,+h.default.get("t8t-tc-uid")).then(function(a){return e.$msgbox({title:"消息",type:"success",message:"反审核成功",callback:function(){t.initOrderData()}})}).catch(function(a){return e.removeDisabledSymbol("ANTI-AUDITING",t.disabledSymbolsTop),e.$msgbox({title:"消息",type:"error",message:a})})},voidFun:function(){var e=this,t=this;t.$confirm("作废后变更单将不可使用，是否确认作废","警告",{type:"warning",confirmButtonText:"确认作废",cancelButtonText:"取消"}).then(function(){e.$TCS.addTag("red_11732_018003009006"),e.addDisabledSymbol("VOID",t.disabledSymbolsTop),d.default.void(e.orderId,+h.default.get("t8t-tc-uid")).then(function(a){return e.$msgbox({title:"消息",type:"success",message:"作废成功",callback:function(){t.initOrderData()}})}).catch(function(a){return e.removeDisabledSymbol("VOID",t.disabledSymbolsTop),e.$msgbox({title:"消息",type:"error",message:a})})})},checkSubmit:function(){var e=this;this.checkOrder(function(){var t=e.$refs.t8tAudit.ruleForm;e.$TCS.addTag("red_11732_018003009007"),e.addDisabledSymbol("AUDITING-SUBMIT",e.disabledSymbolsTop),d.default.verify(e.taskId,e.procInsId,+h.default.get("t8t-tc-uid"),t.idea,t.agree).then(function(t){200==t.data.status?e.$msgbox({title:"消息",message:"审核成功",type:"success",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain",callback:function(){window.close()}}):(e.$msgbox({title:"消息",message:t.data.message||"审核失败",type:"error",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}),e.removeDisabledSymbol("AUDITING-SUBMIT",e.disabledSymbolsTop))}).catch(function(t){e.removeDisabledSymbol("AUDITING-SUBMIT",e.disabledSymbolsTop),e.$msgbox({title:"消息",message:"审核失败",type:"error",showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"})})})},checkOrder:function(e){var t=this;this.$refs.t8tAudit.validate(function(a){if(a){t.removeDisabledSymbol("AUDITING-SUBMIT",t.disabledSymbolsTop);t.$refs.t8tAudit.ruleForm;e()}})},initParams:function(){this.yid=this.$route.query.yid,this.orderId=this.$route.query.orderId||null,this.procInsId=this.$route.query.procInsId||null,this.taskId=this.$route.query.taskId||null,this.isInWorkFlow=this.procInsId&&this.taskId,this.isInWorkFlow&&(this.symbilListTop=this.symbilListTopWorkFlow,this.removeDisabledSymbol("AUDITING-SUBMIT",this.disabledSymbolsTop),this.isTopHide=!1)},initOrderData:function(){var e=this;this.isInWorkFlow?l.default.getBusinessKeyByProcInsId(this.procInsId).then(function(t){e.orderId=t,e.initOrderDataDO()}).catch(function(t){e.orderId=t,e.initOrderDataDO()}):this.initOrderDataDO()},initOrderDataDO:function(){var e=this,t=this;t.disabledSymbolsTop=(0,o.default)([],t.disabledSymbolsTopDefault),d.default.orderDetail(this.yid||null,+h.default.get("t8t-tc-uid"),this.orderId).then(function(a){if(200!=a.data.status)return e.$msgbox({title:"消息",type:"error",message:a.data.result||"初始化项目信息出错， 请重试"});var r=a.data.result;t.orderInfo=r.order,t.orderItems=r.orderItems,t.projectManagerPrice=t.orderInfo.projectManagerPrice||0,t.$set(e.summaryData.filter(function(e){return"projectManagerPrice"==e.columnsProp})[0],"totalMoney",t.projectManagerPrice),t.tax=t.orderInfo.tax,t.yid=t.orderInfo.yid,t.$set(e.summaryData.filter(function(e){return"tax"==e.columnsProp})[0],"totalMoney",t.tax),e.computeAmount(),e.getSpaces(),t.orderItemsClone=JSON.parse((0,n.default)(t.orderItems)),([0,2].indexOf(t.orderInfo.orderStatus)>-1||t.isEmpty(t.orderInfo.id))&&t.removeDisabledSymbol("TEMP-SAVE",t.disabledSymbolsTop),[0].indexOf(t.orderInfo.orderStatus)>-1&&t.orderInfo.id>0&&t.removeDisabledSymbol("EDIT-SUBMIT",t.disabledSymbolsTop),t.orderInfo.id>0&&t.removeDisabledSymbol("PRINT",t.disabledSymbolsTop),[6].indexOf(t.orderInfo.orderStatus)>-1&&t.removeDisabledSymbol("ANTI-AUDITING",t.disabledSymbolsTop),[0,2].indexOf(t.orderInfo.orderStatus)>-1&&t.orderInfo.id>0&&t.removeDisabledSymbol("VOID",t.disabledSymbolsTop),[1].indexOf(t.orderInfo.orderStatus)>-1&&t.orderInfo.id>0&&t.isInWorkFlow&&t.removeDisabledSymbol("AUDITING-SUBMIT",t.disabledSymbolsTop),t.orderInfo.id>0&&t.removeDisabledSymbol("APPROVAL-FLOW",t.disabledSymbolsTop),t.symbilListTop=t.symbilListTopDefault,t.isInWorkFlow&&(t.symbilListTop=t.symbilListTopWorkFlow),setTimeout(function(a){var r=t.$refs.t8ttable.$refs.table,n=r.layout;r.height=n.rowHeight*(r.data.length+2)+(r.layout.showHeader?r.layout.headerHeight:0),e.resizeSummaryMoneyGrid()},0)}).catch(function(t){return e.$msgbox({title:"消息",type:"error",message:"初始化项目信息出错， 请重试"})})},flowBtn:function(){this.$TCS.addTag("red_11732_018003009008"),this.flowArgs={getBusinessKeyDetailDTO:{orderId:this.orderId}},this.isShowFlow=!0},closeStepPage:function(){this.isShowFlow=!1},getHouseTypes:function(){},onTopHide:function(){this.isTopHide=!this.isTopHide},getSpaces:function(){var e=this;d.default.getQuoteOrderSpace(this.orderInfo.yid).then(function(t){e.formCommonData.spaces=t})},isCanEdit:function(){return 0==this.orderInfo.id||[0,2].indexOf(this.orderInfo.orderStatus)>-1},closeQuoteChangeOrderDialog:function(){this.$router.push("/worker/quote-changeorder-list")},resizeGrid:function(e){var t=this;this.$nextTick(function(e){var a=t.$refs.t8ttable.$refs.table,r=a.layout;a.height=r.rowHeight*(a.data.length+2)+(a.layout.showHeader?a.layout.headerHeight:0)})},resizeSummaryMoneyGrid:function(){var e=this.$refs.summarytable.$refs.table,t=e.layout;e.height=t.rowHeight*(e.data.length+1)+(e.layout.showHeader?e.layout.headerHeight:0)},addDisabledSymbol:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";-1==(t=t||this.disabledSymbolsTop).indexOf(e)&&t.push(e)},removeDisabledSymbol:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(t=t||this.disabledSymbolsTop).indexOf(e);a>-1&&t.splice(a,1)},getCommonOptions:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"propertyName",o={page:1,search:{pPropertyCode:e},size:100},i=[];c.default.queryUnionParent(o).then(function(e){200===e.data.status&&(e.data.result.forEach(function(e){1===e.propertyStatus&&i.push({value:e[r],text:e[n],code:e.propertyCode})}),a.formCommonData[t]=i)})},isEmpty:function(e){return null==e||0==e||""==e||void 0==e||"0"==e},isNull:function(e){return null==e||""==e||void 0==e}}}},942:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.quoteChangeOrderDetail .top-hide{\n    position: absolute;\n    top: 48px;\n    right: 10px;\n    z-index: 1;\n    transform: rotate(90deg);\n    cursor: pointer;\n}\n.quoteChangeOrderDetail.isHide .top-hide{\n    transform: rotate(-90deg);\n}\n.quoteChangeOrderDetail.isHide .headerForm{\n    height: 0;\n    padding-top: 0;\n    overflow: hidden;\n}\n.quoteChangeOrderDetail .remove-item{\n    margin: auto 5px;\n}\n\n/*解决表格数据过多导致头部隐藏问题*/\n.quoteChangeOrderDetail .full-dialog-form-container {\n    width: 1220px;\n    margin-left: auto;\n    margin-right: auto;\n    overflow: initial;\n}\n\n/*解决小屏幕出现小表格横向滚动条问题*/\n@media screen and (max-height: 900px) {\nbody{\n        min-width:1360px;\n}\n.quoteChangeOrderDetailDialog{\n        min-width: 1360px;\n}\n.quoteChangeOrderDetailDialog .el-dialog__body{\n        min-width: 1360px;\n}\n.quoteChangeOrderDetailDialog .quoteChangeOrderItemPanel{\n        min-width: 1360px;\n}\n.t8t-full-dialog .toolbar-container{\n        width:100%;\n}\n\n    /*.quoteChangeOrderDetailDialog .el-table {\n        overflow: initial;\n        width: initial;\n        max-width:none;\n    }*/\n.quoteChangeOrderDetailDialog .el-table__body{\n        width:100% !important;\n}\n.quoteChangeOrderDetailDialog .summaryMoney{\n        min-width: 1360px;\n}\n.quoteChangeOrderDetailDialog .summaryMoney .el-table {\n        max-width:100%;\n}\n.quoteChangeOrderDetailDialog .summaryMoney .el-row {\n        display: -ms-flexbox;\n        display: flex;\n}\n}\nt8t-full-dialog .full-dialog-toolbar-container{\n    height: 38px;\n    background-color: #1e3246;\n}\n.t8t-full-dialog2 .toolbar-container{\n    width: 1220px;\n    margin: 0 auto;\n    padding-left: 15px;\n    height: 100%;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    background-color: #1e3246;\n}\n.t8t-full-dialog2 .toolbar-container .el-button{\n    padding: 0 12px;\n    height: 26px;\n    font-size: 12px;\n    background-color: #1e3246;\n    color: #d1dde9;\n    border: 1px solid #09131d;\n}\n.t8t-full-dialog2 .toolbar-container .el-button:hover{\n    color: #1e3246;\n    background-color: #d2deeb;\n}\n",""])},1236:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.addChangeOrderItemDialog[data-v-6cbde686]{\n}\n",""])},1385:function(e,t,a){var r=a(942);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},1682:function(e,t,a){var r=a(1236);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},2231:function(e,t,a){a(1682);var r=a(4)(a(788),a(2485),"data-v-6cbde686",null);e.exports=r.exports},2232:function(e,t,a){a(1385);var r=a(4)(a(789),a(2248),null,null);e.exports=r.exports},2248:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quoteChangeOrderDetail"},[a("el-dialog",{staticClass:"t8t-full-dialog2 dialog-new quoteChangeOrderDetailDialog",class:{isHide:e.isTopHide},attrs:{size:"full","show-close":!1,"close-on-press-escape":!1},on:{close:e.closeQuoteChangeOrderDialog},model:{value:e.quoteChangeOrderDialogVisible,callback:function(t){e.quoteChangeOrderDialogVisible=t}}},[a("div",{staticClass:"t8t-full-dialog2-container"},[a("div",{staticClass:"full-dialog-toolbar-container"},[a("div",{staticClass:"toolbar-container"},[a("div",[a("el-button",{on:{click:function(t){e.closeQuoteChangeOrderDialog()}}},[e._v("返回")])],1),e._v(" "),a("t8t-toolbar",{ref:"topToolbar",attrs:{symbolList:e.symbilListTop,disabledSymbols:e.disabledSymbolsTop},on:{"TEMP-SAVE":function(t){e.tempSave()},"EDIT-SUBMIT":function(t){e.submit()},PRINT:function(t){e.print()},"ANTI-AUDITING":function(t){e.unSubmit()},"APPROVAL-FLOW":function(t){e.flowBtn()},"AUDITING-SUBMIT":function(t){e.checkSubmit()},VOID:function(t){e.voidFun()}}})],1)]),e._v(" "),a("div",{staticClass:"dialog2-main-container",class:{isHide:e.isTopHide}},[e.isInWorkFlow?a("div",{staticClass:"full-dialog-form-container"},[a("t8t-audit",{ref:"t8tAudit"})],1):e._e(),e._v(" "),a("div",{staticClass:"full-dialog-form-container"},[a("t8t-form-panel",{ref:"headForm",staticClass:"headerForm",attrs:{dataSource:e.orderInfo,commonData:e.formCommonData,fields:e.formFields}})],1),e._v(" "),a("div",{staticClass:"top-hide el-icon-d-arrow-left",on:{click:e.onTopHide}}),e._v(" "),a("t8t-toolbar",{ref:"bodyToolbar",attrs:{symbolList:["ADD-PLUSITEM","ADD-SUBTRACTITEM"],disabledSymbols:e.isCanEdit()?[]:["ADD-PLUSITEM","ADD-SUBTRACTITEM"]},on:{"ADD-PLUSITEM":function(t){e.addPlusItem()},"ADD-SUBTRACTITEM":function(t){e.addSubTractItem()}}}),e._v(" "),a("div",{staticClass:"quoteChangeOrderItemPanel"},[a("t8t-grid",{ref:"t8ttable",style:e.index?"":"border-top: 1px solid #dfe6ec",attrs:{columns:e.mainTableColumns,dataSource:e.orderItems,commonData:e.formCommonData,editable:e.isCanEdit(),indexCol:!1,selectCol:!1,showHeader:!e.index,pageBar:!1,stripe:!1,preLoad:!1,templateData:e.templateData},on:{headerDragend:e.headerDragend,"cell-click":e.cellClick,"cell-editor-change":e.cellEditorChange},scopedSlots:e._u([["qiName",function(t){return[a("div",{staticClass:"cell-text",staticStyle:{float:"left"}},[a("el-button",{staticClass:"remove-item",attrs:{type:"",size:"mini",name:e.removeItem,title:"删除报价项",disabled:!e.isCanEdit()},on:{click:function(a){a.stopPropagation(),e.removeItem(t)}}},[a("i",{staticClass:"el-icon-delete el-icon&#45;&#45;left"}),e._v("删除")])],1),e._v(" "),a("span",[e._v(e._s(t.row.qiName))])]}],["craftDetails",function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[a("div",{staticClass:"craftDetails-popover"},[e._v(e._s(t.row.craftDetails))]),e._v(" "),a("div",{staticClass:"name-wrapper",slot:"reference"},[a("div",{staticClass:"cell-text"},[e._v(e._s(t.row.craftDetails))])])])]}],["totalMoney",function(t){return[a("span",[e._v(e._s(t.row.amount&&!isNaN(t.row.amount)?(+t.row.price*+t.row.amount).toFixed(2)*(1==t.row.addOrSubItemType?1:-1):0))])]}]])})],1),e._v(" "),a("div",{staticClass:"summaryMoney"},[a("t8t-grid",{ref:"summarytable",attrs:{columns:e.summaryColumns,dataSource:e.summaryData,indexCol:!1,selectCol:!1,editable:!1,pageBar:!1,showHeader:!1,preLoad:!1}})],1)],1)])]),e._v(" "),e.addItemDialogVisible?a("addChangeOrderItemDialog",{ref:"addChangeOrderItemDialog",attrs:{addItemType:e.addItemType,tempCode:e.orderInfo.tempCode,orgId:e.orderInfo.orgId,spaces:e.formCommonData.spaces,places:e.formCommonData.places,yid:e.yid},on:{close:function(t){e.addItemDialogVisible=!1}}}):e._e(),e._v(" "),e.isShowFlow?a("t8t-step-page",{attrs:{method:e.flowMethod,service:e.flowService,args:e.flowArgs,dataSource:e.flowData},on:{close:e.closeStepPage}}):e._e()],1)},staticRenderFns:[]}},2485:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addChangeOrderItemDialogMain"},[a("el-dialog",{staticClass:"g-w-1000 my-el-dialog addChangeOrderItemDialog",attrs:{title:e.title},on:{close:e.closeAddItemDialog},model:{value:e.addItemDialogVisible,callback:function(t){e.addItemDialogVisible=t}}},[a("t8t-search",{ref:"addChangeOrderItemDialogForm",attrs:{fields:e.fields,selectSource:e.formData,showToggleBtn:!1},on:{submit:e.submitSearch}}),e._v(" "),a("t8t-grid",{ref:"addChangeOrderItemTable",staticStyle:{"min-height":"300px"},attrs:{columns:e.mainTableColumns,service:e.mainTableService,method:e.mainTableMethod,args:e.args,radioCol:!1},on:{"row-double-click":e.handlerDoubleClick,"current-row-change":e.handleCurrentRowChange}}),e._v(" "),a("div",{slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.addItemDialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submit()}}},[e._v("确认")])],1)])],1)],1)],1)],1)},staticRenderFns:[]}}});