webpackJsonp([220,269],{9:function(e,t,n){e.exports=n(7)(105)},62:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getTextById=function(e,t,n){var o=e.filter(function(e){return e.value===t});return o[0]?o[0].hasOwnProperty(n)?o[0][n]:o[0].hasOwnProperty("text")?o[0].text:o[0].hasOwnProperty("label")?o[0].label:void 0:""},t.M={create:"提交",update:"编辑",delete:"删除",void:"作废",valid:"反作废"},t.mb=function(e,t){return{title:"消息",type:t||"success",message:e,showCancelButton:!1,confirmButtonText:"知道了",confirmButtonClass:"is-plain"}}},157:function(e,t){"use strict";e.exports={SIGN_MANAGE:{name:"uWDqK_1fRdtf2T7mnBZmdX7zeCvpdLP",methods:{CONTRACT_LIST:"UtYdn97SyQqDki89jh7GljKNvitRpIGMcTq",CONTRACT_DETAIL_BY_ID:"BO74vexPvMiP0ptLrOsS3SBMoG3beFzsq46b7Xw-1JwpDpzD186",SUBMIT:"y4-9Nk8lDwRU0yVbh2fKTDuQtpgv6.M",PREVIEW:"x36b2xNPCoKSCtGLir2nCtca5zp5.1DxFUQ",CANCEL_CONTRACT:"fmq9dOdOEsM-9wfJlwwMgwY7duv4rAmS3MB1HN5tHSA",COMPLEMENT_AGREEMENT:"hnInpi5_AzI7swc6HOoL6Dya4Z5Wragh1zkObchg5JzgYKpQrFqKYUhiLYxMq9C",CONFIRM_OFFLINE_SIGN:"zP54udfWD6TJlRzavJuNHkEBqk12JSQwvs3rd5fxqzqv5ipuLb5C6fA",COMPLEMENT_CONTRACT_INFO:"x34S-wIdxcJ_0zad1yj8TCppq3hHAywJP3rLsljgptA"}},CONTRACT:{name:"ZaoMvDiDgkgR5WWIEqkkB_xJgy9sPOS",methods:{CONTRACT_IS_SUCC:"1b6jygJhuasf9oZ6NuAe2JhwkikvbVEwIJCwmSmxQ-U",GETPREVIEW:"7M00-WfNCGs3YyNh59WfM_FkVzaoM9IGMDId4T7OvYnluTK"}}}},158:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=o(n(1)),r=o(n(157));e.exports={contractList:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.CONTRACT_LIST,service:r.default.SIGN_MANAGE.name,args:e})},createContract:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.SUBMIT,service:r.default.SIGN_MANAGE.name,args:e})},contractDetail:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.CONTRACT_DETAIL_BY_ID,service:r.default.SIGN_MANAGE.name,args:e})},preview:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.PREVIEW,service:r.default.SIGN_MANAGE.name,args:e})},getPreview:function(e){return(0,i.default)({method:r.default.CONTRACT.methods.GETPREVIEW,service:r.default.CONTRACT.name,args:e})},cancel:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.CANCEL_CONTRACT,service:r.default.SIGN_MANAGE.name,args:e})},getComplementAgreementInfo:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.COMPLEMENT_AGREEMENT,service:r.default.SIGN_MANAGE.name,args:e})},confirmOfflineSign:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.CONFIRM_OFFLINE_SIGN,service:r.default.SIGN_MANAGE.name,args:e})},checkIsCreateContract:function(e){return(0,i.default)({method:r.default.CONTRACT.methods.CONTRACT_IS_SUCC,service:r.default.CONTRACT.name,args:e})},complementContractInfo:function(e){return(0,i.default)({method:r.default.SIGN_MANAGE.methods.COMPLEMENT_CONTRACT_INFO,service:r.default.SIGN_MANAGE.name,args:e})}}},159:function(e,t,n){var o,i,r;!function(e){e&&e.__esModule}(n(9));!function(n,a){i=[],void 0!==(r="function"==typeof(o=a)?o.apply(t,i):o)&&(e.exports=r)}(0,function(){"use strict";if("undefined"==typeof window||"undefined"==typeof navigator)return!1;var e,t,n,o,i,r,a,s,d,l,u,c=void 0!==navigator.mimeTypes["application/pdf"],f=/iphone|ipad|ipod/i.test(navigator.userAgent.toLowerCase());return t=function(e){var t;try{t=new ActiveXObject(e)}catch(e){t=null}return t},n=function(){return!!(window.ActiveXObject||"ActiveXObject"in window)},o=function(){return!(!t("AcroPDF.PDF")&&!t("PDF.PdfCtrl"))},e=c||n()&&o(),i=function(e){var t,n="";if(e){for(t in e)e.hasOwnProperty(t)&&(n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&");n&&(n=(n="#"+n).slice(0,n.length-1))}return n},r=function(e){"undefined"!=typeof console&&console.log},a=function(e){return r(),!1},d=function(e){var t=document.body;return"string"==typeof e?t=document.querySelector(e):"undefined"!=typeof jQuery&&e instanceof jQuery&&e.length?t=e.get(0):void 0!==e.nodeType&&1===e.nodeType&&(t=e),t},l=function(e,t,n,o,i){var r=o+"?file="+encodeURIComponent(t)+n,a="<div style='"+(f?"-webkit-overflow-scrolling: touch; overflow-y: scroll; ":"overflow: hidden; ")+"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  "+i+" src='"+r+"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>";return e.className+=" pdfobject-container",e.style.position="relative",e.style.overflow="auto",e.innerHTML=a,e.getElementsByTagName("iframe")[0]},u=function(e,t,n,o,i,r,a){var s="";return s=t&&t!==document.body?"width: "+i+"; height: "+r+";":"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",e.className+=" pdfobject-container",e.innerHTML="<embed "+a+" class='pdfobject' src='"+n+o+"' type='application/pdf' style='overflow: auto; "+s+"'/>",e.getElementsByTagName("embed")[0]},s=function(t,n,o){if("string"!=typeof t)return a();n=void 0!==n&&n;var r=(o=void 0!==o?o:{}).id&&"string"==typeof o.id?"id='"+o.id+"'":"",s=!!o.page&&o.page,c=o.pdfOpenParams?o.pdfOpenParams:{},f=void 0===o.fallbackLink||o.fallbackLink,p=o.width?o.width:"100%",m=o.height?o.height:"100%",g="boolean"==typeof o.forcePDFJS&&o.forcePDFJS,h=!!o.PDFJS_URL&&o.PDFJS_URL,v=d(n),N="",C="";return v?(s&&(c.page=s),C=i(c),g&&h?l(v,t,C,h,r):e?u(v,n,t,C,p,m,r):h?l(v,t,C,h,r):(f&&(N="string"==typeof f?f:"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>",v.innerHTML=N.replace(/\[url\]/g,t)),a())):a()},{embed:function(e,t,n){return s(e,t,n)},pdfobjectversion:"2.0.201604172",supportsPDFs:e}})},243:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(159)),r=o(n(158)),a=n(62),s=o(n(20));t.default={name:"agreement-preview",data:function(){return{isDialogShow:!0,goBackRoute:"/worker/sign-manage",contractNameId:null,businessId:null,startTime:null,currentTime:null,maxTime:3e5,pdfUrl:"",loading:!0,loadingText:"正在创建合同"}},props:{contractNameId:{type:Number,require:!0},businessId:{type:Number,require:!0},contractId:{}},created:function(){this.contractId&&(this.loadingText="加载合同中"),this.startTime=Date.parse(new Date),this.pollingIsCreateContract()},methods:{closeDialog:function(){this.contractId?this.$emit("previewClose",!1):this.$emit("previewClose",!0)},pollingIsCreateContract:function(){var e=this;if(Date.parse(new Date)-this.startTime>this.maxTime)this.$msgbox((0,a.mb)("创建合同失败","error"));else{var t={contractNameId:this.contractNameId,businessId:this.businessId};r.default.checkIsCreateContract(t).then(function(t){if(200===t.data.status)if(t.data.result.success){e.loading=!1;var n=s.default.getPreviewURL(t.data.result.pdfUrl);i.default.embed(n,"#pdf")}else setTimeout(function(){e.pollingIsCreateContract()},2e3);else e.loading=!1,e.$msgbox((0,a.mb)(t.data.message,"error"),function(){e.closeDialog()})})}}}}},298:function(e,t,n){(e.exports=n(2)()).push([e.id,"\n.preview-tips {\n    top: 50% !important;\n}\n.agreement-preview-dialog .el-dialog{\n    width: 80%;\n}\n#pdf{\n    height: 100%;\n}\n",""])},336:function(e,t,n){var o=n(298);"string"==typeof o&&(o=[[e.id,o,""]]);n(3)(o,{});o.locals&&(e.exports=o.locals)},376:function(e,t,n){n(336);var o=n(4)(n(243),n(392),null,null);e.exports=o.exports},392:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"t8t-detail-view"},[n("el-dialog",{staticClass:"t8t-full-dialog2 dialog-new agreement-preview-dialog",attrs:{size:"full"},on:{close:e.closeDialog},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"preview-tips",attrs:{"element-loading-text":e.loadingText}}),e._v(" "),n("div",{attrs:{id:"pdf"}})])],1)},staticRenderFns:[]}}});