webpackJsonp([70,153,269],{5:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(1)),n=r(a(8));t.default={allSystemCodeList:function(e){return(0,o.default)({method:n.default.CONFIGURE.methods.SYS_CODE_LIST,service:n.default.CONFIGURE.name,args:e})},listNextLevelUnforbidden:function(e){return(0,o.default)({method:n.default.CONFIGURE.methods.LIST_UNFORBIDDEN,service:n.default.CONFIGURE.name,args:e})},queryUnionParent:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryUnionParent,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryPage:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.QUERY_PAGE,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryShopUnion:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryShopUnion,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryShop:function(e){return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryShop,service:n.default.SUPPLY_CONFIGURE.name,args:e})},queryByFunctionCode:function(e){return(0,o.default)({method:n.default.ORGANIZATION.methods.QUERY_BY_FUNCTIONCODE,service:n.default.ORGANIZATION.name,args:e})},queryAll:function(e){return(0,o.default)({method:n.default.ORGANIZATION.methods.ORG_QUERY,service:n.default.ORGANIZATION.name,args:e})},queryTreeByTypeAndFunction:function(e){return(0,o.default)({method:n.default.ORGANIZATION.methods.QUERY_TREE_FUNCTION,service:n.default.ORGANIZATION.name,args:e})},queryChildrenByWholeCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCode,service:n.default.SUPPLY_CONFIGURE.name,args:{wholeCode:e,depth:t}})},queryChildrenByWholeCodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,o.default)({method:n.default.SUPPLY_CONFIGURE.methods.queryChildrenByWholeCodes,service:n.default.SUPPLY_CONFIGURE.name,args:{wholeCodes:e,depth:t}})},getAllQueue:function(){return(0,o.default)({method:n.default.EDA.methods.QUERY_QUEUE_QUERYQUEUES,service:n.default.EDA.name,args:{}})}}},8:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={CONFIGURE:{name:"OnLYil9jY0PiKilsavskNJvygGUxhME7eLPWccmGmYjb_ED",methods:{SYS_CODE_LIST:"vPnFi_QA4HeBWeU61ZjQPCn",LIST_UNFORBIDDEN:"vL0y_oFhAeDM3YTmFrp2oaHn1UDcQEzq1orWi41sEc2pVcjlpGN"}},SUPPLY_CONFIGURE:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"Ewi6YId8aELgLHFBBSBMT4BvG3R",queryUnionParent:"5l6jR2KUJ4QdYxLFz0ZJGFy5XZkLajNNSEdLf0t",queryShopUnion:"zPrIoMCwO3geMqwnGH2Afs0w-7lpdva",queryShop:"4VE-APqV_Fs13Cswfj8",queryChildrenByWholeCode:"sDE1BauR-rhu_AU-6F9VF952lJ_JIl-r1QOnscFpFYW0GFS9p3nAG1z",queryChildrenByWholeCodes:"CEGKxWt_AJmoqBtXoGEqET64657I2n7n39qadM-E_uX2b1O8X5k8Ii2vEnj"}},ORGANIZATION:{name:"CsxicaQ7wM_3kaiMdGJQAaOa2fUF8v-",methods:{QUERY_BY_FUNCTIONCODE:"UwBgld0zWv.T_KSfK6W2_uSPCGXiv-mkEbmTNx6qeGoR_hH",ORG_QUERY:"DOiN6_9fU1yNwZE_gRuTrdwwvEg",QUERY_TREE_FUNCTION:"-DB0-GqPoWXHozK4BKUV3yMPaFmC4lppJyYYIe9k-Gk5VCj84OEe2JBi24SnYuFqXHe",ORG_QUERY_WITHOUTDEL:"9Ivp3_1e5zNZU_miVqa6YXq9Zg0sb1JBadatp4EuTiR"}},GOODS:{name:"qVq5B_KUuBzTC3kyP9TiuA53IS1kiBn5fR5JVjR7fUS6nsTm4Zc",methods:{QUERY_PAGE:"ByoqRxHfrD8M7MGSNKC-qVN",QUERY_PAGE_GOODS_UNION:"KYI9tvUKvrmrnw02TOmUAbkj27FmFOkq8nDox-O"}},EDA:{name:"806ndPAX4QHSaL8S3kOGYVWD7gJKERC",methods:{QUERY_QUEUE_QUERYQUEUES:"NJaG8pAbK6IGAM2RtOG2V_cGwPKCj8.QKtj"}}}},11:function(e,t,a){e.exports=a(7)(68)},85:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={template:{name:"xn8QzCUzoAE7KPVqAowQmXMFkFO90Ky",methods:{searchTemplate:"CNXZAq_UTBYDp9COKIC-kQAnFIgOKmlWRPJXgJl",createTemplate:"c3zjwjJL9eWIAcInQqzybOqqDP4tWPwn2aoZph6",updateTemplate:"S8xZvRwVjfRS6iRKnapLHgkpbwZUg1xngMtiMIx",checkTemplate:"ibbqkvRhUQO2fRLXki402wOrWsTczmh7orisg4F",forbiddenTemplate:"XiZhTXnJofGHcYCVPJsz9lVx_fLFU6xYkqxTmRQHCPq",copyTemplate:"VggaUzBzkX9GYQtlt9Ka6pjTwGcXM2pOzmnE4n9"}},tempItem:{name:"xn8QzCUzoAE7KPVqAowQmXMFkFO90Ky",methods:{updateTempItem:"LnUSpgz6fZCYfe0kwIbZ0ceGFnUFChh",checkTempItem:"7QBLR5i4fMgzMI5wWk3zlMCSNBDidhv",searchTempItemList:"vLnojOoObKzDxJBqiWbhxcdaTWNpR8t",forbiddenTempItem:"ktovV_QnU-ehl9s6hgAr1TgpHqgqebVRPJ3",copyTempItem:"M1UAC6T5be52FLLhASJBidGRaN69tnc",tempRecordQuery:"DIdYCqAfWpr3qnB2uc6qgY76sWQKGruDy6l"}},supply:{name:"8m7ufp84fb2V0f5Z0e1LiSKvI9wfWGyPcR5O8IydTmjLcK9YcKE",methods:{queryGoodsForSetSku:"1yvDQ5-lGkBG40OpMk61e9oxDjiPVvn9iKjCyrD7Ol3nucH",queryEffectGoodsByCity:"8PoySH4qiMN2F8IS6OYE5bKs0p1MUxUSVpZxjap8w2y",queryEffectGoodsByCityAndSalePrice:"HSmeFx6Fz1ztAEC-cwOBT0gAzFkU74kMkhrP8LG8zKC05LJdss0BN-dynXo"}},schedule:{name:"PHZ4wJ5NChyZm_bdgBuKFocGUCzQOjT",methods:{module:"i7i7ssrGiIWkCwyuNS8vsJrQ8YIvxaAWIZ-xlYS",getInfoQuotaion:"7lBW1onPuYVQ_lUM1lmsvuWwSEqVC2jCWxXkS5rTOAkEgxyYP69",queryModuleAndModuleItemById:"Z0FlRV4xWyTqaV6Q3EVniJfCtY-F0_V5jcTdMPM2iLT1jESsRRTQkYAZ2w4ITO4"}}}},95:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(1)),n=r(a(100));t.default={create:function(e){return(0,o.default)({method:n.default.TEMPLATE.methods.CREATE,service:n.default.TEMPLATE.name,args:e})},update:function(e){return(0,o.default)({method:n.default.TEMPLATE.methods.UPDATE,service:n.default.TEMPLATE.name,args:e})},setModuleStatus:function(e){return(0,o.default)({method:n.default.TEMPLATE.methods.SETMODULESTATUS,service:n.default.TEMPLATE.name,args:e})},queryModuleQuotaionById:function(e){return(0,o.default)({method:n.default.TEMPLATE.methods.queryModuleQuotaionById,service:n.default.TEMPLATE.name,args:e})},moduleItemQueryPage:function(e){return(0,o.default)({method:n.default.TEMPLATE.methods.QUERY,service:n.default.TEMPLATE.name,args:e})},searchProductPackage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};return e.length&&(r.search=e),t.length&&(r.sort=t),a.length&&(r.fields=a),(0,o.default)({method:n.default.TEMPLATE.methods.queryModuleQuotaionById,service:n.default.TEMPLATE.name,args:r})}}},100:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={TEMPLATE:{name:"xn8QzCUzoAE7KPVqAowQmXMFkFO90Ky",methods:{QUERY:"oC89kQlF3OnLilu76dP70tlyxv0ASFpeh-3wfhWvcQDwoHZ",CREATE:"3Hxw2EmJ6VXHimux2PkDK5iYElw4DZ0l74vTNkgmaah",UPDATE:"Bg2FMBVtN_pbDpl5KEBTYUo20P238It5pAN3qsbqvkQ",queryModuleQuotaionById:"NHGSRqrdMxo8kd8nvJTQztg536fL1MVsa6Y5L5s"}},PROPERTY:{name:"8m7ufp84fb2V0f5Z0e1LiSKvI9wfWGyPcR5O8IydTmjLcK9YcKE",methods:{propertyQueryPage:"xxyFxYonI0x3Fv7Po3D98lC_z76"}}}},101:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={order:{name:"I1c2Cx1PxgTcpqUYzfTQualK0vhZ94S",methods:{getChildSpaces:"MmRihb77eMIXfgGrEdPXz3TZUEsgmxRJ4F2ZGghUl_A",quoteOrderInfo:"5qs-2_iJlfoGFwLwKgMLgAdehHkM84SlDXT",getQuoteTempItemBySpace:"-t65G7VbO-q2P9m0B9BadFtrpM6GhDrX1U52.IS9ry5vxee",getQuoteTempItemUnstandardByTempId:"UeaeWuZ0owkh2pNY1gtUbRMBnTEHtlCcAga81Qi-IdQQOlp9dmuntdogtV2",saveQuoteOrder:"Z1whbJY9tgk5mTslpmGuXgoiEsujkAmVf4p3Mwr0JBkSDGl_fRJ",selectionSku:"ibZvmBQ1R8d1d-aX5iZFzJq3-VrMqfNHfS9",getSkuInfo:"",newCreate:"ruhrYAW2mRiM7oAc_0nuPyhTOpLkwdBSEVwSfXx",submitOrder:"qj10sGZqcqh9rdDTtoEWxWnX9rERixtuih0",printOrder:"SaaWDpGnS77pCsNSNerZNVXM5UOBCf_NL2DPVhmA2ymO37k",previewOrder:"VLeaXxzUC-MLoWu8WS0uuc-Q9oWuvLEdeeFdtsYcJKMsDeAL9un",queryQuoteOrderProject:"BJGIAJ0Du4oR_t35Pjx71J_DcUv-qE_onXCZl6obtH66siE7PLs4vb2aa89p0jh",queryCompleteQuoteOrderProjectPage:"WfMcT0JtVUBmax-AGXP6eVJwnaTUrbAEsGA4nCAKe7OLsaFOMIdOQF3cP8bEviMPtONXPaR",recheckQuoteOrder:"z2mlc3fYxwnYvqJh-vZHf6pYIHtdp8ntZJ6dkR-",quoteSelectionInfo:"DnH6MwYeTCSVoO-phT627OU1LUIs5qb4qrenK0M-nzVv9QPlrLSwilT",saveSelectionList:"dTNdbuVMsa1RoEDKyGSG9uBselzCnLfciR-GTvRU3RWDu3DaVLz",submitSelectionList:"IohQLZ3IoJEmT7bYBMyWFtZWyYxLjHiIkkoIELhK2AlZxhvXeeZamPr",syncTempToQuoteAndSelection:"9ZEZ9Z-dI5CPPmFAxPFAFPBtTAIoP3z1f81CoizG1i861jNV91jG2jFIoEIKWrf",getStandardQuoteItem:"zQ8MyPxYDEBUJut6BOG77G5gG17_SZLB6a8OARBAjerem5AQ4OIL95c1Bic9Nz7AshuHtCZ",getUnStandardQuoteItem:"PdLgBuAbnTHLLpF591Df2XTI0VUKOgpSLPWHe7TS7_r7RdKR_8iPAtlBrsuApI1XKIZVbZqT-no",deleteStandardQuoteItem:"YPwMgGiJrWBRbX9P3YOHCgFJ0NETufHCBJTgU5hEagdARdr",getQuoteDelivery:"2NSPGgkHDc9XXxvmMMyBqH7jXe0_ec__0RtPtEEDmbHAmRXrfMZFvxI18dPGd4cGfu_y7bJHfaCz-Ht",deleteQuoteDelivery:"CfcKYaEmOe_JpYSr4z_NHKVZef8OpXFM6P8BJhYD62oTbAKRMnJQB2O-K_n",insertSingeQuoteItemAndDosageDetail:"z_7q38OHjKbbybbfN2eZREtMyPQoQ-1w8b0iXmte6z-qcv0ffcdjMXyiv9nlcWJdwinqNp6eYq-",insertQuoteItemAndDosageDetails:"okggqEd6rmh-bRIdIruew7afgBmnA9nDYjjfVK0akcjWSZN",changeQuoteStatus:"q271sNZxr1z3onezmjll8tclizTIHcwpPiN"}},project:{name:"azI9sv-1Owbj4ZXdwMS1EzYRRvpIBnA",methods:{findOrderDetailByIds:"GNMNUyDXBxBaT0_XeI8gYCLlpQU9-a2YSQhYcH6Sh6MDMIgUvtUH7B2IM8CVA0b"}}}},109:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(76)),n=r(a(21)),u=r(a(1)),d=r(a(101));t.default={getChildSpaces:function(e){return(0,u.default)({method:d.default.order.methods.getChildSpaces,service:d.default.order.name,args:{quoteOrderSpaceSelcetDTO:{tempId:e}}})},quoteOrderInfo:function(e,t,a,r,o){return(0,u.default)({method:d.default.order.methods.quoteOrderInfo,service:d.default.order.name,args:{quoteOrderShowDTO:{tempId:t,yid:e,area:a,houseTypeId:r},accountId:o}})},getQuoteTempItemBySpace:function(e,t){return(0,u.default)({method:d.default.order.methods.getQuoteTempItemBySpace,service:d.default.order.name,args:{quoteOrderSpaceTempItemListDTO:{tempId:t,spaceId:e}}})},getQuoteTempItemUnstandardByTempId:function(e){return(0,u.default)({method:d.default.order.methods.getQuoteTempItemUnstandardByTempId,service:d.default.order.name,args:{quoteOrderSpaceTempItemListDTO:{tempId:e}}})},saveQuoteOrder:function(e,t){return(0,u.default)({method:d.default.order.methods.saveQuoteOrder,service:d.default.order.name,args:{quoteOrderCreateDTO:e,accountId:t}})},selectionSku:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o={orgId:a,gdmId:e,categoryId:t,bomGdmId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0};return"{}"===(0,n.default)(r)||(o.queryField=r),(0,u.default)({method:d.default.order.methods.selectionSku,service:d.default.order.name,args:o})},getSkuInfo:function(e){return(0,u.default)({method:d.default.order.methods.getSkuInfo,service:d.default.order.name,args:{skuid:e}})},submitQuoteOrder:function(e,t){return(0,u.default)({method:d.default.order.methods.submitOrder,service:d.default.order.name,args:{quoteOrderSubmitDTO:{orderId:e,updateUser:t}}})},newCreateQuoteOrder:function(e,t){return(0,u.default)({method:d.default.order.methods.newCreate,service:d.default.order.name,args:{quoteOrderNewCreateDTO:{orderId:e,updateUser:t}}})},previewQuoteOrder:function(e){return(0,u.default)({service:d.default.order.name,method:d.default.order.methods.previewOrder,args:{orderId:e}})},findOrderDetailByIds:function(e){return(0,u.default)({service:d.default.project.name,method:d.default.project.methods.findOrderDetailByIds,args:{ids:e}})},initQuoteOrderDetail:function(e,t,a,r,n){var u=this;return new o.default(function(o,d){u.quoteOrderInfo(e,t,a,r,n).then(function(e){if(200==e.data.status){var t=e.data.result.quoteOrder;(!t.hasOwnProperty("pkgPrice")||t.pkgPrice<=0)&&d({status:1,message:"未获取到项目标配套餐价"}),o(e.data.result)}else d({status:2,message:e.data.result||"系统异常，请稍后重试"})}).catch(function(e){d({status:3,message:"查询报价模板信息失败，请重试"})})})},initQuoteSelectionList:function(e,t){return new o.default(function(a,r){(0,u.default)({method:d.default.order.methods.quoteSelectionInfo,service:d.default.order.name,args:{yid:e,accountId:t}}).then(function(e){200==e.data.status?a(e.data.result):r(e.data.result||e.data.message||"查询失败")}).catch(function(e){r("查询出错")})})},saveSelectionList:function(e,t){return(0,u.default)({method:d.default.order.methods.saveSelectionList,service:d.default.order.name,args:{dto:e,accountId:t}})},submitSelectionList:function(e,t){return(0,u.default)({method:d.default.order.methods.submitSelectionList,service:d.default.order.name,args:{yid:e,accountId:t}})},recheckQuoteOrder:function(e,t){return(0,u.default)({method:d.default.order.methods.recheckQuoteOrder,service:d.default.order.name,args:{quoteOrderSubmitDTO:{orderId:e,updateUser:t}}})},syncTempToQuoteAndSelection:function(e,t){return new o.default(function(a,r){(0,u.default)({method:d.default.order.methods.syncTempToQuoteAndSelection,service:d.default.order.name,args:{id:e,accountId:t}}).then(function(e){200==e.data.status&&1==e.data.result?a(!0):r(e.data.result||"同步失败， 请重试")}).catch(function(e){r("同步失败， 请重试")})})},getStandardQuoteItem:function(e,t){return(0,u.default)({service:d.default.order.name,method:d.default.order.methods.getStandardQuoteItem,args:{orderId:e,orderSpaceId:t}})},getUnStandardQuoteItem:function(e,t){return(0,u.default)({service:d.default.order.name,method:d.default.order.methods.getUnStandardQuoteItem,args:{orderId:e,orderSpaceId:t}})},insertSingeQuoteItemAndDosageDetail:function(e,t){return new o.default(function(a,r){(0,u.default)({service:d.default.order.name,method:d.default.order.methods.insertSingeQuoteItemAndDosageDetail,args:{dto:e,accountId:t}}).then(function(e){200==e.data.status?a(!0):r(e.data.result||e.data.message||"新增组合失败，请重试")}).catch(function(e){r("新增组合失败，请重试")})})},insertQuoteItemAndDosageDetails:function(e,t){return new o.default(function(a,r){(0,u.default)({service:d.default.order.name,method:d.default.order.methods.insertQuoteItemAndDosageDetails,args:{dto:e,accountId:t}}).then(function(e){200==e.data.status?a(!0):r(e.data.result||e.data.message||"新增报价单行失败，请重试")}).catch(function(e){r("新增报价单行失败，请重试")})})},deleteQuoteDelivery:function(e,t){return new o.default(function(a,r){(0,u.default)({service:d.default.order.name,method:d.default.order.methods.deleteQuoteDelivery,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a(!0):r(e.data.result||e.data.message||"删除组合失败，请重试")}).catch(function(e){r("删除组合失败，请重试")})})},deleteStandardQuoteItem:function(e,t){return new o.default(function(a,r){(0,u.default)({service:d.default.order.name,method:d.default.order.methods.deleteStandardQuoteItem,args:{id:e,accountId:t}}).then(function(e){200==e.data.status?a(!0):r(e.data.result||e.data.message||"删除失败，请重试")}).catch(function(e){r("出错，请重试")})})},changeQuoteStatus:function(e,t,a){return(0,u.default)({method:d.default.order.methods.changeQuoteStatus,service:d.default.order.name,args:{orderId:e,orderStatus:t,accountId:a}})}}},163:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(21)),n=r(a(1)),u=r(a(179));t.default={getProjectNodesByBillType:function(e,t){return this.searchProjectNode(1,100,{billType:t,projectId:e})},searchProjectNode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s={page:e,size:t};return r.length&&(s.sort=r),d.length&&(s.fields=d),"{}"!=(0,o.default)(a)&&(s.search=a),(0,n.default)({method:u.default.methods.searchProjectNode,service:u.default.name,args:s})},projectNodeBillCreateVerify:function(e,t){return(0,n.default)({method:u.default.methods.projectNodeBillCreateVerify,service:u.default.name,args:{nodeId:t,projectId:e}})},projectNodeGetByProcessId:function(e){return(0,n.default)({method:u.default.methods.projectNodeGetByProcessId,service:u.default.name,args:{processId:e}})}}},174:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(6)),n=r(a(85)),u=r(a(95)),d=r(a(5)),s=r(a(109)),l=r(a(163));t.default={props:["tempId","yid","orgId"],name:"selectQuoteTemp",components:{},created:function(){var e=this,t=this.$route.query.procInsId;t?(this.from="workflowProDel",l.default.projectNodeGetByProcessId(t).then(function(t){200==t.data.status&&(e.yid=t.data.result.projectId,e.initData())})):this.initData(),u.default.searchProductPackage().then(function(t){var a=[];200===t.data.status&&(t.data.result.forEach(function(e){a.push({value:e.id,text:e.pkgName})}),e.commonData.productPackages=a)}),this.getHouseTypes()},methods:{getHouseTypes:function(){this.getCommonOptions(30004,"houseTypes")},initData:function(){var e=this;s.default.findOrderDetailByIds([this.yid]).then(function(t){if(200==t.data.status&&t.data.result.length){var a=t.data.result[0];e.projectInfo.area=a.decorationOrderHouseVO.houseArea,e.projectInfo.houseAddress=a.decorationOrderHouseVO.houseAddress,e.projectInfo.id=e.yid,e.submitAble=!0}})},tableLoaded:function(){},closeSelectQuoteDialog:function(){this.$emit("close")},submit:function(){var e=this,t=this.$refs.selectQuoteItemTable.getSelectRow(),a=this;if(!this.yid)return this.$message({type:"warning",message:"没有查询到项目信息"});var r=t||this.currentRow;if(0==r.length)return this.$message({type:"warning",message:"请选择报价模板"});this.$refs.selectQuoteTempForm.validate(function(t){if(!t)return e.$message({type:"warning",message:"请完善户型和面积"});s.default.initQuoteOrderDetail(e.yid,r.id,e.projectInfo.area,e.projectInfo.houseTypeId,+o.default.get("t8t-tc-uid")).then(function(e){a.$router.push({path:"/worker/quote-order-detail",query:{area:a.projectInfo.area,houseTypeId:a.projectInfo.houseTypeId,tempId:r.id,yid:a.yid,t:(new Date).getTime()}}),a.closeSelectQuoteDialog()}).catch(function(e){if(1==e.status){var t=a.formCommonData.houseTypes.filter(function(e){return e.value==a.projectInfo.houseTypeId}),r=t.length?t[0].text:a.houseTypeId;return a.$msgbox({title:" ",type:"error",message:"未获取到项目标配套餐价（计价面积："+(a.projectInfo.area||"未设置")+" 户型："+(r||"未设置")+" ）"})}a.$msgbox({title:" ",type:"error",message:e.message})})})},cellClick:function(e,t,a,r,o,n){},handleCurrentRowChange:function(e,t){this.currentRow=e},getCommonOptions:function(e,t){var a=this,r={page:1,search:{pPropertyCode:e},size:100};d.default.queryUnionParent(r).then(function(e){200===e.data.status&&e.data.result.forEach(function(e){1===e.propertyStatus&&a.formCommonData[t].push({value:e.id,text:e.propertyName})})})}},data:function(){return{tempId:null,yid:null,orgId:null,from:null,projectInfo:{area:0,houseTypeId:0,houseAddress:"",id:0},formCommonData:{houseTypes:[{value:0,text:"请选择户型"}]},formFields:[{prop:"id",label:"项目ID",type:"input",disabled:!0},{prop:"houseAddress",label:"项目地址",type:"input",disabled:!0},{prop:"area",label:"计价面积",type:"input",rules:[{pattern:/^((0|[1-9]\d{0,6})((\.[0-9]{1,2})?))$/,message:"最大7位，最多保留两位的数字"},{required:!0,message:"请填写计价面积"}]},{prop:"houseTypeId",label:"户型",type:"select",list:"houseTypes",rules:[{type:"number",min:1,message:"请选择户型"}]}],dialogVisible:!0,mainTableService:n.default.template.name,mainTableMethod:n.default.template.methods.searchTemplate,args:{productPkgTemp:{effectTime:Math.ceil((new Date).getTime()/1e3),freezeTime:Math.ceil((new Date).getTime()/1e3),forbiddenTime:Math.ceil((new Date).getTime()/1e3),tempStatus:2,orgId:this.orgId}},gopath:"quote-order-detail",commonData:{productPackages:[]},selectQuoteTempColumns:[{prop:"tempCode",label:"产品包模板编码"},{prop:"tempName",label:"产品包模板名称",width:200},{prop:"pkgId",label:"产品包",list:"productPackages"}],currentRow:[],submitAble:!1}}}},179:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={name:"glSRlvj4F6mLlG4hT0ygjHn-L1yIGeY",methods:{searchProjectNode:"SjL8zcXLjlLq0j9Ym-cN8dKN7F8FAv-iBGI",projectNodeBillCreateVerify:"tXcDq9q61DeLxc7i9g0449rVNzz7s5eYNYXeoh5r61Q",projectNodeGetByProcessId:"DIR7OzKtDCesExI9LHeWdU9M67eHyL0neQ2vCxZsa7Vyd73"}}},184:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.selectQuoteTemp .t8t-table-container .table-container{\n    min-height: 300px;\n    max-height: 350px;\n}\n.selectQuoteTemp .my-el-dialog .el-form-item__content{\n    width:120px;\n}\n",""])},187:function(e,t,a){var r=a(184);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},193:function(e,t,a){a(187);var r=a(4)(a(174),a(195),null,null);e.exports=r.exports},195:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selectQuoteTemp"},[a("el-dialog",{staticClass:"my-el-dialog selectQuoteItemdialog",class:"workflowProDel"==e.from?"":"g-w-1000",attrs:{title:"选择报价模板",size:"workflowProDel"==e.from?"full":"","close-on-press-escape":null==e.from,"show-close":null==e.from},on:{close:e.closeSelectQuoteDialog},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t}}},[a("t8t-form-panel",{ref:"selectQuoteTempForm",attrs:{dataSource:e.projectInfo,fields:e.formFields,commonData:e.formCommonData}}),e._v(" "),a("div",[a("el-row",{attrs:{type:"flex",justify:"left"}},[a("el-col",{attrs:{span:24}},[a("el-alert",{attrs:{title:"请谨慎设置户型及计价面积，报价单生成后将不可修改！（如需修改，请通过报价单的‘新建’功能操作）",type:"error",closable:!1,"show-icon":""}})],1)],1),e._v(" "),a("br")],1),e._v(" "),a("t8t-table",{ref:"selectQuoteItemTable",attrs:{columns:e.selectQuoteTempColumns,service:e.mainTableService,method:e.mainTableMethod,commonData:e.commonData,args:e.args,indexCol:!1,radioCol:!0,selectable:e.selectable,pageBar:!0},on:{"row-double-click":e.submit,"current-row-change":e.handleCurrentRowChange,"data-loaded":e.tableLoaded}}),e._v(" "),a("div",{slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content"},[null==e.from?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",disabled:!e.submitAble},on:{click:function(t){e.submit()}}},[e._v("确认")])],1)])],1)],1)],1)],1)},staticRenderFns:[]}},762:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(a(109));t.default={props:["orderId"],name:"changeQuoteStatus",components:{},data:function(){return{orderId:null,orderStatus:null,changeQuoteStatusVisible:!0,args:{orderId:this.orderId,orderStatus:this.orderStatus},submitAble:!1,changeQuoteStatusData:{orderStatus:null},changeQuoteStatusCommonData:{orderStatuses:[{text:"完成初稿",value:0},{text:"报价完成",value:6},{text:"已签约",value:7}]},changeQuoteStatusFields:[{prop:"orderStatus",label:"报价单状态",type:"select",list:"orderStatuses",rules:[{required:!0,message:"请选择状态"}]}]}},created:function(){},methods:{changeQuoteStatusDialogClose:function(){this.$emit("close")},submit:function(){var e=this;this.$refs.mainForm.validate(function(t){if(!t)return!1;var a=e.changeQuoteStatusData,o=+Cookie.get("t8t-tc-uid");r.default.changeQuoteStatus(e.orderId,a.orderStatus,o).then(function(t){e.changeQuoteStatusVisible=!1,e.$parent.getTableData()}).catch(function(t){return e.$msgbox({type:"error",message:t||"更新项目状态失败！",title:""})})})}}}},763:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(a(11)),n=(r(a(77)),r(a(6))),u=r(a(193)),d=r(a(101)),s=r(a(163)),l=r(a(5)),i=r(a(2205));t.default={name:"show",components:{selectQuoteTemp:u.default,changeQuoteStatus:i.default},data:function(){return{tabs:[{name:"未报价",symbol:"noQuoteList"},{name:"已报价",symbol:"hasQuoteList"}],orderId:null,activeName:"noQuoteList",breadcrumbData:[{title:"工模售前"},{title:"方案"},{title:"项目列表"}],service:d.default.order.name,method:d.default.order.methods.queryQuoteOrderProject,args:{accountId:+n.default.get("t8t-tc-uid")},fullscreenLoading:!1,changeQuoteStatusVisible:!1,projectDataSource:[{id:3,fromText:"项目来源",address:"楼盘地址",isReserved:"交定",lfTime:"量房时间",isQyed:"签约",type:"装修类型",htMoney:"合同金额",customer:"客户中心",designer:"设计中心",sendTime:"派单时间",updateTime:"最后更新时间",status:"方案状态",tempId:19}],currentYid:null,currentOrgId:null,fields:[{type:"input",label:"项目ID",name:"id"}],fields2:[{type:"input",label:"项目ID",name:"yid"}],selectSource:{moduleStatus:[],forbiddenStatus:[{text:"否",value:0},{text:"是",value:1}]},columns:[],noQuoteColumns:[{prop:"id",label:"项目ID"},{prop:"orgName",label:"门店"},{prop:"orderMainStatusName",label:"订单状态"},{prop:"ownerName",label:"业主称呼"},{prop:"houseAddress",label:"详细地址"},{prop:"decoratePatternName",label:"装修类型"}],hasQuoteColumns:[{prop:"yid",label:"项目ID"},{prop:"orderMainStatusName",label:"项目状态"},{prop:"orgName",label:"门店"},{prop:"id",label:"报价单ID"},{prop:"tempName",label:"产品包模板"},{prop:"area",label:"计价面积"},{prop:"houseTypeName",label:"户型"},{prop:"owner",label:"业主称呼"},{prop:"projectAddress",label:"详细地址"},{prop:"orderStatusName",label:"报价单状态"}],commonData:{qiStatus:[{text:"完成初稿",value:0},{text:"审核中",value:1},{text:"审核驳回",value:2},{text:"报价已出",value:3},{text:"核算中",value:4},{text:"核算驳回",value:5},{text:"报价完成",value:6}],forbiddenStatus:[{text:"否",value:0},{text:"是",value:1}]},editType:"add",dialogVisible:!1,rowId:null,dialogTitle:"",tableData:[],selectedRows:[]}},methods:{handleClickTabs:function(e){var t=e.name;this.args.search=null,this[t]()},noQuoteList:function(){var e=this.$refs.t8tTable;this.columns=this.noQuoteColumns,this.method=e.method=d.default.order.methods.queryQuoteOrderProject,e.reloadTable()},hasQuoteList:function(){var e=this.$refs.t8tTable;this.columns=this.hasQuoteColumns,this.method=e.method=d.default.order.methods.queryCompleteQuoteOrderProjectPage,e.reloadTable()},submitSearch:function(e){var t=(0,o.default)({},e),a=(0,o.default)({},this.args);a.search=t,this.args=a},changeQuoteStatus:function(){var e=this.$refs.t8tTable.getSelectRows();if(e.length<1)return this.$message.error("未选择项目");if(e.length>1)return this.$message.error("仅可选择一项，请去掉多余的选项。");var t=e[0];this.orderId=t.id,this.changeQuoteStatusVisible=!0},jumpQuoteOrder:function(){var e=this,t=this.$refs.t8tTable.getSelectRows();if(t.length<1)return this.$message.error("未选择项目");if(t.length>1)return this.$message.error("仅可选择一项，请去掉多余的选项。");var a=t[0],r=a.yid||a.id,o=a.orgId;void 0==a.orderStatus||a.orderStatus<0?(this.fullscreenLoading=!0,l.default.queryUnionParent({page:1,search:{pPropertyCode:11605,propertyCode:3003},size:100}).then(function(t){if(200!==t.data.status)return e.fullscreenLoading=!1,e.$msgbox({title:"",type:"error",message:"出错：没有查询到单据类型为报价单的辅助资料"});if(t.data.result.length>0){var a=t.data.result[0].id;s.default.getProjectNodesByBillType(r,a).then(function(t){if(200!=t.data.status)return e.fullscreenLoading=!1,e.$msgbox({title:"",type:"error",message:"当前项目不能进行报价：查询任务节点失败"});if(!(t.data.result.rows.length>0))return e.fullscreenLoading=!1,e.$msgbox({title:"",type:"error",message:"当前项目不能进行报价：没有查询到创建报价单的任务节点"});var a=t.data.result.rows[0].id;s.default.projectNodeBillCreateVerify(r,a).then(function(t){if(e.fullscreenLoading=!1,200!==t.data.status||1!==t.data.result){var a="";switch(t.data.status){case 41e3:a="系统异常";break;case 41001:a="项目排期中没有报价节点";break;case 41020:a="项目报价节点状态不为待开始";break;case 41021:a="前置节点的状态不符合节点关系的要求，请检查";break;default:a="请检查项目排期"}return e.$msgbox({title:"",type:"error",message:"当前项目不能进行报价："+a})}e.currentYid=r,e.currentOrgId=o,e.dialogVisible=!0})})}})):this.$router.push({path:"/worker/quote-order-detail",query:{yid:r}})},getTableData:function(){this.$refs.t8tTable.reloadTable()}},created:function(){this.columns=this.noQuoteColumns}}},1219:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.table-container[data-v-65e99b76] {\n    -ms-flex: 1;\n        flex: 1;\n    overflow: auto;\n    margin-left: -1px;\n}\n.quoteconfig .g-main-container[data-v-65e99b76]{\n\n    display: -ms-flexbox;\n\n    display: flex;\n    -ms-flex-direction: column;\n        flex-direction: column;\n}\n.hideToolbar[data-v-65e99b76]{\n    /*display: none;*/\n}\n",""])},1232:function(e,t,a){(e.exports=a(2)()).push([e.id,"\n.selectStandardQuoteItemDialog .el-form-item { width: 300px\n}\n",""])},1665:function(e,t,a){var r=a(1219);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},1678:function(e,t,a){var r=a(1232);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},2205:function(e,t,a){a(1678);var r=a(4)(a(762),a(2480),null,null);e.exports=r.exports},2206:function(e,t,a){a(1665);var r=a(4)(a(763),a(2470),"data-v-65e99b76",null);e.exports=r.exports},2470:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"quoteconfig",attrs:{"element-loading-text":"正在校验项目报价的前置条件"}},[a("t8t-breadcrumb",{attrs:{data:e.breadcrumbData}}),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeName,callback:function(t){e.activeName=t}}},e._l(e.tabs,function(e){return a("el-tab-pane",{attrs:{label:e.name,name:e.symbol}})})),e._v(" "),a("t8t-search",{attrs:{fields:"hasQuoteList"==this.activeName?e.fields2:e.fields,selectSource:e.selectSource,showToggleBtn:!1},on:{submit:e.submitSearch}}),e._v(" "),a("div",{staticClass:"g-main-container"},[a("t8t-toolbar",{ref:"toolbar",class:{hideToolbar:"hasQuoteList"==this.activeName},attrs:{symbolList:"hasQuoteList"==this.activeName?["ITEM-CHOOSE","CHANGE-QUOTE-STATUS"]:["ITEM-CHOOSE"]},on:{"ITEM-CHOOSE":function(t){e.jumpQuoteOrder()},"CHANGE-QUOTE-STATUS":function(t){e.changeQuoteStatus()}}}),e._v(" "),a("t8t-table",{ref:"t8tTable",attrs:{columns:e.columns,service:e.service,method:e.method,args:e.args,pageBar:!0,commonData:e.commonData,radioCol:!1},on:{"selection-change":e.selectionChange,"row-double-click":e.jumpQuoteOrder}})],1),e._v(" "),e.dialogVisible?a("select-quoteTemp",{attrs:{yid:e.currentYid,orgId:e.currentOrgId},on:{close:function(t){e.dialogVisible=!1}}}):e._e(),e._v(" "),1==e.changeQuoteStatusVisible?a("changeQuoteStatus",{attrs:{activeTableRef:e.changeQuoteStatusVisibleRef,orderId:e.orderId},on:{close:function(t){e.changeQuoteStatusVisible=!1}}}):e._e()],1)},staticRenderFns:[]}},2480:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"changeQuoteStatus"},[a("el-dialog",{staticClass:"my-el-dialog selectStandardQuoteItemDialog",attrs:{title:"修改报价单状态",size:"small"},on:{close:function(t){e.changeQuoteStatusDialogClose()}},model:{value:e.changeQuoteStatusVisible,callback:function(t){e.changeQuoteStatusVisible=t}}},[a("t8t-form-panel",{ref:"mainForm",attrs:{dataSource:e.changeQuoteStatusData,fields:e.changeQuoteStatusFields,commonData:e.changeQuoteStatusCommonData}}),e._v(" "),a("div",{slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.changeQuoteStatusVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submit()}}},[e._v("确认")])],1)])],1)],1)],1)],1)},staticRenderFns:[]}}});